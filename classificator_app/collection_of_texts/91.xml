<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[dr_bob_davidov]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-15, 08:53]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/post/705612/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Моделирование двигателя по неполной спецификации]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Разработка робототехники]]></item>
		<item type="str"><![CDATA[Схемотехника]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[simulink]]></item>
		<item type="str"><![CDATA[simulation]]></item>
		<item type="str"><![CDATA[двигатели]]></item>
		<item type="str"><![CDATA[спецификация]]></item>
		<item type="str"><![CDATA[matlab]]></item>
		<item type="str"><![CDATA[моделирование]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[ВВЕДЕНИЕ
Зачастую, документация содержит неполный список параметров, необходимых для построения компьютерных моделей процессов или объектов, параметры могут не соответствовать контрольным отношениям.
В этой работе рассматриваются варианты построения динамических моделей двигателя постоянного тока по неполной спецификации и при наличии несоответствий между параметрами спецификации, также рассматривается вопрос обеспечения адекватности модели двигателя постоянного тока следующим режимам работы:
без нагрузки (режим холостого хода),
с номинальной нагрузкой,
с максимальным КПД.
СПЕЦИФИКАЦИЯ 
Спецификация двигателя постоянного тока с номинальным напряжением питания 24 В представлена в Таблица 1. В спецификации приведены десятки параметров, которым должна соответствовать динамическая модель двигателя. Ряд параметров необходимых для моделирования не приведены, среди них: противо-ЭДС, момент сопротивления и момент инерции нагрузки.
Параметры, соответствующие разным режимам работы двигателя объединены в группы
No-load characteristics (режим холостого хода);
Nominal characteristics (режим номинальной нагрузки);
Maximum efficiency characteristics (максимальный КПД).
Таблица 1
Ряд параметров спецификации Таблица 1 можно вычислить (проверить), используя другие параметры спецификации, например, электромагнитную постоянную времени, или пусковой момент, который равен произведению пускового тока на коэффициент пропорциональности Torque constant: 
Starting torque (190 mNm) = Starting current (3.3 A) * Torque constant (56 mNm/A) = 184.5 mNm
или пусковой ток, как отношение напряжение питания двигателя к сопротивлению обмотки двигателя:
ПОСТРОЕНИЕ МОДЕЛИ
1. Вычисление зависимости тока двигателя от напряжения.
1.1. Сопротивление обмотки двигателя.
Сопротивление обмотки (Рисунок 1) равно сумме активного сопротивления R и реактивного сопротивления Ls, где L – индуктивность обмотки; s – оператор Лапласа.  
Рисунок 1. Эквивалентная схема обмотки двигателя.
 По закону Ома, ток цепи I равен отношению напряжения V к суммарному сопротивлению цепи R+Ls:
Передаточная функция (ПФ) обмотки, как отношение выхода I ко входу V, равна
Эта ПФ первого порядка имеет вид апериодического звена с коэффициентом передачи 1/R и постоянной времени L/R, равной 0,82 мс вычисленному через отношение L = 6,3 мГн к  R = 7,3 Ом. Вычисленное значение соответствует электромагнитной постоянной времени “Electrical time constant (ms)” равной 0,8 мс приведенной в спецификации двигателя.  
 1.2.  Модель обмотки двигателя.
Модель обмотки двигателя в Simulink показана на Рисунок 2.
Рисунок 2. Модель (Передаточная Функция) обмотки двигателя.  
Реакция катушки на ступенчатое воздействие 24 В показана на Рисунок 3.
Рисунок 3. Реакция (изменение тока) обмотки двигателя на ступенчатое воздействие 24В.
Через три постоянные времени (~2.45 мс) ток двигателя (Рисунок 3) входит в 5% зону (> 3.12 В) от установившегося значения 3.3 В.
2. Модель холостого хода.
2.1.   Противо-ЭДС.
Как указано в спецификации в режиме холостого тока ток двигателя равен 0.11 А. Однако в предыдущем пункте показано, что в установившемся режиме ток двигателя равен 3.3 А при питании катушки от источника 24 В. Что же вызывает уменьшение тока до 0.11 А? Уменьшение напряжения на катушке создает противо-ЭДС это напряжение пропорционально скорости вращения двигателя. Противо-ЭДС подобна выходному напряжению вращаемого электрогенератора.
По спецификации на двигатель (Таблица 1) скорость вращения “Speed (rpm)” в режиме холостого тока равна 4000 об./мин.
Зависимость тока двигателя от его скорости вращения показана Рисунок 4.
Рисунок 4. Зависимость тока двигателя от скорости вращения, построена по данным спецификации Таблица 1.
 Аппроксимация данных Таблица 1, показанная на Рисунок 4, дает следующее падение тока обмотки при увеличении скорости вращения двигателя при его питании номинальным напряжением 24 В.
I = 3.3 - 0.809e-3 (А/(об./мин)) * Speed (об./мин),
где Speed – скорость двигателя в об./мин. Следовательно отношение противо-ЭДС к скорости вращения двигателя равно 0.0059 В/(об./мин) (как 0.81e-3(А/(об./мин))* R=7.3 (Ом).
Уточненное (по данным Таблица 1) отношение противо-ЭДС к скорости вращения двигателя равно
o    0.0058 В/(об./мин) при скорости вращения 4000 об./мин двигателя без нагрузки (режим холостого хода),
o    0.0057 В/(об./мин) при скорости вращения 2920 об./мин с номинальной нагрузкой,
o    0.0059 В/(об./мин) при скорости вращения 3300 об./мин с максимальной эффективностью. 
2.2.   Модель режима холостого хода и установившиеся значения ее переменных показаны на следующем рисунке.
Рисунок 5. Модель холостого тока двигателя. 
3. Модель двигателя с номинальной нагрузкой.
Модель двигателя с номинальной нагрузкой показана на Рисунок 6.
Рисунок 6. Модель двигателя с номинальной нагрузкой. 
В модели не определены коэффициенты передачи K1 и K2. K1 – отношение углового ускорения  двигателя к суммарному моменту сил Mдвиг-Mнагр
или
где  Jдвиг+Jнагр - суммарный момент инерции вращающихся частей двигателя Jдвиг и нагрузки Jнагр . В спецификации на двигатель (Таблица 1) приведен только момент инерции двигателя Jдвиг  “Inertia (g.cm2)”, равный 75 г см2 .
Коэффициент K1 получен из математического выражения, в котором угловое ускорение двигателя равно отношению суммарного момента сил Mдвиг-Mнагр к суммарному моменту инерции Jдвиг+Jнагр .
K2 – отношение момента сопротивления нагрузки к скорости вращения двигателя:
K2 тоже, как и K1, явно не приведен в спецификации на двигатель, но известна установившаяся скорость вращения двигателя с номинальной нагрузкой “Speed (rpm)” ωдвиг = 2920 об/мин и момент сил двигателя “Torque (mNm)” Mдвиг = 50 мНм.
Постоянная времени двигателя с нагрузкой зависит от значения K1 и К2, но значение К2 можно вычислить как показано выше, поэтому K1 можно определить путем изменения реакции модели двигателя до совпадения (Рисунок 8) с реакцией апериодического звена с постоянной времени 0,17 мс , равной электромеханической постоянной времени “Electrical time constant (ms)” приведенной в спецификации на двигатель:
Модель после подстройки К1 и К2 показана на Рисунок 7 а ее реакция на Рисунок 7.
Рисунок 7. Модель двигателя с номинальной нагрузкой с подстроенными коэффициентами K1 и K2.
Рисунок 8. Реакция модели двигателя с номинальной нагрузкой и реакция апериодического звена с постоянной времени 0,017 с. Реакции совпадают. По горизонтальной оси откладывается время в секундах, по вертикали показана скорость двигателя в об/мин.  
В разделе номинальные характеристики “Nominal characteristics” спецификации указана выходная мощность “Output power (W) “ 10 Вт и КПД “Efficiency (%)” 64%.
=63,7%
Вычисленная КПД (для Mдвиг  при токе двигателя 1А) совпадает с КПД спецификации 64%. Но в той же спецификации зависимость момента от тока “Torque constant (mNm/A)” дана как 56 мНм/А, но при токе 1А и моменте 56 мНм  КПД равен 71,3 %, а не 64%. 
4. Модель двигателя в режиме максимальной эффективности.
Расчетное КПД для этого режима
= 71,99 %
совпадает с КПД спецификации. Однако модель с настроенным параметром K2 в установившемся режиме показывает КПД 80.63%. Причины расхождения КПД на 8.6 % следующие.
1. При постоянной момента “Torque constant (mNm/A)” 56 мНм/А момент двигателя “Torque (mNm)” при токе “Absorbed current (A)” 0.6А равен 34.8 мНм, а не 30 мНм, как указано в спецификации для этого режима.
2. При противо-ЭДС равной 0.0059 В/(об./мин), номинальном напряжении 24 В и скорости вращения 3300 об./мин, ток двигателя должен быть равен 0.62 A. В спецификации значение тока для этого режима 0.6 А
Рисунок 9. Модель двигателя в режиме максимальной эффективности. 
5. Параметры раздела “General characteristics” спецификации на двигатель.
5.1. Пусковой ток “Starting current (A)”.
Пусковой ток равный
совпадает с “Starting current (A)” спецификации.
5.2. Пусковой момент “Starting torque (mNm)”
Пусковой момент 168 мНм, равный произведению  “Starting current (A)” на “Torque constant (mNm/A)” (как 3,3 (A) * 56 (мНм/А)), не соответствует моменту 190 мНм, заявленному в спецификации. 
5.3. Моменты инерции.
Зная момент инерции двигателя “Inertia (g.cm2)” 75 г см2 и коэффициент K1 модели (Рисунок 9) можно вычислить момент инерции нагрузки, обеспечивающий номинальный режим работы двигателя. Дополнительный момент инерции равен 134 г см2 показан на схеме Рисунок 10 константой 134е-7 кг м2.
Рисунок 10. Модель двигателя в номинальном режиме с моментами инерции двигателя и вычисленным моментом инерции нагрузки. 
Также можно определить величину момента инерции нагрузки, обеспечивающего режим максимальной эффективности. Дополнительный момент инерции равен 107 г см2 показан на схеме Рисунок 11 константой 107,7е-7 кг м2.
Рисунок 11. Модель двигателя в режиме максимальной эффективности с моментами инерции двигателя и вычисленным моментом инерции нагрузки. 
5.4. Максимальная выходная мощность “Max. output power (W) ”.
Чтобы определить значения переменных модели, при которых достигается максимальная выходная мощность достаточно изменять K2 модели – коэффициент пропорциональности момента сопротивления по скорости (Рисунок 12). Так, при K2 = 4.5e-5 Нм/(об/мин) достигается максимальная выходная мощность 19.94 Вт. При этом установившаяся скорость равна 2057 об/мин (34.3 об/с); ток – 1.65А; момент двигателя – 0.093 Нм;  КПД – 50.3%.  
Рисунок 12. Значения параметров модели с максимальной выходной мощностью.
Зависимость выходной мощности от скорости вращения двигателя при изменении К2 в пределах от 1e-6 до 1e-2, полученная автоматическим изменением К2 и перезапуском модели Рисунок 12, показана на Рисунок 13.
Рисунок 13. Зависимость выходной мощности двигателя от скорости вращения.  
ВЫВОДЫ
Построенная модель двигателя постоянного тока позволила найти отсутствующие в спецификации параметры, выявить несоответствия в спецификации, построить статические и динамические характеристики двигателя.  
БИБЛИОГРАФИЧЕСКИЙ СПИСОК 
1. Help MATLAB.
2.  Dr. Bob Davidov. Компьютерные технологии управления в технических системах.
  ВВЕДЕНИЕ Зачастую, документация содержит неполный список параметров, необходимых для построения компьютерных моделей процессов или объектов, параметры могут не соответствовать контрольным отношениям. В этой работе рассматриваются варианты построения динамических моделей двигателя постоянного тока по неполной спецификации и при наличии несоответствий между параметрами спецификации, также рассматривается вопрос обеспечения адекватности модели двигателя постоянного тока следующим режимам работы: без нагрузки (режим холостого хода),
с номинальной нагрузкой,
с максимальным КПД. без нагрузки (режим холостого хода), без нагрузки (режим холостого хода), с номинальной нагрузкой, с номинальной нагрузкой, с максимальным КПД. с максимальным КПД. СПЕЦИФИКАЦИЯ  Спецификация двигателя постоянного тока с номинальным напряжением питания 24 В представлена в Таблица 1. В спецификации приведены десятки параметров, которым должна соответствовать динамическая модель двигателя. Ряд параметров необходимых для моделирования не приведены, среди них: противо-ЭДС, момент сопротивления и момент инерции нагрузки. Параметры, соответствующие разным режимам работы двигателя объединены в группы No-load characteristics (режим холостого хода);
Nominal characteristics (режим номинальной нагрузки);
Maximum efficiency characteristics (максимальный КПД). No-load characteristics (режим холостого хода); No-load characteristics (режим холостого хода); Nominal characteristics (режим номинальной нагрузки); Nominal characteristics (режим номинальной нагрузки); Maximum efficiency characteristics (максимальный КПД). Maximum efficiency characteristics (максимальный КПД). Таблица 1   Ряд параметров спецификации Таблица 1 можно вычислить (проверить), используя другие параметры спецификации, например, электромагнитную постоянную времени, или пусковой момент, который равен произведению пускового тока на коэффициент пропорциональности Torque constant:  Starting torque (190 mNm) = Starting current (3.3 A) * Torque constant (56 mNm/A) = 184.5 mNm или пусковой ток, как отношение напряжение питания двигателя к сопротивлению обмотки двигателя:  ПОСТРОЕНИЕ МОДЕЛИ 1. Вычисление зависимости тока двигателя от напряжения. 1.1. Сопротивление обмотки двигателя. Сопротивление обмотки (Рисунок 1) равно сумме активного сопротивления R и реактивного сопротивления Ls, где L – индуктивность обмотки; s – оператор Лапласа.      Рисунок 1. Эквивалентная схема обмотки двигателя. Рисунок 1  По закону Ома, ток цепи I равен отношению напряжения V к суммарному сопротивлению цепи R+Ls:  Передаточная функция (ПФ) обмотки, как отношение выхода I ко входу V, равна  Эта ПФ первого порядка имеет вид апериодического звена с коэффициентом передачи 1/R и постоянной времени L/R, равной 0,82 мс вычисленному через отношение L = 6,3 мГн к  R = 7,3 Ом. Вычисленное значение соответствует электромагнитной постоянной времени “Electrical time constant (ms)” равной 0,8 мс приведенной в спецификации двигателя.    1.2.  Модель обмотки двигателя. Модель обмотки двигателя в Simulink показана на Рисунок 2.    Рисунок 2. Модель (Передаточная Функция) обмотки двигателя.   Рисунок 2 Реакция катушки на ступенчатое воздействие 24 В показана на Рисунок 3.    Рисунок 3. Реакция (изменение тока) обмотки двигателя на ступенчатое воздействие 24В. Рисунок 3 Через три постоянные времени (~2.45 мс) ток двигателя (Рисунок 3) входит в 5% зону (> 3.12 В) от установившегося значения 3.3 В. 2. Модель холостого хода.    2.1.   Противо-ЭДС. Как указано в спецификации в режиме холостого тока ток двигателя равен 0.11 А. Однако в предыдущем пункте показано, что в установившемся режиме ток двигателя равен 3.3 А при питании катушки от источника 24 В. Что же вызывает уменьшение тока до 0.11 А? Уменьшение напряжения на катушке создает противо-ЭДС это напряжение пропорционально скорости вращения двигателя. Противо-ЭДС подобна выходному напряжению вращаемого электрогенератора. По спецификации на двигатель (Таблица 1) скорость вращения “Speed (rpm)” в режиме холостого тока равна 4000 об./мин. Зависимость тока двигателя от его скорости вращения показана Рисунок 4.    Рисунок 4. Зависимость тока двигателя от скорости вращения, построена по данным спецификации Таблица 1.  Аппроксимация данных Таблица 1, показанная на Рисунок 4, дает следующее падение тока обмотки при увеличении скорости вращения двигателя при его питании номинальным напряжением 24 В. I = 3.3 - 0.809e-3 (А/(об./мин)) * Speed (об./мин), где Speed – скорость двигателя в об./мин. Следовательно отношение противо-ЭДС к скорости вращения двигателя равно 0.0059 В/(об./мин) (как 0.81e-3(А/(об./мин))* R=7.3 (Ом). Уточненное (по данным Таблица 1) отношение противо-ЭДС к скорости вращения двигателя равно o    0.0058 В/(об./мин) при скорости вращения 4000 об./мин двигателя без нагрузки (режим холостого хода), o    0.0057 В/(об./мин) при скорости вращения 2920 об./мин с номинальной нагрузкой, o    0.0059 В/(об./мин) при скорости вращения 3300 об./мин с максимальной эффективностью.  2.2.   Модель режима холостого хода и установившиеся значения ее переменных показаны на следующем рисунке.    Рисунок 5. Модель холостого тока двигателя.  3. Модель двигателя с номинальной нагрузкой.    Модель двигателя с номинальной нагрузкой показана на Рисунок 6.   Рисунок 6. Модель двигателя с номинальной нагрузкой.  В модели не определены коэффициенты передачи K1 и K2. K1 – отношение углового ускорения  двигателя к суммарному моменту сил Mдвиг-Mнагр  или  где  Jдвиг+Jнагр - суммарный момент инерции вращающихся частей двигателя Jдвиг и нагрузки Jнагр . В спецификации на двигатель (Таблица 1) приведен только момент инерции двигателя Jдвиг  “Inertia (g.cm2)”, равный 75 г см2 . 2 Коэффициент K1 получен из математического выражения, в котором угловое ускорение двигателя равно отношению суммарного момента сил Mдвиг-Mнагр к суммарному моменту инерции Jдвиг+Jнагр .  K2 – отношение момента сопротивления нагрузки к скорости вращения двигателя:  K2 тоже, как и K1, явно не приведен в спецификации на двигатель, но известна установившаяся скорость вращения двигателя с номинальной нагрузкой “Speed (rpm)” ωдвиг = 2920 об/мин и момент сил двигателя “Torque (mNm)” Mдвиг = 50 мНм. Постоянная времени двигателя с нагрузкой зависит от значения K1 и К2, но значение К2 можно вычислить как показано выше, поэтому K1 можно определить путем изменения реакции модели двигателя до совпадения (Рисунок 8) с реакцией апериодического звена с постоянной времени 0,17 мс , равной электромеханической постоянной времени “Electrical time constant (ms)” приведенной в спецификации на двигатель: Модель после подстройки К1 и К2 показана на Рисунок 7 а ее реакция на Рисунок 7.   Рисунок 7. Модель двигателя с номинальной нагрузкой с подстроенными коэффициентами K1 и K2. Рисунок 7    Рисунок 8. Реакция модели двигателя с номинальной нагрузкой и реакция апериодического звена с постоянной времени 0,017 с. Реакции совпадают. По горизонтальной оси откладывается время в секундах, по вертикали показана скорость двигателя в об/мин.   Рисунок 8 В разделе номинальные характеристики “Nominal characteristics” спецификации указана выходная мощность “Output power (W) “ 10 Вт и КПД “Efficiency (%)” 64%.    =63,7% Вычисленная КПД (для Mдвиг  при токе двигателя 1А) совпадает с КПД спецификации 64%. Но в той же спецификации зависимость момента от тока “Torque constant (mNm/A)” дана как 56 мНм/А, но при токе 1А и моменте 56 мНм  КПД равен 71,3 %, а не 64%.  4. Модель двигателя в режиме максимальной эффективности.   Расчетное КПД для этого режима  = 71,99 % совпадает с КПД спецификации. Однако модель с настроенным параметром K2 в установившемся режиме показывает КПД 80.63%. Причины расхождения КПД на 8.6 % следующие. 1. При постоянной момента “Torque constant (mNm/A)” 56 мНм/А момент двигателя “Torque (mNm)” при токе “Absorbed current (A)” 0.6А равен 34.8 мНм, а не 30 мНм, как указано в спецификации для этого режима. 2. При противо-ЭДС равной 0.0059 В/(об./мин), номинальном напряжении 24 В и скорости вращения 3300 об./мин, ток двигателя должен быть равен 0.62 A. В спецификации значение тока для этого режима 0.6 А   Рисунок 9. Модель двигателя в режиме максимальной эффективности.  Рисунок 9 5. Параметры раздела “General characteristics” спецификации на двигатель. 5.1. Пусковой ток “Starting current (A)”. Пусковой ток равный  совпадает с “Starting current (A)” спецификации. 5.2. Пусковой момент “Starting torque (mNm)” Пусковой момент 168 мНм, равный произведению  “Starting current (A)” на “Torque constant (mNm/A)” (как 3,3 (A) * 56 (мНм/А)), не соответствует моменту 190 мНм, заявленному в спецификации.  5.3. Моменты инерции. Зная момент инерции двигателя “Inertia (g.cm2)” 75 г см2 и коэффициент K1 модели (Рисунок 9) можно вычислить момент инерции нагрузки, обеспечивающий номинальный режим работы двигателя. Дополнительный момент инерции равен 134 г см2 показан на схеме Рисунок 10 константой 134е-7 кг м2. 2 2 2   Рисунок 10. Модель двигателя в номинальном режиме с моментами инерции двигателя и вычисленным моментом инерции нагрузки.  Рисунок 10]]></text>
</doc>
