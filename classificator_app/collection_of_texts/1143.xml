<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Other]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[radif_galiasfarov]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-07-21, 19:12]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/lightmap/blog/678076/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Переработали батлрояль и увеличили его онлайн в 2 раза]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Блог компании Lightmap]]></item>
		<item type="str"><![CDATA[Разработка игр]]></item>
		<item type="str"><![CDATA[Unity]]></item>
		<item type="str"><![CDATA[Дизайн игр]]></item>
		<item type="str"><![CDATA[Игры и игровые консоли]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[разработка игр]]></item>
		<item type="str"><![CDATA[геймдев]]></item>
		<item type="str"><![CDATA[gamedev]]></item>
		<item type="str"><![CDATA[battle royale]]></item>
		<item type="str"><![CDATA[геймдизайн]]></item>
		<item type="str"><![CDATA[улучшение ux]]></item>
		<item type="str"><![CDATA[батлрояль]]></item>
		<item type="str"><![CDATA[unity]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[В нашей игре режим королевской битвы появился в 2018 году, когда жанр был на пике популярности. С тех пор батлрояль успел надоесть индустрии — игроки наигрались и вернулись в привычные дезматчи с маленькими картами и быстрым респауном. А огромный режим остался.
Нам захотелось вновь подстегнуть интерес опытных игроков, а также привлечь новичков, которые раньше там долго не задерживались. В итоге с нуля пересобрали баланс, добавили расходники, ботов, туториал, а еще поработали над лутом и улучшили UI. Обо всем этом — под катом.
Про разработку батлрояля мы уже делали два материала. Если интересно, можете почитать по ссылкам ниже, но для понимания этой статьи они не понадобятся (весь нужный контекст я дам):
Как за день потерять 30% онлайна и за два месяца сделать батлрояль — техническая сторона разработки режима. Внутри про создание карты, всевозможные графические оптимизации и написание собственных инструментов.
Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера — подробно о сетевой части и различные решения по оптимизации трафика.
На пике в батлрояль ежедневно играли около 250 тысяч пользователей, но хайп утих и онлайн постепенно снизился до стабильных 20-30 тысяч игроков. Мы решили переработать режим, чтобы: 
поднять заинтересованность среди старых игроков; 
сделать режим дружелюбнее к новичкам. Игра в сторах называется Pixel Gun 3D: Shooter and Battle Royale, поэтому многие качают ее ради батлрояля, где не было обучения и некоторых стандартов индустрии.
Спойлер: после первого этапа переработки режима, онлайн вырос до 40-50 тысяч игроков.
Батлроялю нужна переработка
В основу батрояля легли наши основные наработки, механики и контент из классических игровых режимов Pixel Gun 3D — дезматча, командного боя и других. У нас шутер с динамичным геймплеем, низким TTK (time to kill — время на убийство) и быстрым респавном. Поэтому типичный игровой цикл батрояля выглядел так: 
заспавнился → поднял первую попавшуюся пушку → быстро умер → вышел в лобби
А если удалось пожить подольше, то:
побегал по карте → поискал противников → получил рандомный хэдшот из снайперки → вышел в лобби
Проще говоря, в батлрояле оставались рельсы арена-шутера — это было похоже на огромный дезматч, только без быстрых респаунов. Режиму требовался более размеренный и медлительный геймплей, примерно такой:
заспавнился → залутался → пострелял → убежал от зоны → восстановился → залутался → пострелял → убежал от зоны → восстановился → …
Этот цикл есть практически во всех батроялях.
У нас же полностью выпадал сбор лута, потому что в этом не было необходимости (достаточно найти оружие) — в режиме не было механики восстановления здоровья или брони, соотственное не было и расходников. Авторегена HP тоже не было, поэтому игроки буквально не могли хилиться. Да, вот так хардкорно.
В итоге мы поставили себе несколько задач:
Создать комфортные условия для новичков.
Сделать размеренный и более дружелюбный геймплей с большим акцентом на выживании, поиске лута и снаряжения.
Улучшать режим по мере получения новых результатов.
Туториал
Почему начали именно с туториала и ботов? Основная задумка была в том, чтобы предварительно влить в режим новую кровь, и уже с возросшей и смешанной по скиллу аудиторией начать менять привычные «правила» режима.
Раньше у нас вообще не было отдельного туториала для королевской битвы. Было общее обучение, в котором игрок знакомился с основами игры, а чуть позже ему приходило предложение поиграть в батлрояль. И это могло стать большой болью для геймера, потому что там его ждали уже опытные ребята.
Сейчас первый матч в батлрояле не кидает сразу в бой, а учит механикам и позволяет познакомиться с ними на ботах. Во-первых, игрок должен привыкнуть к стрельбе, так как в батлрояле у нас камера от третьего лица, а в остальных режимах — от первого. Во-вторых, освоить доступный арсенал и привыкнуть к поведению зоны. Крайне желательно, чтобы его не убивали во время обучения — нельзя вызывать негатив с первых минут игры в новом режиме.
Туториал для новичков
Спустя несколько таких калибровочных матчей против ботов, игрок попадает в бой с живыми игроками.

Важный момент: туториал принудительный, его нельзя пропустить. Такая специфика мобильных игр. Да, если ты опытный игрок, то это раздражает, но новичкам такая инструкция сильно помогает. Без нее он может просто не разобраться и уйти навсегда. К тому же, в Pixel Gun 3D уйма режимов, и нам неизвестно на 100%, ради чего именно игрок пришел в проект. Поэтому в любом случае необходимо оставить лишь положительные впечатления.
Боты
Боты, созданные для туториала, стали хорошим дополнением в живых матчах. Разумеется, они включены не всегда, а только в тех случаях, когда онлайн по естественным причинами падает (игроками ведь тоже нужно спать). К тому же, мы уже успешно обкатали ботов в классических режимах, так что не было причин не попробовать их в батлрояле.
В королевской битве у нас две карты — большая на 100 игроков и маленькая на 20 игроков. 
Маленькая карта составляет примерно ⅓ от большой
Проблема с онлайном возникала именно на большой карте размером 2×2 километра, которая:
сразу отсеивает игроков со слабыми девайсами (подробнее о ее разработке писали здесь);
и требует минимум 40 игроков для запуска матча.
В конце концов, гораздо приятнее не висеть в лобби, а сразу ворваться в матч, пусть и с виртуальными противниками. Тем более, что по задумке боты развлекают игроков только на ранних этапах матча (когда игроки максимально рассредоточены по карте), а затем по мере сужения зоны, удаляются из игры.
При реализации ботов предстояло решить несколько проблем:
Поведение ботов.
Добавление и удаление ботов.
Симуляция «живого» поведения в логе.
Имитация высадки.
С поведением ботов все прошло почти гладко, потому что брали уже готовое решение из основных режимов игры (о нем мы подробно рассказывали в этом материале). Но небольшая проблема с навигацией из-за масштабов карты все же возникла. Ее решили весьма кардинальным способом. 
Он заключался в том, что боты появлялись, словно случайно встреченный игрок. Они могли выглянуть из-за угла, появиться из-за холма или выйти из здания. Как Плотва, которая прибегает откуда-то по свисту Геральта. Соответственно боты действуют только в ограниченной области, а не на всей огромной карте. Если же игрок столкнулся с ботом и решил убежать, то бот преследует его в ограниченной зоне, а затем незаметно удаляется. Для игрока это выглядит так, будто противник ушел в другом направлении или отстал.
Но одного поведения ботов перед глазами игрока недостаточно, потому что в режиме всегда есть лог, который показывает, что происходит на всей карте. Для этого мы реализовали фейковые уведомления, которые создают иллюзию, что идет ожесточенный бой. А недобитые боты (которые были удалены игрой) подчищаются в логе как погибшие за пределами зоны.
Лог с кикнутым ботом
Одной из главных проблем стала высадка ботов — они просто не умеют прыгать из самолета. Написание такой логики заняло бы слишком много времени (как и логики сбора лута — боты лишь изображают активность, а все снаряжение у них уже есть). Поэтому мы решили превратить высадку в «полет визуальных эффектов», чтобы игроки видели множество летящих противников. А если игрок попытается высадиться рядом с «ботом», то последний улетит от него подальше. Так не рушится магия мультиплеера.
Баланс
TTK и темп
Нам хотелось получить совершенно иной опыт игры в батлрояль, поэтому решили балансировать весь режим с чистого листа. Для геймплейного ритма королевской битвы нужно избавиться от всего, что движется в темпе дезматча. Но заранее приготовиться к возможному негативу со стороны привыкших игроков.
В Pixel Gun 3D огромное разнообразие оружия с множеством уникальных механик и свойств. Именно поэтому мы выкинули все пушки, для освоения и понимания которых требовалось бы больше 3 секунд. 
Когда оружие лежит на земле, то игрок одним взглядом должен понимать, автомат это, дробовик, снайперка или что-то еще. Нельзя заставлять его долго задумываться о дополнительных свойствах и механиках, ведь в батлрояле правят случай и удача. Никто не даст лишнего времени, чтобы разобраться как работает то или иное оружие.
Далее предстояло увеличить TTK, для этого пересмотрели параметры игроков. Раньше персонажи высаживались со 100 HP, затем подбирали еще 100 брони — это был неконтролируемый процесс. Сейчас же игрок высаживается со 100 брони и 50 HP, и у него сразу есть мотивация найти бронепластину и отхилиться.
В итоге время жизни игрока увеличилось, исчезли постоянные ваншоты, режим стал дружелюбнее к новичкам. Кроме того, TTK дал более ощутимую разницу между пушками (теперь сразу чувствуется отличие между мифической и редкой рарностью). Ветеран сможет взять редкую пушку и сделать 4 хэдшота, а менее опытный игрок с крутой снайперкой попробует уравнять шансы в скилле, компенсируя разницу рарностью оружия.
Зона
Также мы изменили поведение зоны, теперь она не представляет большой опасности до финальных кругов, а просто подстегивает игрока. 
Если раньше игрок высаживался за пределами, то сразу бежал в круг. Плевать на лут и перестрелки — если зона его догоняла, то шансов выжить не было. А догоняла она практически всегда, так как скорость сужения была выше, чем скорость бега персонажей, плюс наносила много урона. Как итог — после первого круга она косила 50% игроков.
Сейчас внесли корректировки: уменьшили урон и скорость сужения. Теперь игрок может выбежать из зоны и даже постреляться за ее пределами.
Сам принцип рандомного сужения зоны трогать не стали — о том, как он реализован, можно прочитать в этой статье.
Расходники
Раньше расходников для восстановления HP не было вообще, даже автореген отсутствовал. Цикл не работал. Иногда на карте рандомно спавнились бонусы, которые восстанавливали здоровье, но игроки не знали точных мест появления бонусов и не могли вокруг этого строить стратегии на матч. На большой карте шансы вообще стремились к нулю. 
Теперь отдельными слотами появились аптечки и бронепластины, которые позволяют выбраться практически из любой передряги. Увеличилось время сессии, напряжение и интерес на поздних кругах матча, потому что игроков стало выживать гораздо больше.
Так выглядит аптечка
Лут
Список оружия
Сократили список доступных пушек в батлрояле. Сейчас их 21, раньше было около 50 — убрали сложные.
Решили упростить понимание и ознакомление с оружием. Оружие также делится по категориям: редкое, эпическое, легендарное, мифическое. Зато теперь их различия можно понять не только по цвету редкости, но и по дизайну оружия. Те, что попроще — редкие; эпические — посложнее визуально; и так далее. 
Снайперка раньше (слева), снайперка сейчас (справа)
Также все оружие имеет понятный дизайн, никаких больше абстрактных вундервафель (разве что пистолет-присоска осталась для механики крюка-кошки). Не особо-то приятно тратить один патрон, особенно если их всего 4, чтобы понять как оружие стреляет.

Еще мы убрали категорию специального оружия. Туда входили, например, огнеметы, которые на таких масштабах были фактически бесполезны.
Распределение лута
Раньше лут спавнили хаотично по всей карте, сейчас делаем это по определенной системе. 
Всю карту разделили на зоны интереса, каждую из которых наполнили разным лутом. Например, если высаживаешься в «Госпиталь», то там больше легендарного лута, однако и сама локация представляет из себя арену для мясорубки. Но можно высадиться более сейвово и слегка подальше от «Госпиталя», собрать обычный лут и ждать выживших, что будут покидать локацию. 
И так со всеми локациями. Где дизайн точек подстегивает к ожесточенным боям, там больше и круче лут, а если это глушь на окраине карты, то придется довольствоваться базовым набором оружия.
Также мы насытили локации, которые уже популярные, но с небольшими изменениями. Локация «Разбитый Хеликейр» привлекал игроков как место стычки, а теперь еще и как место крутого лута. Но зачем наполнять локации лутом, которые и так популярны среди игроков? Не лучше разместить его в менее популярных местах, чтобы пользователи изучали другие локации? Не лучше. Все просто: в непопулярных точках играть неинтересно. Если разместить там много крутого лута, то мы создадим ситуацию, которая будет побуждать геймплей без фана.
Также мы решили попробовать реализовать дополнительные сценарии. «Хеликейр» вертикальная локация, поэтому наверх мы поставили ящики с простым лутом, а вниз — ящики с легендарным лутом. Игрок может получить обычную пушку, зато получит преимущество в виде хайграунда, или пойти вниз за крутым шмотом, но больше рисковать.
Основной подход в том, что некоторые точки после нескольких высадок становятся примерно понятными, куда бежать и где что лежит. Например, в «Аэропорту» внутри самолета гарантировано есть синий лут. Можно бежать в ангары и собирать обычные пушки, а можно взять сразу легендарную, но и быть убитым, потому что самолет — опасное место.
Это только первый шаг по работе с данной концепцией. Нам предстоит еще немало работы, будем править, тестить. Карты большие и требуют много времени.
Выпадение лута
Раньше из одного ящика выпадало одно оружие и ничего больше. Сейчас каждый ящик имеет свой цвет и сценарий:
серый ящик — обычное оружие и небольшой шанс получить что-то получше;
синий ящик — редкое оружие и расходники (патроны, аптечки, бронепластины);
золотой ящик — легендарное оружие и больше расходников;
ящик с гаджетами — гранаты, «молотовы», мины, портативные турели;
эйрдроп — мифическое оружие (добыть его можно только тут).
Есть, например, легендарная снайперка, которая убивает за три попадания, а в эйрдропе можно найти такую пушку, которая будет выносить за один хэдшот. Словом, в эйрдропе лежит мощное оружие, которое больше нигде не найти, как и патроны к нему.
Видимость лута и механики подъема
Немного прошлись по UI, чтобы дать еще больше комфорта игрокам.
Например, улучшили визуальную индикацию ящиков — добавили свечение, дополнительную анимацию, изменили скорость вращения. Теперь их проще найти. 
Индикация ящиков
Также сделали поднятие оружия через отдельный поп-ап. Он отображает лут в правильно порядке по рарности предметов, а еще отображает сравнение характеристик с текущим оружием. Игра говорит через UI, что у пушки, например, урон больше, но скорострельность ниже, и игрок знает, что ожидать.
Поп-ап с характеристикам оружия
Вместо заключения
Изначальную задачу увеличить онлайн в батлрояле мы выполнили. Например, если раньше новичок играл повторный матч с шансом 15%, то теперь — с шансом 30%. Изменения хорошо себя показали на новых игроках, но с ветеранами высоких уровней еще предстоит поработать, там изменения менее выраженные. Но режим уже стал более привлекательным и реиграбельным, поэтому будем дальше смотреть аналитику и вносить изменения.   В нашей игре режим королевской битвы появился в 2018 году, когда жанр был на пике популярности. С тех пор батлрояль успел надоесть индустрии — игроки наигрались и вернулись в привычные дезматчи с маленькими картами и быстрым респауном. А огромный режим остался. Нам захотелось вновь подстегнуть интерес опытных игроков, а также привлечь новичков, которые раньше там долго не задерживались. В итоге с нуля пересобрали баланс, добавили расходники, ботов, туториал, а еще поработали над лутом и улучшили UI. Обо всем этом — под катом. Про разработку батлрояля мы уже делали два материала. Если интересно, можете почитать по ссылкам ниже, но для понимания этой статьи они не понадобятся (весь нужный контекст я дам): Как за день потерять 30% онлайна и за два месяца сделать батлрояль — техническая сторона разработки режима. Внутри про создание карты, всевозможные графические оптимизации и написание собственных инструментов.
Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера — подробно о сетевой части и различные решения по оптимизации трафика. Как за день потерять 30% онлайна и за два месяца сделать батлрояль — техническая сторона разработки режима. Внутри про создание карты, всевозможные графические оптимизации и написание собственных инструментов. Как за день потерять 30% онлайна и за два месяца сделать батлрояль — техническая сторона разработки режима. Внутри про создание карты, всевозможные графические оптимизации и написание собственных инструментов. Как за день потерять 30% онлайна и за два месяца сделать батлрояль Как за день потерять 30% онлайна и за два месяца сделать батлрояль Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера — подробно о сетевой части и различные решения по оптимизации трафика. Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера — подробно о сетевой части и различные решения по оптимизации трафика. Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера Батлрояль за 2 месяца: как мы обновили сетевой код и на 20% сократили траты на сервера На пике в батлрояль ежедневно играли около 250 тысяч пользователей, но хайп утих и онлайн постепенно снизился до стабильных 20-30 тысяч игроков. Мы решили переработать режим, чтобы:  поднять заинтересованность среди старых игроков; 
сделать режим дружелюбнее к новичкам. Игра в сторах называется Pixel Gun 3D: Shooter and Battle Royale, поэтому многие качают ее ради батлрояля, где не было обучения и некоторых стандартов индустрии. поднять заинтересованность среди старых игроков;  поднять заинтересованность среди старых игроков;  сделать режим дружелюбнее к новичкам. Игра в сторах называется Pixel Gun 3D: Shooter and Battle Royale, поэтому многие качают ее ради батлрояля, где не было обучения и некоторых стандартов индустрии. сделать режим дружелюбнее к новичкам. Игра в сторах называется Pixel Gun 3D: Shooter and Battle Royale, поэтому многие качают ее ради батлрояля, где не было обучения и некоторых стандартов индустрии. Спойлер: после первого этапа переработки режима, онлайн вырос до 40-50 тысяч игроков. Батлроялю нужна переработка В основу батрояля легли наши основные наработки, механики и контент из классических игровых режимов Pixel Gun 3D — дезматча, командного боя и других. У нас шутер с динамичным геймплеем, низким TTK (time to kill — время на убийство) и быстрым респавном. Поэтому типичный игровой цикл батрояля выглядел так:  заспавнился → поднял первую попавшуюся пушку → быстро умер → вышел в лобби заспавнился → поднял первую попавшуюся пушку → быстро умер → вышел в лобби заспавнился → поднял первую попавшуюся пушку → быстро умер → вышел в лобби А если удалось пожить подольше, то: побегал по карте → поискал противников → получил рандомный хэдшот из снайперки → вышел в лобби побегал по карте → поискал противников → получил рандомный хэдшот из снайперки → вышел в лобби побегал по карте → поискал противников → получил рандомный хэдшот из снайперки → вышел в лобби Проще говоря, в батлрояле оставались рельсы арена-шутера — это было похоже на огромный дезматч, только без быстрых респаунов. Режиму требовался более размеренный и медлительный геймплей, примерно такой: заспавнился → залутался → пострелял → убежал от зоны → восстановился → залутался → пострелял → убежал от зоны → восстановился → … заспавнился → залутался → пострелял → убежал от зоны → восстановился → залутался → пострелял → убежал от зоны → восстановился → … заспавнился → залутался → пострелял → убежал от зоны → восстановился → залутался → пострелял → убежал от зоны → восстановился → … Этот цикл есть практически во всех батроялях. У нас же полностью выпадал сбор лута, потому что в этом не было необходимости (достаточно найти оружие) — в режиме не было механики восстановления здоровья или брони, соотственное не было и расходников. Авторегена HP тоже не было, поэтому игроки буквально не могли хилиться. Да, вот так хардкорно. В итоге мы поставили себе несколько задач: В итоге мы поставили себе несколько задач: Создать комфортные условия для новичков.
Сделать размеренный и более дружелюбный геймплей с большим акцентом на выживании, поиске лута и снаряжения.
Улучшать режим по мере получения новых результатов. Создать комфортные условия для новичков. Создать комфортные условия для новичков. Сделать размеренный и более дружелюбный геймплей с большим акцентом на выживании, поиске лута и снаряжения. Сделать размеренный и более дружелюбный геймплей с большим акцентом на выживании, поиске лута и снаряжения. Улучшать режим по мере получения новых результатов. Улучшать режим по мере получения новых результатов. Туториал Почему начали именно с туториала и ботов? Основная задумка была в том, чтобы предварительно влить в режим новую кровь, и уже с возросшей и смешанной по скиллу аудиторией начать менять привычные «правила» режима. Раньше у нас вообще не было отдельного туториала для королевской битвы. Было общее обучение, в котором игрок знакомился с основами игры, а чуть позже ему приходило предложение поиграть в батлрояль. И это могло стать большой болью для геймера, потому что там его ждали уже опытные ребята. Сейчас первый матч в батлрояле не кидает сразу в бой, а учит механикам и позволяет познакомиться с ними на ботах. Во-первых, игрок должен привыкнуть к стрельбе, так как в батлрояле у нас камера от третьего лица, а в остальных режимах — от первого. Во-вторых, освоить доступный арсенал и привыкнуть к поведению зоны. Крайне желательно, чтобы его не убивали во время обучения — нельзя вызывать негатив с первых минут игры в новом режиме.  Туториал для новичков Спустя несколько таких калибровочных матчей против ботов, игрок попадает в бой с живыми игроками.

Важный момент: туториал принудительный, его нельзя пропустить. Такая специфика мобильных игр. Да, если ты опытный игрок, то это раздражает, но новичкам такая инструкция сильно помогает. Без нее он может просто не разобраться и уйти навсегда. К тому же, в Pixel Gun 3D уйма режимов, и нам неизвестно на 100%, ради чего именно игрок пришел в проект. Поэтому в любом случае необходимо оставить лишь положительные впечатления.   Боты Боты, созданные для туториала, стали хорошим дополнением в живых матчах. Разумеется, они включены не всегда, а только в тех случаях, когда онлайн по естественным причинами падает (игроками ведь тоже нужно спать). К тому же, мы уже успешно обкатали ботов в классических режимах, так что не было причин не попробовать их в батлрояле. В королевской битве у нас две карты — большая на 100 игроков и маленькая на 20 игроков.   Маленькая карта составляет примерно ⅓ от большой Проблема с онлайном возникала именно на большой карте размером 2×2 километра, которая: сразу отсеивает игроков со слабыми девайсами (подробнее о ее разработке писали здесь);
и требует минимум 40 игроков для запуска матча. сразу отсеивает игроков со слабыми девайсами (подробнее о ее разработке писали здесь); сразу отсеивает игроков со слабыми девайсами (подробнее о ее разработке писали здесь); здесь здесь и требует минимум 40 игроков для запуска матча. и требует минимум 40 игроков для запуска матча. В конце концов, гораздо приятнее не висеть в лобби, а сразу ворваться в матч, пусть и с виртуальными противниками. Тем более, что по задумке боты развлекают игроков только на ранних этапах матча (когда игроки максимально рассредоточены по карте), а затем по мере сужения зоны, удаляются из игры. При реализации ботов предстояло решить несколько проблем: Поведение ботов.
Добавление и удаление ботов.
Симуляция «живого» поведения в логе.
Имитация высадки. Поведение ботов. Поведение ботов. Добавление и удаление ботов. Добавление и удаление ботов. Симуляция «живого» поведения в логе. Симуляция «живого» поведения в логе. Имитация высадки. Имитация высадки. С поведением ботов все прошло почти гладко, потому что брали уже готовое решение из основных режимов игры (о нем мы подробно рассказывали в этом материале). Но небольшая проблема с навигацией из-за масштабов карты все же возникла. Ее решили весьма кардинальным способом.  этом этом Он заключался в том, что боты появлялись, словно случайно встреченный игрок. Они могли выглянуть из-за угла, появиться из-за холма или выйти из здания. Как Плотва, которая прибегает откуда-то по свисту Геральта. Соответственно боты действуют только в ограниченной области, а не на всей огромной карте. Если же игрок столкнулся с ботом и решил убежать, то бот преследует его в ограниченной зоне, а затем незаметно удаляется. Для игрока это выглядит так, будто противник ушел в другом направлении или отстал. Но одного поведения ботов перед глазами игрока недостаточно, потому что в режиме всегда есть лог, который показывает, что происходит на всей карте. Для этого мы реализовали фейковые уведомления, которые создают иллюзию, что идет ожесточенный бой. А недобитые боты (которые были удалены игрой) подчищаются в логе как погибшие за пределами зоны. Лог с кикнутым ботом  Лог с кикнутым ботом Одной из главных проблем стала высадка ботов — они просто не умеют прыгать из самолета. Написание такой логики заняло бы слишком много времени (как и логики сбора лута — боты лишь изображают активность, а все снаряжение у них уже есть). Поэтому мы решили превратить высадку в «полет визуальных эффектов», чтобы игроки видели множество летящих противников. А если игрок попытается высадиться рядом с «ботом», то последний улетит от него подальше. Так не рушится магия мультиплеера. Баланс TTK и темп Нам хотелось получить совершенно иной опыт игры в батлрояль, поэтому решили балансировать весь режим с чистого листа. Для геймплейного ритма королевской битвы нужно избавиться от всего, что движется в темпе дезматча. Но заранее приготовиться к возможному негативу со стороны привыкших игроков. В Pixel Gun 3D огромное разнообразие оружия с множеством уникальных механик и свойств. Именно поэтому мы выкинули все пушки, для освоения и понимания которых требовалось бы больше 3 секунд.  Когда оружие лежит на земле, то игрок одним взглядом должен понимать, автомат это, дробовик, снайперка или что-то еще. Нельзя заставлять его долго задумываться о дополнительных свойствах и механиках, ведь в батлрояле правят случай и удача. Никто не даст лишнего времени, чтобы разобраться как работает то или иное оружие. Далее предстояло увеличить TTK, для этого пересмотрели параметры игроков. Раньше персонажи высаживались со 100 HP, затем подбирали еще 100 брони — это был неконтролируемый процесс. Сейчас же игрок высаживается со 100 брони и 50 HP, и у него сразу есть мотивация найти бронепластину и отхилиться. В итоге время жизни игрока увеличилось, исчезли постоянные ваншоты, режим стал дружелюбнее к новичкам. Кроме того, TTK дал более ощутимую разницу между пушками (теперь сразу чувствуется отличие между мифической и редкой рарностью). Ветеран сможет взять редкую пушку и сделать 4 хэдшота, а менее опытный игрок с крутой снайперкой попробует уравнять шансы в скилле, компенсируя разницу рарностью оружия. Зона Также мы изменили поведение зоны, теперь она не представляет большой опасности до финальных кругов, а просто подстегивает игрока.  Если раньше игрок высаживался за пределами, то сразу бежал в круг. Плевать на лут и перестрелки — если зона его догоняла, то шансов выжить не было. А догоняла она практически всегда, так как скорость сужения была выше, чем скорость бега персонажей, плюс наносила много урона. Как итог — после первого круга она косила 50% игроков. Сейчас внесли корректировки: уменьшили урон и скорость сужения. Теперь игрок может выбежать из зоны и даже постреляться за ее пределами. Сам принцип рандомного сужения зоны трогать не стали — о том, как он реализован, можно прочитать в этой статье. этой этой Расходники Раньше расходников для восстановления HP не было вообще, даже автореген отсутствовал. Цикл не работал. Иногда на карте рандомно спавнились бонусы, которые восстанавливали здоровье, но игроки не знали точных мест появления бонусов и не могли вокруг этого строить стратегии на матч. На большой карте шансы вообще стремились к нулю.  Теперь отдельными слотами появились аптечки и бронепластины, которые позволяют выбраться практически из любой передряги. Увеличилось время сессии, напряжение и интерес на поздних кругах матча, потому что игроков стало выживать гораздо больше.  Так выглядит аптечка Лут Список оружия Сократили список доступных пушек в батлрояле. Сейчас их 21, раньше было около 50 — убрали сложные. Решили упростить понимание и ознакомление с оружием. Оружие также делится по категориям: редкое, эпическое, легендарное, мифическое. Зато теперь их различия можно понять не только по цвету редкости, но и по дизайну оружия. Те, что попроще — редкие; эпические — посложнее визуально; и так далее.   Снайперка раньше (слева), снайперка сейчас (справа) Также все оружие имеет понятный дизайн, никаких больше абстрактных вундервафель (разве что пистолет-присоска осталась для механики крюка-кошки). Не особо-то приятно тратить один патрон, особенно если их всего 4, чтобы понять как оружие стреляет.

Еще мы убрали категорию специального оружия. Туда входили, например, огнеметы, которые на таких масштабах были фактически бесполезны.   Распределение лута Раньше лут спавнили хаотично по всей карте, сейчас делаем это по определенной системе.  Всю карту разделили на зоны интереса, каждую из которых наполнили разным лутом. Например, если высаживаешься в «Госпиталь», то там больше легендарного лута, однако и сама локация представляет из себя арену для мясорубки. Но можно высадиться более сейвово и слегка подальше от «Госпиталя», собрать обычный лут и ждать выживших, что будут покидать локацию.  И так со всеми локациями. Где дизайн точек подстегивает к ожесточенным боям, там больше и круче лут, а если это глушь на окраине карты, то придется довольствоваться базовым набором оружия. Также мы насытили локации, которые уже популярные, но с небольшими изменениями. Локация «Разбитый Хеликейр» привлекал игроков как место стычки, а теперь еще и как место крутого лута. Но зачем наполнять локации лутом, которые и так популярны среди игроков? Не лучше разместить его в менее популярных местах, чтобы пользователи изучали другие локации? Не лучше. Все просто: в непопулярных точках играть неинтересно. Если разместить там много крутого лута, то мы создадим ситуацию, которая будет побуждать геймплей без фана. Также мы решили попробовать реализовать дополнительные сценарии. «Хеликейр» вертикальная локация, поэтому наверх мы поставили ящики с простым лутом, а вниз — ящики с легендарным лутом. Игрок может получить обычную пушку, зато получит преимущество в виде хайграунда, или пойти вниз за крутым шмотом, но больше рисковать. Основной подход в том, что некоторые точки после нескольких высадок становятся примерно понятными, куда бежать и где что лежит. Например, в «Аэропорту» внутри самолета гарантировано есть синий лут. Можно бежать в ангары и собирать обычные пушки, а можно взять сразу легендарную, но и быть убитым, потому что самолет — опасное место. Это только первый шаг по работе с данной концепцией. Нам предстоит еще немало работы, будем править, тестить. Карты большие и требуют много времени. Выпадение лута Раньше из одного ящика выпадало одно оружие и ничего больше. Сейчас каждый ящик имеет свой цвет и сценарий:   серый ящик — обычное оружие и небольшой шанс получить что-то получше;
синий ящик — редкое оружие и расходники (патроны, аптечки, бронепластины);
золотой ящик — легендарное оружие и больше расходников;
ящик с гаджетами — гранаты, «молотовы», мины, портативные турели;
эйрдроп — мифическое оружие (добыть его можно только тут). серый ящик — обычное оружие и небольшой шанс получить что-то получше; серый ящик — обычное оружие и небольшой шанс получить что-то получше; синий ящик — редкое оружие и расходники (патроны, аптечки, бронепластины); синий ящик — редкое оружие и расходники (патроны, аптечки, бронепластины); золотой ящик — легендарное оружие и больше расходников; золотой ящик — легендарное оружие и больше расходников; ящик с гаджетами — гранаты, «молотовы», мины, портативные турели; ящик с гаджетами — гранаты, «молотовы», мины, портативные турели; эйрдроп — мифическое оружие (добыть его можно только тут). эйрдроп — мифическое оружие (добыть его можно только тут). Есть, например, легендарная снайперка, которая убивает за три попадания, а в эйрдропе можно найти такую пушку, которая будет выносить за один хэдшот. Словом, в эйрдропе лежит мощное оружие, которое больше нигде не найти, как и патроны к нему. Видимость лута и механики подъема Немного прошлись по UI, чтобы дать еще больше комфорта игрокам. Например, улучшили визуальную индикацию ящиков — добавили свечение, дополнительную анимацию, изменили скорость вращения. Теперь их проще найти.   Индикация ящиков Также сделали поднятие оружия через отдельный поп-ап. Он отображает лут в правильно порядке по рарности предметов, а еще отображает сравнение характеристик с текущим оружием. Игра говорит через UI, что у пушки, например, урон больше, но скорострельность ниже, и игрок знает, что ожидать.  Поп-ап с характеристикам оружия Вместо заключения Изначальную задачу увеличить онлайн в батлрояле мы выполнили. Например, если раньше новичок играл повторный матч с шансом 15%, то теперь — с шансом 30%. Изменения хорошо себя показали на новых игроках, но с ветеранами высоких уровней еще предстоит поработать, там изменения менее выраженные. Но режим уже стал более привлекательным и реиграбельным, поэтому будем дальше смотреть аналитику и вносить изменения. ]]></text>
</doc>
