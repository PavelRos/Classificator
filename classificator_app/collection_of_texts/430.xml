<?xml version="1.0" ?>
<doc>
	<original_author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Jason Brownlee]]></item>
	</original_author>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[mr-pickles]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-05, 11:55]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/wunderfund/blog/702484/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–¥—É–ª—é asyncio –≤ Python. –ß–∞—Å—Ç—å 3]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[–ë–ª–æ–≥ –∫–æ–º–ø–∞–Ω–∏–∏ Wunder Fund]]></item>
		<item type="str"><![CDATA[Python]]></item>
		<item type="str"><![CDATA[–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Python]]></item>
		<item type="str"><![CDATA[—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞]]></item>
		<item type="str"><![CDATA[asyncio]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[–°–µ–≥–æ–¥–Ω—è –ø—É–±–ª–∏–∫—É–µ–º —Ç—Ä–µ—Ç—å—é —á–∞—Å—Ç—å (–ø–µ—Ä–≤–∞—è, –≤—Ç–æ—Ä–∞—è) –ø–µ—Ä–µ–≤–æ–¥–∞ —É—á–µ–±–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –º–æ–¥—É–ª—é asyncio –≤ Python. –ó–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ ‚Ññ5, 6 –∏ 7.
5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω
–í Python-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî —Ç–∞–∫ –∂–µ, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–æ–≤—ã–µ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã (—Ñ—É–Ω–∫—Ü–∏–∏).
–§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã.
–ú–æ–¥—É–ª—å asyncio –¥–∞—ë—Ç –Ω–∞–º —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω.
5.1. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É
–ö–æ—Ä—É—Ç–∏–Ω—É –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def.
–≠—Ç–æ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è def, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º.
–û–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã.
–ù–∞–ø—Ä–∏–º–µ—Ä:
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # ...
–ö–æ—Ä—É—Ç–∏–Ω—É, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Å –ø–æ–º–æ—â—å—é async def, –Ω–∞–∑—ã–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–µ–π –∫–æ—Ä—É—Ç–∏–Ω—ã.
–§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø–æ–ª—å–∑—É—è—Å—å –∫–æ–º–∞–Ω–¥–æ–π async def, –æ–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ await, async for –∏ async with.
Python glossary
–ó–∞—Ç–µ–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω, —Ç–∞–∫–∏–µ, –∫–∞–∫ await, async for –∏ async with.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö. –í—ã—Ä–∞–∂–µ–Ω–∏—è await, async for –∏ async with –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã.
Coroutine function definition
–ù–∞–ø—Ä–∏–º–µ—Ä:
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
5.2. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É
–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –µ—ë –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å.
–í—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –∫–∞–∫ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro()
–í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∫–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è.
–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã.
–§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω—ã; —Ç–æ—á–Ω–µ–µ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–¥–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ —Ö–æ–¥–µ —Ç–∞–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ª–∏—à—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã.
Python in a Nutshell, 2017, —Å. 516
–£ Python-–æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã ‚Äî —Ç–∞–∫–∏–µ, –∫–∞–∫ send() –∏ close(). –û–Ω –∏–º–µ–µ—Ç —Ç–∏–ø coroutine.
–ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ, —Å–æ–∑–¥–∞–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –≤—ã–≤–µ–¥—è —Å–≤–µ–¥–µ–Ω–∏—è –æ –µ–≥–æ —Ç–∏–ø–µ, –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Python-—Ñ—É–Ω–∫—Ü–∏–µ–π type():
# SuperFastPython.com
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
 
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro()
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
print(type(coro))
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–≤–æ–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É coroutine.
–ù–∞–º, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–æ–æ–±—â–∞—é—Ç –æ–± –æ—à–∏–±–∫–µ RuntimeError, —Ç–∞–∫ –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å. –ú—ã –∏—Å—Å–ª–µ–¥—É–µ–º —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.
<class 'coroutine'>
sys:1: RuntimeWarning: coroutine 'custom_coro' was never awaited
–û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ.
–≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç Python-—Ç–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –º–µ—Ç–æ–¥ await().
–û–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ç–æ–¥ await(). –û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ.
Awaitable objects
–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–± –æ–±—ä–µ–∫—Ç–∞—Ö, –¥–æ–ø—É—Å–∫–∞—é—â–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–µ, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å.
5.3. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –∏–∑ Python-–∫–æ–¥–∞
–ö–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ –æ–±—ã—á–Ω–æ–º Python-–∫–æ–¥–µ, –Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π.
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –±–∞–∑–∞ –ª—é–±–æ–≥–æ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–ª–ª–±—ç–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã.
Event Loop
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –∫–æ—Ä—É—Ç–∏–Ω—ã, –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç —Ä–∞–±–æ—Ç—É –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–π –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏.
–ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ª–∏—à—å —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π.
Python in a Nutshell, 2017, —Å. 517
–¢–∏–ø–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.run().
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–Ω—É –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –µ–π –∫–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö.
–ù–∞–ø—Ä–∏–º–µ—Ä:
# SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
import asyncio
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# –≥–ª–∞–≤–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞
async def main():
    # –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—à–µ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await custom_coro()
 
# –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö
asyncio.run(main())
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –∑–Ω–∞–µ–º –æ —Ç–æ–º, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî –ø–æ–±–ª–∏–∂–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π.
6. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ –ø—Ä–æ–≥—Ä–∞–º–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ asyncio.
–í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π.
6.1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ.
Asyncio ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –º–∞–Ω–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª.
Python Concurrency with asyncio, 2022, —Å. 3
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–µ–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã.
–û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á. –í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–±—ç–∫–æ–≤.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
¬´–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–ª –≤–µ—Å—å–º–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –≤ –Ω–∞—à–∏ –¥–Ω–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ JavaScript.
–í JavaScript –∏–º–µ–µ—Ç—Å—è –º–æ–¥–µ–ª—å —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, –∑–∞ —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å. –≠—Ç–∞ –º–æ–¥–µ–ª—å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–æ–¥–µ–ª–µ–π –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ C –∏ Java.
The event loop, Mozilla
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è, —ç—Ç–æ ‚Äî —Ü–∏–∫–ª. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á (–∫–æ—Ä—É—Ç–∏–Ω) –∏ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å–≤–æ–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏. –û–Ω, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏ ‚Äî –Ω–∞–ø–æ–¥–æ–±–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–ª–ª–±—ç–∫–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞.
–ú–æ–¥—É–ª—å asyncio –¥–∞—ë—Ç –Ω–∞–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º.
–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ç–∏–ø–∏—á–Ω—ã—Ö Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ.
–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç—É–ø –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –Ω–∞—Ü–µ–ª–µ–Ω –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –Ω–∞ —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ –±–∞–∑–µ –º–æ–¥—É–ª—è asyncio –∏–ª–∏ —Ö–æ—á–µ—Ç –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å asyncio –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–≤–æ–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio, —Ç–∞–∫–∏–µ, –∫–∞–∫ asyncio.run(). –£ –Ω–∏—Ö —Ä–µ–¥–∫–æ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ –∏–ª–∏ –≤—ã–∑–æ–≤ –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤.
Event Loop
–ú–æ–¥—É–ª—å asyncio –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –æ–±—ä–µ–∫—Ç—É —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ç–∞–∫ –∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π.
–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –¥–æ–ø–æ–ª–Ω—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ asyncio –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –≤ —Å–≤–æ–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.
–û–±—ã—á–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ä–µ–¥–∫–æ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ asyncio. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–∏–º–µ–Ω—è—é—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –º–æ–¥—É–ª—è.
–ù–æ, –∫–∞–∫ –±—ã —Ç–æ –Ω–∏ –±—ã–ª–æ, –º—ã –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ–º –∫—Ä–∞—Ç–∫–æ –æ–±—Å—É–¥–∏—Ç—å –≤–æ–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π.
6.2. –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –µ–≥–æ –æ–±—ä–µ–∫—Ç
–û–±—ã—á–Ω–æ –≤ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã —Ü–∏–∫–ª–æ–≤ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—É—á–∞—é—Ç, –≤—ã–∑—ã–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é asyncio.run().
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤ –∫–æ–Ω—Ü–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –µ–≥–æ —Ä–∞–±–æ—Ç—É. –ï—ë —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º, –≤ –∏–¥–µ–∞–ª–µ –µ—ë –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –ª–∏—à—å –æ–¥–∏–Ω —Ä–∞–∑.
Asyncio Coroutines and Tasks
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ—ë –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –µ—ë —Ä–∞–±–æ—Ç—ã.
–û–±—ã—á–Ω–æ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –≥–ª–∞–≤–Ω—É—é –∫–æ—Ä—É—Ç–∏–Ω—É, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã.
–°—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º.
–§—É–Ω–∫—Ü–∏—è asyncio.new_event_loop() —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ.
–°–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π.
Event Loop
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop()
–ú–æ–∂–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –≤—Å—ë –Ω–∞ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ.
–ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ —Å–æ–æ–±—â–∞–µ–º —Å–≤–µ–¥–µ–Ω–∏—è –æ –Ω—ë–º.
# SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
import asyncio
 
# —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop()
# —Å–æ–æ–±—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ü–∏–∫–ª–µ
print(loop)
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –∫ –≤—ã–≤–æ–¥—É —Å–≤–µ–¥–µ–Ω–∏–π –æ–± –µ–≥–æ –æ–±—ä–µ–∫—Ç–µ.
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å, —á—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏–º–µ–µ—Ç —Ç–∏–ø _UnixSelectorEventLoop, –∏ —á—Ç–æ –æ–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—ã–º.
<_UnixSelectorEventLoop running=False closed=False debug=False>
–ï—Å–ª–∏ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Äî –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.get_running_loop().
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ –û–°. –ï—Å–ª–∏ –≤ –ø–æ—Ç–æ–∫–µ –Ω–µ—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π ‚Äî –≤—ã–¥–∞—ë—Ç—Å—è –æ—à–∏–±–∫–∞ RuntimeError. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∏–∑ –∫–æ–ª–ª–±—ç–∫–∞.
Event Loop
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
–ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É—Å—è —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_running_loop()
–ï—Å—Ç—å –µ—â—ë —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. –≠—Ç–æ ‚Äî asyncio.get_event_loop(). –ù–æ –æ–Ω–∞, –≤ Python 3.10, –±—ã–ª–∞ –ø—Ä–∏–∑–Ω–∞–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –µ–π –Ω–µ —Å—Ç–æ–∏—Ç.
6.3. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–± –æ–±—ä–µ–∫—Ç–µ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ Python-–æ–±—ä–µ–∫—Ç–∞.
–≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ü–∏–∫–ª–æ–º, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –∫–ª–∞—Å—Å–µ AbstractEventLoop.
–°—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º.
–ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –û–° —Å–µ–º–µ–π—Å—Ç–≤–∞ Windows –∏ Unix —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ-—Ä–∞–∑–Ω–æ–º—É –∏–∑-–∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –Ω–∞ —ç—Ç–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.
SelectorEventLoop ‚Äî —ç—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –û–°, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ Unix ‚Äî –Ω–∞–ø–æ–¥–æ–±–∏–µ Linux –∏ macOS.
ProactorEventLoop ‚Äî —ç—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ Windows.
–°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–¥–∏ –µ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏.
6.4. –ó–∞—á–µ–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π
–ó–∞—á–µ–º –Ω–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã?
–≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–æ –ø–æ –º–Ω–æ–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º.
–ù–∞–ø—Ä–∏–º–µ—Ä:
–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.
–î–ª—è –≤—ã–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –∑–∞–¥–∞—á.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á.
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø—É–ª—É –ø–æ—Ç–æ–∫–æ–≤, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –∑–∞–¥–∞—á–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö.
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω –≤ –æ–±—ã—á–Ω—É—é asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—É, –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ.
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π ‚Äî –ø–µ—Ä–µ–π–¥—ë–º –∫ asyncio-–∑–∞–¥–∞—á–∞–º.
7. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ asyncio-–∑–∞–¥–∞—á
–û–±—ä–µ–∫—Ç—ã Task (–∑–∞–¥–∞—á–∏) –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω.
–ó–∞–¥–∞—á–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–º–µ–Ω—è—Ç—å –∏—Ö, –ø–æ–ª—É—á–∞—Ç—å –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Ö —Ä–∞–±–æ—Ç—ã –∏ –≤—ã–¥–∞–Ω–Ω—ã–µ –∏–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∞–º–∏. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–¥–∞—á–∞–º–∏, —Ä–∞–±–æ—Ç–∞ —Å –Ω–∏–º–∏ —Ç–æ–∂–µ –≤–µ–¥—ë—Ç—Å—è –∫–∞–∫ —Å –∑–∞–¥–∞—á–∞–º–∏.
–ü–æ–≥–æ–≤–æ—Ä–∏–º –æ–± asyncio-–∑–∞–¥–∞—á–∞—Ö.
7.1. –ß—Ç–æ —Ç–∞–∫–æ–µ asyncio-–∑–∞–¥–∞—á–∞
Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è asyncio-–∫–æ—Ä—É—Ç–∏–Ω –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫.
–ó–∞–¥–∞—á–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö —ç—Ç–∏–º —Å—Ä–µ–¥—Å—Ç–≤–∞–º asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–¥–µ–Ω–∏–π –æ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö, —Å –∏—Ö –ø–æ–º–æ—â—å—é –æ–Ω–∞ –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏.
–ó–∞–¥–∞—á–∞ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫.
PEP 3156 ‚Äì Asynchronous IO Support Rebooted: the ¬´asyncio¬ª Module
–ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –ó–∞–¥–∞—á–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –¥–∞—ë—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–µ–π.
–ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π asyncio, –∏ —á—Ç–æ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –µ—â—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–æ–∑–¥–∞–≤—à–µ–π –∏—Ö –∫–æ—Ä—É—Ç–∏–Ω–µ. –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä—è–º–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –¥–æ–∂–¥–∞—Ç—å—Å—è –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è.
–ó–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω—É –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ –æ–±—ä–µ–∫—Ç Task, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–∞–ø–æ–¥–æ–±–∏–µ asyncio.create_task(), –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
Coroutines and Tasks
–ö–ª–∞—Å—Å asyncio.Task —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å asyncio.Future, –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —è–≤–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç–∞–º–∏, –¥–æ–ø—É—Å–∫–∞—é—â–∏–º–∏ –æ–∂–∏–¥–∞–Ω–∏–µ.
Future ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–ª–∞—Å—Å. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—É—â–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –≤–µ—Ä–Ω—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
Future ‚Äî —ç—Ç–æ –æ—Å–æ–±—ã–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
Coroutines and Tasks
–ö–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—à–∏—Ä—è—é—Ç –∫–ª–∞—Å—Å Future, —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç Future-–ø–æ–¥–æ–±–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏.
Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω.
Coroutines and Tasks
–¢–∞–∫ –∫–∞–∫ Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –∫–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è await.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
–ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
await task
–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å —Ç–µ–º, —á—Ç–æ —Å–æ–±–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç asyncio-–∑–∞–¥–∞—á–∏, –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –∏—Ö —Å–æ–∑–¥–∞–≤–∞—Ç—å.
7.2. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
–ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –º–µ—Ö–∞–Ω–∏–∑–º—É.
–í—Å–ø–æ–º–Ω–∏—Ç–µ ‚Äî –∫–æ—Ä—É—Ç–∏–Ω—É –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ async def. –û–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è.
–ù–∞–ø—Ä–∏–º–µ—Ä:
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def task_coroutine():
    # ...
–ó–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã.
–ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á:
–°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±).
–°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –ø–æ–º–æ—â—å—é –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API.
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤.
–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API
–ó–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å, –ø—Ä–∏–±–µ–≥–Ω—É–≤ –∫ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.create_task().
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏–º—è –∑–∞–¥–∞—á–∏, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ asyncio.Task.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = task_coroutine()
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(coro)
–°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Å –ø–æ–º–æ—â—å—é —Å–ª–æ–∂–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine())
–í–æ—Ç —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:
–ö–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task.
–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π.
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä Task.
–°—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä Task –º–æ–∂–Ω–æ –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å. –° –∑–∞–¥–∞—á–µ–π –º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–æ–≤, –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å –≤ –∫–æ—Ä—É—Ç–∏–Ω–µ.
–≠—Ç–æ ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Task –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö.
–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API
–ó–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω –∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API asyncio.
–ü–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–± —Ç–∞–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.ensure_future().
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç Task, Future, –∏–ª–∏ Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–∞–∫–æ–π, –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞, –∏, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞.
–ï—Å–ª–∏ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –±—É–¥–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π.
–ï—Å–ª–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ ‚Äî –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task, –∫–æ—Ç–æ—Ä—ã–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
task = asyncio.ensure_future(task_coroutine())
–ï—â—ë –æ–¥–Ω–∞ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Task –∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–º loop.create_task().
–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –∫–∞–∫ –∑–∞–¥–∞—á—É.
–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–µ, –ø—Ä–∏–±–µ–≥–Ω—É–≤ –∫ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.get_event_loop().
–ó–∞—Ç–µ–º –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ create_task() —ç—Ç–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ü–∏–∫–ª–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Task –∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
–ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_event_loop()
—Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
task = loop.create_task(task_coroutine())
7.3. –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏?
–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ —Ä–∞–±–æ—Ç–µ —Å –∑–∞–¥–∞—á–∞–º–∏ –∑–≤—É—á–∏—Ç —Ç–∞–∫: ¬´–ö–æ–≥–¥–∞, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞, –æ–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?¬ª.
–ò —ç—Ç–æ ‚Äî —Ö–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å.
–•–æ—Ç—è –º—ã –º–æ–∂–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω –≤ –≤–∏–¥–µ –∑–∞–¥–∞—á, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π create_task(), –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ.
–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –∑–∞–¥–∞—á–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —É —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ—ë –∑–∞–ø—É—Å—Ç–∏—Ç—å.
–≠—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—Å–µ –¥—Ä—É–≥–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∏ –Ω–∞—Å—Ç–∞–Ω–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–π –Ω–∞—Å –∑–∞–¥–∞—á–∏.
–ù–∞–ø—Ä–∏–º–µ—Ä, –∏–º–µ–µ—Ç—Å—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –æ–¥–Ω–æ–π –∫–æ—Ä—É—Ç–∏–Ω–æ–π, –∫–æ—Ç–æ—Ä—É—é —Å–æ–∑–¥–∞–ª–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π, –≤–∏–¥–µ –∑–∞–¥–∞—á–∏, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏. –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞, —Å–æ–∑–¥–∞–≤—à–∞—è —ç—Ç—É –∑–∞–¥–∞—á—É, –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
–≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ —Ä–µ—à–∏—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É, –ø–æ–¥–æ–∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∑–∞–¥–∞—á–∏, –∏–ª–∏ —Ä–µ—à–∏—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ.
–ù–∞–ø—Ä–∏–º–µ—Ä:
...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine())
–æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–π –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
await task
–ù–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å—ë :)
–û, –∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å? ü§ó üí∞ –°–µ–≥–æ–¥–Ω—è –ø—É–±–ª–∏–∫—É–µ–º —Ç—Ä–µ—Ç—å—é —á–∞—Å—Ç—å (–ø–µ—Ä–≤–∞—è, –≤—Ç–æ—Ä–∞—è) –ø–µ—Ä–µ–≤–æ–¥–∞ —É—á–µ–±–Ω–æ–≥–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –ø–æ –º–æ–¥—É–ª—é asyncio –≤ Python. –ó–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ä–∞–∑–¥–µ–ª—ã –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ ‚Ññ5, 6 –∏ 7. –ø–µ—Ä–≤–∞—è –≤—Ç–æ—Ä–∞—è asyncio   5. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω –í Python-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî —Ç–∞–∫ –∂–µ, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–æ–≤—ã–µ –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º—ã (—Ñ—É–Ω–∫—Ü–∏–∏). –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã. –ú–æ–¥—É–ª—å asyncio –¥–∞—ë—Ç –Ω–∞–º —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—Ä–µ–¥—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω. asyncio 5.1. –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –ö–æ—Ä—É—Ç–∏–Ω—É –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def. async def –≠—Ç–æ ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è def, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ–¥–ø—Ä–æ–≥—Ä–∞–º–º. def –û–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –ù–∞–ø—Ä–∏–º–µ—Ä: # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # ... # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # ... –ö–æ—Ä—É—Ç–∏–Ω—É, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Å –ø–æ–º–æ—â—å—é async def, –Ω–∞–∑—ã–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–µ–π –∫–æ—Ä—É—Ç–∏–Ω—ã. async def –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø–æ–ª—å–∑—É—è—Å—å –∫–æ–º–∞–Ω–¥–æ–π async def, –æ–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ await, async for –∏ async with.
Python glossary –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø–æ–ª—å–∑—É—è—Å—å –∫–æ–º–∞–Ω–¥–æ–π async def, –æ–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ await, async for –∏ async with. –§—É–Ω–∫—Ü–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã: —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –ø–æ–ª—å–∑—É—è—Å—å –∫–æ–º–∞–Ω–¥–æ–π async def, –æ–Ω–∞ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ await, async for –∏ async with. Python glossary Python glossary Python glossary –ó–∞—Ç–µ–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω, —Ç–∞–∫–∏–µ, –∫–∞–∫ await, async for –∏ async with. await async for async with –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö. –í—ã—Ä–∞–∂–µ–Ω–∏—è await, async for –∏ async with –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã.
Coroutine function definition –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö. –í—ã—Ä–∞–∂–µ–Ω–∏—è await, async for –∏ async with –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–æ –≤–æ –º–Ω–æ–≥–∏—Ö –º–µ—Å—Ç–∞—Ö. –í—ã—Ä–∞–∂–µ–Ω–∏—è await, async for –∏ async with –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã. Coroutine function definition Coroutine function definition Coroutine function definition –ù–∞–ø—Ä–∏–º–µ—Ä: # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1) # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1) 5.2. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –µ—ë –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å. –í—ã–≥–ª—è–¥–∏—Ç —ç—Ç–æ –∫–∞–∫ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro() ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro() –í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –∫–æ—Ä—É—Ç–∏–Ω–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è. –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω—ã; —Ç–æ—á–Ω–µ–µ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–¥–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ —Ö–æ–¥–µ —Ç–∞–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ª–∏—à—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã.
Python in a Nutshell, 2017, —Å. 516 –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω—ã; —Ç–æ—á–Ω–µ–µ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–¥–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ —Ö–æ–¥–µ —Ç–∞–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ª–∏—à—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –§—É–Ω–∫—Ü–∏—é –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Ñ–∞–±—Ä–∏–∫—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∫–æ—Ä—É—Ç–∏–Ω—ã; —Ç–æ—á–Ω–µ–µ ‚Äî –Ω–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –æ —Ç–æ–º, —á—Ç–æ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∫–æ–¥–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤ —Ö–æ–¥–µ —Ç–∞–∫–æ–≥–æ –≤—ã–∑–æ–≤–∞ –ª–∏—à—å —Å–æ–∑–¥–∞—ë—Ç—Å—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. Python in a Nutshell, 2017, —Å. 516 Python in a Nutshell Python in a Nutshell , 2017, —Å. 516 –£ Python-–æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã ‚Äî —Ç–∞–∫–∏–µ, –∫–∞–∫ send() –∏ close(). –û–Ω –∏–º–µ–µ—Ç —Ç–∏–ø coroutine. send() close() coroutine –ü—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ, —Å–æ–∑–¥–∞–≤ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –≤—ã–≤–µ–¥—è —Å–≤–µ–¥–µ–Ω–∏—è –æ –µ–≥–æ —Ç–∏–ø–µ, –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–≤—à–∏—Å—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π Python-—Ñ—É–Ω–∫—Ü–∏–µ–π type(): type() # SuperFastPython.com
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
 
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro()
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
print(type(coro)) # SuperFastPython.com
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
 
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = custom_coro()
# –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
print(type(coro)) –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–≤–æ–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ —Å–æ–∑–¥–∞–Ω–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–ª–∞—Å—Å—É coroutine. coroutine –ù–∞–º, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–æ–æ–±—â–∞—é—Ç –æ–± –æ—à–∏–±–∫–µ RuntimeError, —Ç–∞–∫ –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å. –ú—ã –∏—Å—Å–ª–µ–¥—É–µ–º —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ. RuntimeError <class 'coroutine'>
sys:1: RuntimeWarning: coroutine 'custom_coro' was never awaited <class 'coroutine'>
sys:1: RuntimeWarning: coroutine 'custom_coro' was never awaited –û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –æ–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç Python-—Ç–∏–ø, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –º–µ—Ç–æ–¥ await(). await() –û–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ç–æ–¥ await(). –û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ.
Awaitable objects –û–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ç–æ–¥ await(). –û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ. –û–±—ä–µ–∫—Ç—ã, –¥–æ–ø—É—Å–∫–∞—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏–µ, –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–µ—Ç–æ–¥ await await (). –û–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–π –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏, –æ–±—ä—è–≤–ª–µ–Ω–Ω–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è async def ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ. Awaitable objects Awaitable objects Awaitable objects –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–± –æ–±—ä–µ–∫—Ç–∞—Ö, –¥–æ–ø—É—Å–∫–∞—é—â–∏—Ö –æ–∂–∏–¥–∞–Ω–∏–µ, –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å. –∑–¥–µ—Å—å 5.3. –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –∏–∑ Python-–∫–æ–¥–∞ –ö–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤ –æ–±—ã—á–Ω–æ–º Python-–∫–æ–¥–µ, –Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –±–∞–∑–∞ –ª—é–±–æ–≥–æ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–ª–ª–±—ç–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã.
Event Loop –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –±–∞–∑–∞ –ª—é–±–æ–≥–æ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–ª–ª–±—ç–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –±–∞–∑–∞ –ª—é–±–æ–≥–æ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –∏ –∫–æ–ª–ª–±—ç–∫–∏, —Å–µ—Ç–µ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞, –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å—ã. Event Loop Event Loop Event Loop –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π –∫–æ—Ä—É—Ç–∏–Ω—ã, –æ—Ä–≥–∞–Ω–∏–∑—É–µ—Ç —Ä–∞–±–æ—Ç—É –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏, –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–π –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏. –ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ª–∏—à—å —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π.
Python in a Nutshell, 2017, —Å. 517 –ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ª–∏—à—å —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π. –ö–æ–¥ –æ–±—ä–µ–∫—Ç–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ª–∏—à—å —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π. Python in a Nutshell, 2017, —Å. 517 Python in a Nutshell Python in a Nutshell , 2017, —Å. 517 –¢–∏–ø–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –∑–∞–ø—É—Å–∫–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–æ—Ä—É—Ç–∏–Ω –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.run(). asyncio.run() –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–Ω—É –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –µ–π –∫–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –∫–∞–∫ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É, –æ—Å–Ω–æ–≤–∞–Ω–Ω—É—é –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä: # SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
import asyncio
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# –≥–ª–∞–≤–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞
async def main():
    # –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—à–µ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await custom_coro()
 
# –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö
asyncio.run(main()) # SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã
import asyncio
# –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def custom_coro():
    # –æ–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await asyncio.sleep(1)
 
# –≥–ª–∞–≤–Ω–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞
async def main():
    # –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞—à–µ–π –∫–æ—Ä—É—Ç–∏–Ω—ã
    await custom_coro()
 
# –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö
asyncio.run(main()) –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –∑–Ω–∞–µ–º –æ —Ç–æ–º, –∫–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—ã ‚Äî –ø–æ–±–ª–∏–∂–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π. 6. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ —Å–µ—Ä–¥—Ü–µ –ø—Ä–æ–≥—Ä–∞–º–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ asyncio. asyncio –í —ç—Ç–æ–º —Ä–∞–∑–¥–µ–ª–µ –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. 6.1. –ß—Ç–æ —Ç–∞–∫–æ–µ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ. Asyncio ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –º–∞–Ω–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª.
Python Concurrency with asyncio, 2022, —Å. 3 Asyncio ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –º–∞–Ω–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª. Asyncio ‚Äî —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∫–æ—Ä—É—Ç–∏–Ω –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –º–∞–Ω–µ—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–¥–µ–ª–∏ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª. Python Concurrency with asyncio, 2022, —Å. 3 Python Concurrency with asyncio Python Concurrency with asyncio , 2022, —Å. 3 –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π ‚Äî —ç—Ç–æ –≤–∞–∂–Ω–µ–π—à–∏–π —ç–ª–µ–º–µ–Ω—Ç asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ä–µ—à–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á. –í–æ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö: –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–±—ç–∫–æ–≤.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞.
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–±—ç–∫–æ–≤. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–±—ç–∫–æ–≤. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. ¬´–¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π¬ª ‚Äî —ç—Ç–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å—Ç–∞–ª –≤–µ—Å—å–º–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º –≤ –Ω–∞—à–∏ –¥–Ω–∏ –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ JavaScript. –í JavaScript –∏–º–µ–µ—Ç—Å—è –º–æ–¥–µ–ª—å —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, –∑–∞ —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å. –≠—Ç–∞ –º–æ–¥–µ–ª—å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–æ–¥–µ–ª–µ–π –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ C –∏ Java.
The event loop, Mozilla –í JavaScript –∏–º–µ–µ—Ç—Å—è –º–æ–¥–µ–ª—å —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, –∑–∞ —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å. –≠—Ç–∞ –º–æ–¥–µ–ª—å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–æ–¥–µ–ª–µ–π –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ C –∏ Java. –í JavaScript –∏–º–µ–µ—Ç—Å—è –º–æ–¥–µ–ª—å —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞, –∑–∞ —Å–±–æ—Ä –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á, –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã—Ö –≤ –æ—á–µ—Ä–µ–¥—å. –≠—Ç–∞ –º–æ–¥–µ–ª—å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–æ–¥–µ–ª–µ–π –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ C –∏ Java. The event loop, Mozilla The event loop The event loop , Mozilla –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è, —ç—Ç–æ ‚Äî —Ü–∏–∫–ª. –û–Ω —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å–ø–∏—Å–∫–æ–º –∑–∞–¥–∞—á (–∫–æ—Ä—É—Ç–∏–Ω) –∏ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥–æ–π —Å–≤–æ–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏. –û–Ω, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∏ –¥—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏ ‚Äî –Ω–∞–ø–æ–¥–æ–±–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–ª–ª–±—ç–∫–æ–≤ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞. –ú–æ–¥—É–ª—å asyncio –¥–∞—ë—Ç –Ω–∞–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º. asyncio –ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Ç–∏–ø–∏—á–Ω—ã—Ö Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç—É–ø –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –Ω–∞—Ü–µ–ª–µ–Ω –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –Ω–∞ —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–≤–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã –Ω–∞ –±–∞–∑–µ –º–æ–¥—É–ª—è asyncio –∏–ª–∏ —Ö–æ—á–µ—Ç –¥–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å asyncio –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–≤–æ–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫. asyncio asyncio –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio, —Ç–∞–∫–∏–µ, –∫–∞–∫ asyncio.run(). –£ –Ω–∏—Ö —Ä–µ–¥–∫–æ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ –∏–ª–∏ –≤—ã–∑–æ–≤ –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤.
Event Loop –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio, —Ç–∞–∫–∏–µ, –∫–∞–∫ asyncio.run(). –£ –Ω–∏—Ö —Ä–µ–¥–∫–æ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ –∏–ª–∏ –≤—ã–∑–æ–≤ –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio, —Ç–∞–∫–∏–µ, –∫–∞–∫ asyncio.run(). –£ –Ω–∏—Ö —Ä–µ–¥–∫–æ –±—É–¥–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ –∏–ª–∏ –≤—ã–∑–æ–≤ –µ–≥–æ –º–µ—Ç–æ–¥–æ–≤. Event Loop Event Loop Event Loop –ú–æ–¥—É–ª—å asyncio –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ç–µ–∫—É—â–µ–º—É –æ–±—ä–µ–∫—Ç—É —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. –≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ç–∞–∫ –∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä –º–µ—Ç–æ–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω—è—Ç—å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π. asyncio –ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏ –¥–æ–ø–æ–ª–Ω—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ asyncio –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å –≤ —Å–≤–æ–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. asyncio –û–±—ã—á–Ω—ã–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —Ä–µ–¥–∫–æ –Ω—É–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ asyncio. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –æ–Ω–∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –ø—Ä–∏–º–µ–Ω—è—é—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –º–æ–¥—É–ª—è. asyncio –ù–æ, –∫–∞–∫ –±—ã —Ç–æ –Ω–∏ –±—ã–ª–æ, –º—ã –≤–ø–æ–ª–Ω–µ –º–æ–∂–µ–º –∫—Ä–∞—Ç–∫–æ –æ–±—Å—É–¥–∏—Ç—å –≤–æ–ø—Ä–æ—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. 6.2. –ó–∞–ø—É—Å–∫ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –µ–≥–æ –æ–±—ä–µ–∫—Ç –û–±—ã—á–Ω–æ –≤ asyncio-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö —Å—Å—ã–ª–∫–∏ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã —Ü–∏–∫–ª–æ–≤ —Å–æ–±—ã—Ç–∏–π –ø–æ–ª—É—á–∞—é—Ç, –≤—ã–∑—ã–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—é asyncio.run(). asyncio.run() –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤ –∫–æ–Ω—Ü–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –µ–≥–æ —Ä–∞–±–æ—Ç—É. –ï—ë —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º, –≤ –∏–¥–µ–∞–ª–µ –µ—ë –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –ª–∏—à—å –æ–¥–∏–Ω —Ä–∞–∑.
Asyncio Coroutines and Tasks –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤ –∫–æ–Ω—Ü–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –µ–≥–æ —Ä–∞–±–æ—Ç—É. –ï—ë —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º, –≤ –∏–¥–µ–∞–ª–µ –µ—ë –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –ª–∏—à—å –æ–¥–∏–Ω —Ä–∞–∑. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤ –∫–æ–Ω—Ü–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –µ–≥–æ —Ä–∞–±–æ—Ç—É. –ï—ë —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º, –≤ –∏–¥–µ–∞–ª–µ –µ—ë –Ω—É–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –ª–∏—à—å –æ–¥–∏–Ω —Ä–∞–∑. Asyncio Coroutines and Tasks Asyncio Coroutines and Tasks Asyncio Coroutines and Tasks –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –µ—ë –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –µ—ë —Ä–∞–±–æ—Ç—ã. –û–±—ã—á–Ω–æ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞—é—Ç –≥–ª–∞–≤–Ω—É—é –∫–æ—Ä—É—Ç–∏–Ω—É, —Å –∫–æ—Ç–æ—Ä–æ–π –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –°—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º. –§—É–Ω–∫—Ü–∏—è asyncio.new_event_loop() —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ. asyncio.new_event_loop() –°–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π.
Event Loop –°–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. –°–æ–∑–¥–∞—ë—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. Event Loop Event Loop Event Loop –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop() ...
—Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop() –ú–æ–∂–Ω–æ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ –≤—Å—ë –Ω–∞ —Ä–∞–±–æ—á–µ–º –ø—Ä–∏–º–µ—Ä–µ. –ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏ —Å–æ–æ–±—â–∞–µ–º —Å–≤–µ–¥–µ–Ω–∏—è –æ –Ω—ë–º. # SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
import asyncio
 
# —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop()
# —Å–æ–æ–±—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ü–∏–∫–ª–µ
print(loop) # SuperFastPython.com
# –ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π
import asyncio
 
# —Å–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É
loop = asyncio.new_event_loop()
# —Å–æ–æ–±—â–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ü–∏–∫–ª–µ
print(loop) –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –∏ –∫ –≤—ã–≤–æ–¥—É —Å–≤–µ–¥–µ–Ω–∏–π –æ–± –µ–≥–æ –æ–±—ä–µ–∫—Ç–µ. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å, —á—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –∏–º–µ–µ—Ç —Ç–∏–ø _UnixSelectorEventLoop, –∏ —á—Ç–æ –æ–Ω –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –Ω–æ –∏ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—ã–º. _UnixSelectorEventLoop <_UnixSelectorEventLoop running=False closed=False debug=False> <_UnixSelectorEventLoop running=False closed=False debug=False> –ï—Å–ª–∏ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚Äî –¥–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.get_running_loop(). asyncio asyncio.get_running_loop() –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ –û–°. –ï—Å–ª–∏ –≤ –ø–æ—Ç–æ–∫–µ –Ω–µ—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π ‚Äî –≤—ã–¥–∞—ë—Ç—Å—è –æ—à–∏–±–∫–∞ RuntimeError. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∏–∑ –∫–æ–ª–ª–±—ç–∫–∞.
Event Loop –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ –û–°. –ï—Å–ª–∏ –≤ –ø–æ—Ç–æ–∫–µ –Ω–µ—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π ‚Äî –≤—ã–¥–∞—ë—Ç—Å—è –æ—à–∏–±–∫–∞ RuntimeError. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∏–∑ –∫–æ–ª–ª–±—ç–∫–∞. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—é—â–∏–π—Å—è —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –≤ —Ç–µ–∫—É—â–µ–º –ø–æ—Ç–æ–∫–µ –û–°. –ï—Å–ª–∏ –≤ –ø–æ—Ç–æ–∫–µ –Ω–µ—Ç —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π ‚Äî –≤—ã–¥–∞—ë—Ç—Å—è –æ—à–∏–±–∫–∞ RuntimeError. –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∏–∑ –∫–æ–ª–ª–±—ç–∫–∞. Event Loop Event Loop Event Loop –ù–∞–ø—Ä–∏–º–µ—Ä: ...
–ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É—Å—è —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_running_loop() ...
–ø–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø –∫ –≤—ã–ø–æ–ª–Ω—è—é—â–µ–º—É—Å—è —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_running_loop() –ï—Å—Ç—å –µ—â—ë —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–ª–∏ –∑–∞–ø—É—Å–∫–∞ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π. –≠—Ç–æ ‚Äî asyncio.get_event_loop(). –ù–æ –æ–Ω–∞, –≤ Python 3.10, –±—ã–ª–∞ –ø—Ä–∏–∑–Ω–∞–Ω–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –µ–π –Ω–µ —Å—Ç–æ–∏—Ç. asyncio.get_event_loop() 6.3. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–± –æ–±—ä–µ–∫—Ç–µ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ Python-–æ–±—ä–µ–∫—Ç–∞. –≠—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π API, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ü–∏–∫–ª–æ–º, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –∫–ª–∞—Å—Å–µ AbstractEventLoop. AbstractEventLoop –°—É—â–µ—Å—Ç–≤—É—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º. —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –û–° —Å–µ–º–µ–π—Å—Ç–≤–∞ Windows –∏ Unix —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ-—Ä–∞–∑–Ω–æ–º—É –∏–∑-–∑–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ –Ω–∞ —ç—Ç–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö. SelectorEventLoop ‚Äî —ç—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –û–°, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã—Ö –Ω–∞ Unix ‚Äî –Ω–∞–ø–æ–¥–æ–±–∏–µ Linux –∏ macOS. SelectorEventLoop ProactorEventLoop ‚Äî —ç—Ç–æ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ Windows. ProactorEventLoop –°—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–¥–∏ –µ–≥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏. 6.4. –ó–∞—á–µ–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –ó–∞—á–µ–º –Ω–∞–º –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—ã? –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω—É–∂–Ω–æ –ø–æ –º–Ω–æ–≥–∏–º –ø—Ä–∏—á–∏–Ω–∞–º. –ù–∞–ø—Ä–∏–º–µ—Ä: –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á.
–î–ª—è –≤—ã–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –∑–∞–¥–∞—á.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á. –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ö–æ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á. –î–ª—è –≤—ã–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –∑–∞–¥–∞—á. –î–ª—è –≤—ã–¥–∞—á–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞–±–æ—Ç—ã –∑–∞–¥–∞—á. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–¥–∞—á. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø—É–ª—É –ø–æ—Ç–æ–∫–æ–≤, —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–∞—è –Ω–∞ —Ä–∞–±–æ—Ç—É —Å –∑–∞–¥–∞—á–∞–º–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö. asyncio –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω –≤ –æ–±—ã—á–Ω—É—é asyncio-–ø—Ä–æ–≥—Ä–∞–º–º—É, –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ —ç—Ç–æ –Ω—É–∂–Ω–æ. –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã –Ω–µ–º–Ω–æ–≥–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å —Å —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π ‚Äî –ø–µ—Ä–µ–π–¥—ë–º –∫ asyncio-–∑–∞–¥–∞—á–∞–º. 7. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ asyncio-–∑–∞–¥–∞—á –û–±—ä–µ–∫—Ç—ã Task (–∑–∞–¥–∞—á–∏) –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω. Task –ó–∞–¥–∞—á–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –û–Ω–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç–∞–≤–∏—Ç—å –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥—å –∏ –æ—Ç–º–µ–Ω—è—Ç—å –∏—Ö, –ø–æ–ª—É—á–∞—Ç—å –≤ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Ö —Ä–∞–±–æ—Ç—ã –∏ –≤—ã–¥–∞–Ω–Ω—ã–µ –∏–º–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è. –¶–∏–∫–ª —Å–æ–±—ã—Ç–∏–π asyncio —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∞–º–∏. –ü–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –≤—Å–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –∑–∞–¥–∞—á–∞–º–∏, —Ä–∞–±–æ—Ç–∞ —Å –Ω–∏–º–∏ —Ç–æ–∂–µ –≤–µ–¥—ë—Ç—Å—è –∫–∞–∫ —Å –∑–∞–¥–∞—á–∞–º–∏. asyncio –ü–æ–≥–æ–≤–æ—Ä–∏–º –æ–± asyncio-–∑–∞–¥–∞—á–∞—Ö. 7.1. –ß—Ç–æ —Ç–∞–∫–æ–µ asyncio-–∑–∞–¥–∞—á–∞ Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è asyncio-–∫–æ—Ä—É—Ç–∏–Ω –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫. Task –ó–∞–¥–∞—á–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö —ç—Ç–∏–º —Å—Ä–µ–¥—Å—Ç–≤–∞–º asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–≤–µ–¥–µ–Ω–∏–π –æ –∫–æ—Ä—É—Ç–∏–Ω–∞—Ö, —Å –∏—Ö –ø–æ–º–æ—â—å—é –æ–Ω–∞ –º–æ–∂–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏. –ó–∞–¥–∞—á–∞ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫.
PEP 3156 ‚Äì Asynchronous IO Support Rebooted: the ¬´asyncio¬ª Module –ó–∞–¥–∞—á–∞ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫. –ó–∞–¥–∞—á–∞ ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏ –∏ –∑–∞ –∏—Ö –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫. PEP 3156 ‚Äì Asynchronous IO Support Rebooted: the ¬´asyncio¬ª Module PEP 3156 ‚Äì Asynchronous IO Support Rebooted: the ¬´asyncio¬ª Module PEP 3156 ‚Äì Asynchronous IO Support Rebooted: the ¬´asyncio¬ª Module –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω. –î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏ –Ω—É–∂–µ–Ω –æ–±—ä–µ–∫—Ç –∫–æ—Ä—É—Ç–∏–Ω—ã. –ó–∞–¥–∞—á–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç –∫–æ—Ä—É—Ç–∏–Ω—É, –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –¥–∞—ë—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–µ–π. –ó–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π asyncio, –∏ —á—Ç–æ –æ–Ω–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –µ—â—ë –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–æ–∑–¥–∞–≤—à–µ–π –∏—Ö –∫–æ—Ä—É—Ç–∏–Ω–µ. –≠—Ç–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä—è–º–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω—ã, –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –¥–æ–∂–¥–∞—Ç—å—Å—è –µ—ë –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è. asyncio –ó–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω—É –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ –æ–±—ä–µ–∫—Ç Task, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–∞–ø–æ–¥–æ–±–∏–µ asyncio.create_task(), –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
Coroutines and Tasks –ó–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω—É –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ –æ–±—ä–µ–∫—Ç Task, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–∞–ø–æ–¥–æ–±–∏–µ asyncio.create_task(), –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. –ó–∞–¥–∞—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ—Ä—É—Ç–∏–Ω. –ö–æ–≥–¥–∞ –∫–æ—Ä—É—Ç–∏–Ω—É –æ–±–æ—Ä–∞—á–∏–≤–∞—é—Ç –≤ –æ–±—ä–µ–∫—Ç Task, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π –Ω–∞–ø–æ–¥–æ–±–∏–µ asyncio.create_task(), –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è. Coroutines and Tasks Coroutines and Tasks Coroutines and Tasks –ö–ª–∞—Å—Å asyncio.Task —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∫–ª–∞—Å—Å asyncio.Future, –µ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —è–≤–ª—è—é—Ç—Å—è –æ–±—ä–µ–∫—Ç–∞–º–∏, –¥–æ–ø—É—Å–∫–∞—é—â–∏–º–∏ –æ–∂–∏–¥–∞–Ω–∏–µ. asyncio.Task asyncio.Future Future ‚Äî —ç—Ç–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∫–ª–∞—Å—Å. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Å—É—â–Ω–æ—Å—Ç—å, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –≤–µ—Ä–Ω—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. Future Future ‚Äî —ç—Ç–æ –æ—Å–æ–±—ã–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏.
Coroutines and Tasks Future ‚Äî —ç—Ç–æ –æ—Å–æ–±—ã–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. Future ‚Äî —ç—Ç–æ –æ—Å–æ–±—ã–π –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏. Coroutines and Tasks Coroutines and Tasks Coroutines and Tasks –ö–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—à–∏—Ä—è—é—Ç –∫–ª–∞—Å—Å Future, —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç Future-–ø–æ–¥–æ–±–Ω—ã–º–∏ –∫–ª–∞—Å—Å–∞–º–∏. Future Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω.
Coroutines and Tasks Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω. Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Python-–∫–æ—Ä—É—Ç–∏–Ω. Coroutines and Tasks Coroutines and Tasks Coroutines and Tasks –¢–∞–∫ –∫–∞–∫ Task ‚Äî —ç—Ç–æ –æ–±—ä–µ–∫—Ç, –¥–æ–ø—É—Å–∫–∞—é—â–∏–π –æ–∂–∏–¥–∞–Ω–∏–µ, –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –∫–æ—Ä—É—Ç–∏–Ω–∞ –º–æ–∂–µ—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è await. Task await –ù–∞–ø—Ä–∏–º–µ—Ä: ...
–ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
await task ...
–ø–æ–¥–æ–∂–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
await task –¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ –º—ã —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å —Å —Ç–µ–º, —á—Ç–æ —Å–æ–±–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç asyncio-–∑–∞–¥–∞—á–∏, –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, –∫–∞–∫ –∏—Ö —Å–æ–∑–¥–∞–≤–∞—Ç—å. 7.2. –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞—é—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –º–µ—Ö–∞–Ω–∏–∑–º—É. –í—Å–ø–æ–º–Ω–∏—Ç–µ ‚Äî –∫–æ—Ä—É—Ç–∏–Ω—É –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ async def. –û–Ω–∞ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è. async def –ù–∞–ø—Ä–∏–º–µ—Ä: # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def task_coroutine():
    # ... # –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
async def task_coroutine():
    # ... –ó–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –∫–æ—Ä—É—Ç–∏–Ω—ã. –ï—Å—Ç—å –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á: –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±).
–°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –ø–æ–º–æ—â—å—é –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API. –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±). –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–±). Task –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –ø–æ–º–æ—â—å—é –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API. –°–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç Task —Å –ø–æ–º–æ—â—å—é –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API. Task –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–µ–µ –∫–∞–∂–¥—ã–π –∏–∑ —ç—Ç–∏—Ö —Å–ø–æ—Å–æ–±–æ–≤. –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API –ó–∞–¥–∞—á—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å, –ø—Ä–∏–±–µ–≥–Ω—É–≤ –∫ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.create_task(). asyncio.create_task() –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ –∫–æ—Ä—É—Ç–∏–Ω—ã –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –∏–º—è –∑–∞–¥–∞—á–∏, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ asyncio.Task. asyncio.Task –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = task_coroutine()
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(coro) ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã
coro = task_coroutine()
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(coro) –°–¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –≤ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ, —Å –ø–æ–º–æ—â—å—é —Å–ª–æ–∂–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine()) ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine()) –í–æ—Ç —á—Ç–æ –∑–¥–µ—Å—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç: –ö–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task.
–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π.
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä Task. –ö–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task. –ö–æ—Ä—É—Ç–∏–Ω–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task. Task –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä Task. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —ç–∫–∑–µ–º–ø–ª—è—Ä Task. Task –°—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä Task –º–æ–∂–Ω–æ –∏ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å. –° –∑–∞–¥–∞—á–µ–π –º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –º–µ—Ç–æ–¥–æ–≤, –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å –≤ –∫–æ—Ä—É—Ç–∏–Ω–µ. Task –≠—Ç–æ ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Task –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö. Task –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ Task —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API –ó–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω –∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–≥–æ API asyncio. asyncio –ü–µ—Ä–≤—ã–π —Å–ø–æ—Å–æ–± —Ç–∞–∫–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.ensure_future(). asyncio.ensure_future() –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç Task, Future, –∏–ª–∏ Future-–ø–æ–¥–æ–±–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Ç–∞–∫–æ–π, –∫–∞–∫ –∫–æ—Ä—É—Ç–∏–Ω–∞, –∏, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ ‚Äî —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω—É–∂–Ω–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞. Task Future –ï—Å–ª–∏ —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω ‚Äî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –±—É–¥–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤ —Ç–µ–∫—É—â–µ–º —Ü–∏–∫–ª–µ —Å–æ–±—ã—Ç–∏–π. –ï—Å–ª–∏ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–æ—Ä—É—Ç–∏–Ω–∞ ‚Äî –æ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä Task, –∫–æ—Ç–æ—Ä—ã–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è. Task –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
task = asyncio.ensure_future(task_coroutine()) ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
task = asyncio.ensure_future(task_coroutine()) –ï—â—ë –æ–¥–Ω–∞ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ Task –∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –º–µ—Ç–æ–¥–æ–º loop.create_task(). Task loop.create_task() –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ü–∏–∫–ª—É —Å–æ–±—ã—Ç–∏–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ—Ä—É—Ç–∏–Ω—É –∫–∞–∫ –∑–∞–¥–∞—á—É. –ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –≤ asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–µ, –ø—Ä–∏–±–µ–≥–Ω—É–≤ –∫ —Ñ—É–Ω–∫—Ü–∏–∏ asyncio.get_event_loop(). asyncio.get_event_loop() –ó–∞—Ç–µ–º –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –º–µ—Ç–æ–¥ create_task() —ç—Ç–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ü–∏–∫–ª–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ Task –∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. create_task() Task –ù–∞–ø—Ä–∏–º–µ—Ä: ...
–ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_event_loop()
—Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
task = loop.create_task(task_coroutine()) ...
–ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Ü–∏–∫–ª —Å–æ–±—ã—Ç–∏–π
loop = asyncio.get_event_loop()
—Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ—ë –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
task = loop.create_task(task_coroutine()) 7.3. –ö–æ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∑–∞–¥–∞—á–∏? –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤–æ–ø—Ä–æ—Å –æ —Ä–∞–±–æ—Ç–µ —Å –∑–∞–¥–∞—á–∞–º–∏ –∑–≤—É—á–∏—Ç —Ç–∞–∫: ¬´–ö–æ–≥–¥–∞, –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞, –æ–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è?¬ª. –ò —ç—Ç–æ ‚Äî —Ö–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å. –•–æ—Ç—è –º—ã –º–æ–∂–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π –∑–∞–ø—É—Å–∫ –∫–æ—Ä—É—Ç–∏–Ω –≤ –≤–∏–¥–µ –∑–∞–¥–∞—á, –ø–æ–ª—å–∑—É—è—Å—å —Ñ—É–Ω–∫—Ü–∏–µ–π create_task(), –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ. create_task() –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –∑–∞–¥–∞—á–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ —É —Ü–∏–∫–ª–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ –ø–æ—è–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ—ë –∑–∞–ø—É—Å—Ç–∏—Ç—å. –≠—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –≤—Å–µ –¥—Ä—É–≥–∏–µ –∫–æ—Ä—É—Ç–∏–Ω—ã –ø–µ—Ä–µ—Å—Ç–∞–Ω—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∏ –Ω–∞—Å—Ç–∞–Ω–µ—Ç –æ—á–µ—Ä–µ–¥—å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–π –Ω–∞—Å –∑–∞–¥–∞—á–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–º–µ–µ—Ç—Å—è asyncio-–ø—Ä–æ–≥—Ä–∞–º–º–∞ —Å –æ–¥–Ω–æ–π –∫–æ—Ä—É—Ç–∏–Ω–æ–π, –∫–æ—Ç–æ—Ä—É—é —Å–æ–∑–¥–∞–ª–∏ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π, –≤–∏–¥–µ –∑–∞–¥–∞—á–∏, –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏. –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞, —Å–æ–∑–¥–∞–≤—à–∞—è —ç—Ç—É –∑–∞–¥–∞—á—É, –Ω–µ –±—É–¥–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –≠—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –≤ —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã–∑—ã–≤–∞—é—â–∞—è –∫–æ—Ä—É—Ç–∏–Ω–∞ —Ä–µ—à–∏—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞–±–æ—Ç—É, –ø–æ–¥–æ–∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–æ–π –∫–æ—Ä—É—Ç–∏–Ω—ã –∏–ª–∏ –∑–∞–¥–∞—á–∏, –∏–ª–∏ —Ä–µ—à–∏—Ç –ø–æ–¥–æ–∂–¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏, –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–æ —Ç–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ. –ù–∞–ø—Ä–∏–º–µ—Ä: ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine())
–æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–π –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
await task ...
—Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã
task = asyncio.create_task(task_coroutine())
–æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–π –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
await task –ù–∞ —Å–µ–≥–æ–¥–Ω—è –≤—Å—ë :) –û, –∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å? ü§ó üí∞ –û, –∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å? ü§ó üí∞          ]]></text>
</doc>
