<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[pavezlopavel]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-01, 12:43]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/post/702818/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Оцениваем эффективность рекламы Вконтакте до продаж с помощью отчётности]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[ВКонтакте API]]></item>
		<item type="str"><![CDATA[Веб-аналитика]]></item>
		<item type="str"><![CDATA[Контекстная реклама]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[таргетированная реклама]]></item>
		<item type="str"><![CDATA[отчёт по рекламе]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[Кадр из мультфильма Star Wars: But Only Jedi Sha'a Gi 
Всем привет, меня зовут Злобин Павел. Я старший джедай или маркетолог-аналитик. Моя задача поддерживать и улучшать клиентские проекты, а чтобы это делать на основе цифр, мне нужна отчётность до продаж. Вот про неё и хочу рассказать в статье.
Отчётность можно строить по разному и с помощью разных инструментов, каждый со своими ограничениями. Я буду использовать самый доступный и бесплатный — Гугл Таблицы, о да.
Проверочные вопросы, на которые может ответить отчёт из данной статьи я указал ниже. Если вы не знаете, как на них отвечать при вашей текущей отчётности — статья для вас.
Сколько продаж приводит каждое конкретное объявление?
Какова стоимость продажи на конкретном объявлении?
Какой формат визуала в объявлениях приносит больше продаж?
Таргет на что самый окупаемый?
Можете ли вы сами поправить слетевший фильтр?
Если появится значение none, вы самостоятельно найдёте в чём причина?
Для затравки, приведу пример готового сводного отчёта.
Отчёт по таргетированной рекламе до продаж
Задача
Чтобы было намного проще, давайте представим, что у нас есть задача от руководства на аналитику рекламы Вконтакте и нам необходимо придумать решение.
Сонное царство маркетингового отдела содрогается, когда дверь распахивается от сильного удара ноги…
— Вот вы маркетологи постоянно просите деньги, на новые тесты, на подготовку новых баннеров, а зачем? Я хочу видеть отдачу каждого вложенного рубля, вплоть до объявлений. Вплоть до креативов и таргетингов.
Руководитель
Маркетологу в таком случае справедливо ответить, вот нужно Х рублей на Х сервисов и аналитика и сделаем вам такую отчётность. Чаще всего Х рублей нет, поэтому будем делать своими руками и бесплатно.
Какие данные нам понадобятся для анализа объявлений Вконтакте?
Руководитель сказал, что отчёт по таргетированной рекламе должен содержать сумму продаж. Значит, нам нужна выгрузка из CRM с данными по сумме и отгруженным заявкам.
Ещё отчёт должен содержать затраты на рекламу — это статистика из Вконтакте.
Вероятнее всего, руководитель захочет видеть какие-то промежуточные цели из веб-аналитики. Соответственно это Яндекс Метрика.
Источники данных для анализа рекламы Вконтакте
Привёл их на скриншоте выше. Скриншот важен, т.к. мы постепенно соберём всю архитектуру нашего отчёт в одной картинке. Про архитектуру аналитического решения можно почитать тут.
Далее мы будем объединять данные и в конечном итоге получим такую структуру.
Архитектура сквозной отчётности для таргетированной рекламы Вконтакте
Что дальше?
Мы определились с источниками и теперь нам необходимо вытащить оттуда данные для отчёта. Но предварительно создадим Гугл Таблицу с листами под каждый из источников.
Статистика рекламы Вконтакте
Итак, у нас есть лист под данные из Вк. Осталось их достать. Тут я рекомендую использовать сервис Альбато и промежуточную Гугл Таблицу. Без Альбато выгрузка не получится, т.к. только с ней или иным образом по API можно вытащить нужный массив данных с ad-id, ad-name, campaign-id, campaign-name.
Я не стал включать в текущую статью инструкцию, как это сделать, т.к. текста было бы очень много. Вместо этого я описал процесс связки статистики Вк и Гугл таблиц в отдельной статье.
Итоговая выгрузка статистики из Вконтакте с объявлениями и кампаниями в одном наборе будет выглядеть следующим образом. Единственный момент (очень важно!) выгрузку из Альбато нужно перевести в сводную, чтобы вывести уникальные значения объявлений и только потом копировать.
Выгрузка статистики из Вконтакте с объявлениями и кампаниями в одном наборе
Ссылку на этот лист в Гугл Таблице я сразу привожу тут. Так вам будет проще разобраться.
Кстати, Альбато не панацея, если вы не хотите использовать его, то аналогичную конструкцию можно собрать более длинным путём, сначала выгрузив из статистики рекламы Вконтакте данные по объявлениям и потом обогатив их названиями кампаний и id кампаний в дополнительных столбцах.
На листе вы можете заметить дополнительные столбцы зелёного цвета. На «date» можете не обращать внимания, это я тестировал свои варианты. А вот «key» критически важен, там формула склеивает название кампании с id объявления — это критически важно, т.к. с помощью ключа в дальнейшем мы склеим разные источники данных.
Таким образом, данные по рекламе Вконтакте у нас готовы.
Данные из Яндекс Метрики по таргетированной рекламе
Теперь достаём данные из Метрики. Для этого идём в отчёт «метки UTM», добавляем нужные цели для анализа и выгружаем всё в табличку Excel.
Выгрузка данных по таргетированной рекламе из Вконтакте
Открываем Эксель и переносим данные оттуда на подготовленный лист в Гугле. Он тут.
Данные из Яндекс Метрики по таргетированной рекламе Вконтакте
В данном примере у нас три KPI цели: регистрации на вебинар, отправки форм, регистрации Timepad. Для них добавляем зелёный столбце где суммируем все KPI значения для удобства.
Также создаём ключ «key» аналогично Вконтакте.
На этом данные из Метрики готовы.
Данные из CRM по таргетированной рекламе
Чтобы выгрузить данные из CRM и они подошли в нашу отчётность, лиды в ней должны содержать utm-метки с рекламы. Если таковых нет, то построить отчёт по таргетированной рекламе до продаж не получится и придётся довольствоваться только Метрикой.
Итак выгружаем Excel или csv файл из вашей CRM, который будет содержать следующие поля. Лист с выгрузкой тут.
Данные из CRM по таргетированной рекламе Вконтакте
Аналогичным образом прошлым шагам добавляем уникальный ключ key. Всё готово.
Справочная таблица для склейки данных
Чтобы объединить данные, нам нужна будет справочная таблица. Её формируем на этом листе, вставляя туда данные из листа «ads».
Справочная таблица для склейки данных
Это основная таблица нашего отчёта. Во-первых добавляем для неё параметр key. Во-вторых вытаскиваем множество значений из названия объявлений и кампании, они тоже выделены зелёным и содержат: название запуска; направление подразделения бизнеса; формат визуала.
Фактически вы можете занести в название объявления любой параметр и в дальнейшем посмотреть статистику по нему в отчётности.
Итого у нас получается 4 листа с разными данными для таргетинга. Их можно объединить с помощью ключа key, что и сделаем далее.
Объединение данных сквозной отчётности по таргетированной рекламе
Для этого создаём пустой лист и с помощью функции QUERY переносим первые данные из справочной таблицы.
функция query для переноса данных с другого листа
Далее нам необходимо с помощью функции ВПР (на англ. VLOOKUP) к ключу из столбца А добавить значения из листов с источниками данных: Вконтакте; Метрика; CRM.
Функция VLOOKUP для объединения разных данных
Таким образом мы формируем общий массив данных в одной большой таблице. Уникальный ключ это «key» и к нему данные из всех источников.
Кто дочитал до сюда, большие молодцы! Самое сложно позади, осталось чуть-чуть.
Формируем сквозной отчёт по таргетированной рекламе
Наверное самое простое, что нужно сделать. Выделяем всю таблицу данных на листе «adset» и формируем сводную таблицу на новый лист. Назовём его «Отчёт».
Сводная таблица по таргетированной рекламе
На выходе получаем табличку, в которую добавляем нужные нам строки и значения. Я вывел в строки Названия запусков и кампании с объявлениями, а в значения всю воронку от статистики Вконтакте, до целей Метрики и продаж из CRM.
Сквозная аналитика по таргетированной рекламе Вконтакте
В таблице светлыми тонами выделены расчётные столбцы, которых нет в «adset» и которые я добавлял расчётными значениями. Например, стоимость клика СРС.
Стоимость клика через расчётное значение в Гугл Таблицах
Прочие отчёты
Приведённый пример — это лишь один из возможных вариантов отчёта. Например, можно посмотреть статистику до содержимого объявлений, которые мы добавляли на листе «settings».
Отчёт по таргетированной рекламе до типа креатива в объявлении
Плюсы и минусы ручной отчётности по таргету в Гугл Таблицах
Привёл плюсы и минусы построения такой отчётности из тех, что пришли в голову. Если что пишите в комментарии, добавлю, чего не учёл.
Плюсы:
Отчёт бесплатен;
Построение отчёта позволяет лучше разбираться в рекламе;
Отчёт не привязан к типу устройства и операционной системе;
Отчёт просто передать на другое лицо при смене ответственного;
В отчёт быстро и легко можно добавить новые срезы и сущности.
Минусы:
Ручная работа при построении отчёта может вести к ошибкам;
Нужно тщательно размечать объявления с помощью utm-меток. Но в целом это требование обязательно для любого рекламного запуска;
Если в отчёте будут сотни тысяч строк — Гугл Таблицы станут сильно тормозить.
Время на отчётность
Подобный отчёт я могу собрать за час с учётом добавления в него уже работающих рекламных запусков и формул под нейминг объявлений и кампаний.
Обновление занимает не более получаса, в зависимости от количества запущенных кампаний.
Если вам кажется, что при автоматической отчётности вы сможете сэкономить на этом время — вы заблуждаетесь. Например, маркетолог допустил ошибку в названии объявления, из-за чего сломался фильтр и в отчётности вы получили значение none. В Гугл Таблицах найти такую ошибку дело 5 минут силами маркетолога. В базе данных автоматической отчётности ошибку найти гораздо дольше и править её должен только аналитик, собирающий ранее отчётность.
Альтернативы Гугл таблицам для отчётности по таргетированной рекламе
На практике я редко использую Гугл таблицы и описанный в статье метод, т.к. анализ эффективности таргетированной рекламы гораздо проще делать с помощью Excel и Power Query или Power BI. Там мы не используем функцию ВПР вовсе.
Если вам интересно научиться собирать сквозную отчётность по таргету на Excel или Power BI ждите моей следующей статьи. Но, напоминаю, Power Query и Power BI не дружат с операционной системой Mac.
Заключение
Поздравляю, вы стали сильнее. Теперь директор, не сможет отказать в дополнительном бюджете на окупаемые инструменты, ведь у вас будут доказательства на основе цифр. Успехов!  Кадр из мультфильма Star Wars: But Only Jedi Sha'a Gi  Всем привет, меня зовут Злобин Павел. Я старший джедай или маркетолог-аналитик. Моя задача поддерживать и улучшать клиентские проекты, а чтобы это делать на основе цифр, мне нужна отчётность до продаж. Вот про неё и хочу рассказать в статье. Отчётность можно строить по разному и с помощью разных инструментов, каждый со своими ограничениями. Я буду использовать самый доступный и бесплатный — Гугл Таблицы, о да. Проверочные вопросы, на которые может ответить отчёт из данной статьи я указал ниже. Если вы не знаете, как на них отвечать при вашей текущей отчётности — статья для вас. Сколько продаж приводит каждое конкретное объявление?
Какова стоимость продажи на конкретном объявлении?
Какой формат визуала в объявлениях приносит больше продаж?
Таргет на что самый окупаемый?
Можете ли вы сами поправить слетевший фильтр?
Если появится значение none, вы самостоятельно найдёте в чём причина? Сколько продаж приводит каждое конкретное объявление? Сколько продаж приводит каждое конкретное объявление? Какова стоимость продажи на конкретном объявлении? Какова стоимость продажи на конкретном объявлении? Какой формат визуала в объявлениях приносит больше продаж? Какой формат визуала в объявлениях приносит больше продаж? Таргет на что самый окупаемый? Таргет на что самый окупаемый? Можете ли вы сами поправить слетевший фильтр? Можете ли вы сами поправить слетевший фильтр? Если появится значение none, вы самостоятельно найдёте в чём причина? Если появится значение none, вы самостоятельно найдёте в чём причина? Для затравки, приведу пример готового сводного отчёта.  Отчёт по таргетированной рекламе до продаж Задача Чтобы было намного проще, давайте представим, что у нас есть задача от руководства на аналитику рекламы Вконтакте и нам необходимо придумать решение. Сонное царство маркетингового отдела содрогается, когда дверь распахивается от сильного удара ноги…
— Вот вы маркетологи постоянно просите деньги, на новые тесты, на подготовку новых баннеров, а зачем? Я хочу видеть отдачу каждого вложенного рубля, вплоть до объявлений. Вплоть до креативов и таргетингов.
Руководитель Сонное царство маркетингового отдела содрогается, когда дверь распахивается от сильного удара ноги… Сонное царство маркетингового отдела содрогается, когда дверь распахивается от сильного удара ноги… — Вот вы маркетологи постоянно просите деньги, на новые тесты, на подготовку новых баннеров, а зачем? Я хочу видеть отдачу каждого вложенного рубля, вплоть до объявлений. Вплоть до креативов и таргетингов. Вот вы маркетологи постоянно просите деньги, на новые тесты, на подготовку новых баннеров, а зачем? Я хочу видеть отдачу каждого вложенного рубля, вплоть до объявлений. Вплоть до креативов и таргетингов. Руководитель Руководитель Руководитель Маркетологу в таком случае справедливо ответить, вот нужно Х рублей на Х сервисов и аналитика и сделаем вам такую отчётность. Чаще всего Х рублей нет, поэтому будем делать своими руками и бесплатно. Какие данные нам понадобятся для анализа объявлений Вконтакте? Руководитель сказал, что отчёт по таргетированной рекламе должен содержать сумму продаж. Значит, нам нужна выгрузка из CRM с данными по сумме и отгруженным заявкам. Ещё отчёт должен содержать затраты на рекламу — это статистика из Вконтакте. Вероятнее всего, руководитель захочет видеть какие-то промежуточные цели из веб-аналитики. Соответственно это Яндекс Метрика. Источники данных для анализа рекламы Вконтакте  Источники данных для анализа рекламы Вконтакте Привёл их на скриншоте выше. Скриншот важен, т.к. мы постепенно соберём всю архитектуру нашего отчёт в одной картинке. Про архитектуру аналитического решения можно почитать тут. Далее мы будем объединять данные и в конечном итоге получим такую структуру.  Архитектура сквозной отчётности для таргетированной рекламы Вконтакте Что дальше? Мы определились с источниками и теперь нам необходимо вытащить оттуда данные для отчёта. Но предварительно создадим Гугл Таблицу с листами под каждый из источников.    Статистика рекламы Вконтакте Итак, у нас есть лист под данные из Вк. Осталось их достать. Тут я рекомендую использовать сервис Альбато и промежуточную Гугл Таблицу. Без Альбато выгрузка не получится, т.к. только с ней или иным образом по API можно вытащить нужный массив данных с ad-id, ad-name, campaign-id, campaign-name. ad-id, ad-name, campaign-id, campaign-name. Я не стал включать в текущую статью инструкцию, как это сделать, т.к. текста было бы очень много. Вместо этого я описал процесс связки статистики Вк и Гугл таблиц в отдельной статье. отдельной статье    Итоговая выгрузка статистики из Вконтакте с объявлениями и кампаниями в одном наборе будет выглядеть следующим образом. Единственный момент (очень важно!) выгрузку из Альбато нужно перевести в сводную, чтобы вывести уникальные значения объявлений и только потом копировать. Единственный момент (очень важно!)  Выгрузка статистики из Вконтакте с объявлениями и кампаниями в одном наборе Ссылку на этот лист в Гугл Таблице я сразу привожу тут. Так вам будет проще разобраться. этот лист Кстати, Альбато не панацея, если вы не хотите использовать его, то аналогичную конструкцию можно собрать более длинным путём, сначала выгрузив из статистики рекламы Вконтакте данные по объявлениям и потом обогатив их названиями кампаний и id кампаний в дополнительных столбцах. На листе вы можете заметить дополнительные столбцы зелёного цвета. На «date» можете не обращать внимания, это я тестировал свои варианты. А вот «key» критически важен, там формула склеивает название кампании с id объявления — это критически важно, т.к. с помощью ключа в дальнейшем мы склеим разные источники данных. date key Таким образом, данные по рекламе Вконтакте у нас готовы. Данные из Яндекс Метрики по таргетированной рекламе Теперь достаём данные из Метрики. Для этого идём в отчёт «метки UTM», добавляем нужные цели для анализа и выгружаем всё в табличку Excel.  Выгрузка данных по таргетированной рекламе из Вконтакте Открываем Эксель и переносим данные оттуда на подготовленный лист в Гугле. Он тут. Он тут  Данные из Яндекс Метрики по таргетированной рекламе Вконтакте В данном примере у нас три KPI цели: регистрации на вебинар, отправки форм, регистрации Timepad. Для них добавляем зелёный столбце где суммируем все KPI значения для удобства. Также создаём ключ «key» аналогично Вконтакте. key На этом данные из Метрики готовы. Данные из CRM по таргетированной рекламе Чтобы выгрузить данные из CRM и они подошли в нашу отчётность, лиды в ней должны содержать utm-метки с рекламы. Если таковых нет, то построить отчёт по таргетированной рекламе до продаж не получится и придётся довольствоваться только Метрикой. Итак выгружаем Excel или csv файл из вашей CRM, который будет содержать следующие поля. Лист с выгрузкой тут. Лист  Данные из CRM по таргетированной рекламе Вконтакте Аналогичным образом прошлым шагам добавляем уникальный ключ key. Всё готово. Справочная таблица для склейки данных Чтобы объединить данные, нам нужна будет справочная таблица. Её формируем на этом листе, вставляя туда данные из листа «ads». этом листе  Справочная таблица для склейки данных Это основная таблица нашего отчёта. Во-первых добавляем для неё параметр key. Во-вторых вытаскиваем множество значений из названия объявлений и кампании, они тоже выделены зелёным и содержат: название запуска; направление подразделения бизнеса; формат визуала. Фактически вы можете занести в название объявления любой параметр и в дальнейшем посмотреть статистику по нему в отчётности. Итого у нас получается 4 листа с разными данными для таргетинга. Их можно объединить с помощью ключа key, что и сделаем далее. key Объединение данных сквозной отчётности по таргетированной рекламе Для этого создаём пустой лист и с помощью функции QUERY переносим первые данные из справочной таблицы. пустой лист  функция query для переноса данных с другого листа Далее нам необходимо с помощью функции ВПР (на англ. VLOOKUP) к ключу из столбца А добавить значения из листов с источниками данных: Вконтакте; Метрика; CRM.  Функция VLOOKUP для объединения разных данных Таким образом мы формируем общий массив данных в одной большой таблице. Уникальный ключ это «key» и к нему данные из всех источников. «key» Кто дочитал до сюда, большие молодцы! Самое сложно позади, осталось чуть-чуть. Формируем сквозной отчёт по таргетированной рекламе Наверное самое простое, что нужно сделать. Выделяем всю таблицу данных на листе «adset» и формируем сводную таблицу на новый лист. Назовём его «Отчёт».  Сводная таблица по таргетированной рекламе На выходе получаем табличку, в которую добавляем нужные нам строки и значения. Я вывел в строки Названия запусков и кампании с объявлениями, а в значения всю воронку от статистики Вконтакте, до целей Метрики и продаж из CRM. получаем табличку  Сквозная аналитика по таргетированной рекламе Вконтакте В таблице светлыми тонами выделены расчётные столбцы, которых нет в «adset» и которые я добавлял расчётными значениями. Например, стоимость клика СРС.  Стоимость клика через расчётное значение в Гугл Таблицах Прочие отчёты Приведённый пример — это лишь один из возможных вариантов отчёта. Например, можно посмотреть статистику до содержимого объявлений, которые мы добавляли на листе «settings».  Отчёт по таргетированной рекламе до типа креатива в объявлении Плюсы и минусы ручной отчётности по таргету в Гугл Таблицах Привёл плюсы и минусы построения такой отчётности из тех, что пришли в голову. Если что пишите в комментарии, добавлю, чего не учёл. Плюсы: Плюсы: Отчёт бесплатен;
Построение отчёта позволяет лучше разбираться в рекламе;
Отчёт не привязан к типу устройства и операционной системе;
Отчёт просто передать на другое лицо при смене ответственного;
В отчёт быстро и легко можно добавить новые срезы и сущности. Отчёт бесплатен; Отчёт бесплатен; Построение отчёта позволяет лучше разбираться в рекламе; Построение отчёта позволяет лучше разбираться в рекламе; Отчёт не привязан к типу устройства и операционной системе; Отчёт не привязан к типу устройства и операционной системе; Отчёт просто передать на другое лицо при смене ответственного; Отчёт просто передать на другое лицо при смене ответственного; В отчёт быстро и легко можно добавить новые срезы и сущности. В отчёт быстро и легко можно добавить новые срезы и сущности.]]></text>
</doc>
