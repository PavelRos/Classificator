<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Other]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[MYGAMES]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-07-29, 10:30]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/mygames/blog/679748/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Создание фотореалистичных персонажей: разбираем пайплайн и перечисляем самые частые ошибки]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Блог компании MY.GAMES]]></item>
		<item type="str"><![CDATA[Работа с 3D-графикой]]></item>
		<item type="str"><![CDATA[Разработка игр]]></item>
		<item type="str"><![CDATA[Игры и игровые консоли]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[3d]]></item>
		<item type="str"><![CDATA[цифровые аватары]]></item>
		<item type="str"><![CDATA[моделирование]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[У фотореалистичных моделей есть множество применений: персонажи в играх, цифровые инфлюенсеры, цифровые помощники, CGI-персонажи и так далее. В перспективе любой человек сможет использовать своего цифрового двойника для взаимодействия с метавселенными. 
Художник по созданию цифровых двойников Марлон Нуньес на конференции TBD Pro Art выступил с докладом о моделировании реалистичных персонажей. Он описал свой рабочий пайплайн, а также дал несколько советов, как сделать модели героев более правдоподобными. Кроме того, специалисты из студий MY.GAMES поделились опытом того, какие ограничения есть у современных конструкторов персонажей. 
Процесс создания моделей
Создание цифрового двойника мало отличается от стандартного пайплайна моделирования персонажа — сначала нужно сделать сам меш, нанести текстуры, добавить шейдеры. Это все можно делать с нуля, а можно воспользоваться конструктором. Один из наиболее известных проектов в этой сфере — MetaHuman от Epic Games, в котором можно достаточно быстро создавать реалистичных персонажей — можно взять готовые наработки и использовать их в качестве основы.
Тем не менее проблема MetaHuman, как и многих других конструкторов, заключается в том, что все персонажи получаются так или иначе похожими друг на друга. И в любом случае разработчикам придется подстраивать модель под свою игру. Но благодаря такому редактору процесс поиска подходящего образа занимает намного меньше времени.
Такой подход позволяет сразу включиться в процесс создания образа персонажа без долгого «входного этапа», когда сначала надо взять заготовку и постепенно ее доводить до финала, только мысленно представляя конечный результат. Здесь ты буквально через пару кликов уже получаешь образ, который начинаешь править и изменять под свою идею.
Очевидно, что основным плюсом такого подхода является возможность относительно быстро создать бесконечное количество вариаций персонажей. Это удобно для небольшой команды с ограниченными средствами.
Павел Ошарин, ведущий моделлер по персонажам в Allods Team
Высокая скорость создания персонажей при помощи конструктора полезна еще и в тех случаях, когда для игры требуется огромное количество разнообразных NPC, населяющих виртуальный мир.
Если у вас игра вроде Hitman и вам требуется создать довольно много фоновых персонажей, художник может в относительно короткое время сделать армию таких героев, доработать их и использовать в дальнейшем.
Ведь не стоит забывать, что при создании персонажей художник довольно много времени тратит на техническую часть. Например, на прошлом проекте, да и на текущем (хоть он и не про высокореалистичность), я использовал топологию, UV-раскладку и текстуры (пусть и с доработками) из MetaHuman. А это далеко не самая веселая часть создания персонажей.
Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team
Чтобы создать правдоподобного цифрового двойника, моделлеру нужны референсы. По словам Марлона Нуньеса, если нужно скопировать внешность реального человека, то для этого будет достаточно двух фотографий — в профиль и в фас. Это позволяет увидеть пропорции лица, его анатомию, расстояние между его частями. 
В своей работе Марлон использует сразу несколько программ: скульптинг он делает в ZBrush, рендеринг в Maya, Houdini применяет для волос, Marvelous Designer для одежды, текстуры делает в Mari и Photoshop.
Когда дело доходит до самого скульптинга, самое главное — это не знание инструментов в вашем редакторе (хоть это и важно), а понимание анатомии. Без этого у вас не получится создать правдоподобное лицо. Очень важно уделить изучению анатомии много внимания — засесть за книги и обучающие материалы.
Есть несколько способов скульптинга: например, когда Марлон создавал голову Ганди, он использовал «метод сфер» — художник создавал сферы, потом объединял их, упрощал и менял форму. 
Ганди
Сейчас Марлон использует иной подход — он смотрит на самые выделяющиеся части головы и представляет их в виде упрощенных геометрических форм. Это позволяет создать объем лица и сделать его правдоподобным. 
Затем моделлер наращивает «мясо» — добавляет мягкие ткани. Мышцы на лице зачастую незаметны, но именно они во многом формируют внешность героя. 
Для правдоподобности модели важно воссоздать не только общее строение лица, но и мелкие детали при помощи текстур и шейдеров. Например, поры на коже. При этом не обязательно делать их с нуля — в интернете можно найти бесплатные библиотеки высококачественных текстур, а потом нанести на собственную модель.
Следующий важный этап — создание волос. Есть множество разных техник, которые позволяют смоделировать прическу. Например, волосы можно создать в Houdini, но овладеть этим редактором достаточно сложно. Или же в Maya: разобраться в программе достаточно просто, но там очень много багов.
Пример создания волос в Houdini
Заключительный этап — LookDev — финальное представление персонажей: художник настраивает свет, текстуры, волосы. Чтобы понять, как в итоге должен выглядеть двойник, Марлон советует использовать качественные референсы. Например, сайт Дэниэля Бушонга, на котором представлены подробные фотографии человеческих лиц. На изображениях можно увидеть, что на разных участках лица поры отличаются по размеру, кожа имеет разную фактуру, а свет иногда может преломляться неожиданным образом. Все это важно учитывать в своей работе, чтобы добиться максимально правдоподобного результата. 
Здесь Марлон старался передать разные оттенки кожи и ее переменчивую фактуру
Распространенные ошибки
Явные ошибки анатомии
На примере ниже все достаточно неплохо с пропорциями, но у автора явно недостаточно знаний об анатомии. Даже если отрендерить картинку, у зрителя будет создаваться ощущение, что с персонажем что-то не так. 
Мы сталкиваемся с лицами, позами, фигурами людей (бросаем быстрый взгляд, оцениваем) всю нашу жизнь. Мы выбираем партнеров, друзей, начиная с оценки внешних данных. Мы ловим на лету эмоцию по одной походке, по изгибу бровей и так далее. Можно сказать, что каждый человек умеет читать анатомию тела и лица лучше, чем что-либо другое в жизни, даже если никогда специально этому не учился. 
Любая фальшь, неточность, небрежность в лице и образе сразу бросается в глаза, даже если не можешь это точно сформулировать. Это когда возникает мысль «что-то у него не так с лицом».
Павел Ошарин, ведущий моделлер по персонажам в Allods Team
Неравномерное количество полигонов
Многие начинающие моделлеры начинают слишком рано использовать Subdivide для достижения большей детализации. Это приводит к тому, что модель становится неряшливой и неравномерной. Лучше всего уменьшать количество полигонов и стремиться к тому, чтобы разные части лица не слишком отличались друг от друга по количеству полигонов.
Плохой пример. Чем больше полигонов, тем сложнее управлять формой
Хороший пример — автор отлично передал форму лица и при этом не ударился в излишнюю детализацию
Человеческое лицо не выглядит так, словно покрыто мягкими тканями
На многих работах начинающих моделлеров можно заметить, что у них не получается добиться плавности лица. Слишком резкие переходы и изгибы могут испортить общее впечатление от модели. 
С правильной методологией, знанием анатомии и инструментов можно добиться восхитительных результатов. Но важно помнить, что одних фотореалистичных героев недостаточно, чтобы графика в игре выглядела красивой — как минимум их анимация тоже должна соответствовать качеству моделей.
Как правило, разработчики стараются, чтобы модели персонажей и анимации максимально соответствовали стилистике проекта. Если на проекте используются высокореалистичные персонажи, то игроки подсознательно будут ожидать от них соответствующего поведения и слишком гипертрофированные или просто недоработанные анимации, естественно, будут заметны. Особенно это касается лиц персонажей.
Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team
Конечно, и весь остальной игровой мир должен соответствовать качеству персонажей — не должно быть так, что NPC выполнены в фотореалистичном стиле, а окружение — кое-как слепленным из доступных ассетов. 
Просто реалистичных персонажей недостаточно. Чем выше по качеству персонажи, тем выше по качеству должно быть всё остальное. А чем выше качество, тем больше времени уходит на проект. Разработка проекта, особенно фотореалистичного, отнимает немало времени, и даже если вы сократите немного времени на создании хороших «голов», то всё остальное никуда не денется. 
Нужно качественно всё это рендерить, освещать, текстурить, создавать сложные шейдеры, настраивать взаимодействие с окружающим миров, физику ткани, физику взаимодействия с флорой и так далее.
Михаил Иваненко, 3D-художник в Allods Team У фотореалистичных моделей есть множество применений: персонажи в играх, цифровые инфлюенсеры, цифровые помощники, CGI-персонажи и так далее. В перспективе любой человек сможет использовать своего цифрового двойника для взаимодействия с метавселенными.  Художник по созданию цифровых двойников Марлон Нуньес на конференции TBD Pro Art выступил с докладом о моделировании реалистичных персонажей. Он описал свой рабочий пайплайн, а также дал несколько советов, как сделать модели героев более правдоподобными. Кроме того, специалисты из студий MY.GAMES поделились опытом того, какие ограничения есть у современных конструкторов персонажей.  докладом   Процесс создания моделей Создание цифрового двойника мало отличается от стандартного пайплайна моделирования персонажа — сначала нужно сделать сам меш, нанести текстуры, добавить шейдеры. Это все можно делать с нуля, а можно воспользоваться конструктором. Один из наиболее известных проектов в этой сфере — MetaHuman от Epic Games, в котором можно достаточно быстро создавать реалистичных персонажей — можно взять готовые наработки и использовать их в качестве основы. Тем не менее проблема MetaHuman, как и многих других конструкторов, заключается в том, что все персонажи получаются так или иначе похожими друг на друга. И в любом случае разработчикам придется подстраивать модель под свою игру. Но благодаря такому редактору процесс поиска подходящего образа занимает намного меньше времени. Такой подход позволяет сразу включиться в процесс создания образа персонажа без долгого «входного этапа», когда сначала надо взять заготовку и постепенно ее доводить до финала, только мысленно представляя конечный результат. Здесь ты буквально через пару кликов уже получаешь образ, который начинаешь править и изменять под свою идею.
Очевидно, что основным плюсом такого подхода является возможность относительно быстро создать бесконечное количество вариаций персонажей. Это удобно для небольшой команды с ограниченными средствами.
Павел Ошарин, ведущий моделлер по персонажам в Allods Team Такой подход позволяет сразу включиться в процесс создания образа персонажа без долгого «входного этапа», когда сначала надо взять заготовку и постепенно ее доводить до финала, только мысленно представляя конечный результат. Здесь ты буквально через пару кликов уже получаешь образ, который начинаешь править и изменять под свою идею. Очевидно, что основным плюсом такого подхода является возможность относительно быстро создать бесконечное количество вариаций персонажей. Это удобно для небольшой команды с ограниченными средствами. Павел Ошарин, ведущий моделлер по персонажам в Allods Team Павел Ошарин, ведущий моделлер по персонажам в Allods Team Высокая скорость создания персонажей при помощи конструктора полезна еще и в тех случаях, когда для игры требуется огромное количество разнообразных NPC, населяющих виртуальный мир. Если у вас игра вроде Hitman и вам требуется создать довольно много фоновых персонажей, художник может в относительно короткое время сделать армию таких героев, доработать их и использовать в дальнейшем.
Ведь не стоит забывать, что при создании персонажей художник довольно много времени тратит на техническую часть. Например, на прошлом проекте, да и на текущем (хоть он и не про высокореалистичность), я использовал топологию, UV-раскладку и текстуры (пусть и с доработками) из MetaHuman. А это далеко не самая веселая часть создания персонажей.
Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Если у вас игра вроде Hitman и вам требуется создать довольно много фоновых персонажей, художник может в относительно короткое время сделать армию таких героев, доработать их и использовать в дальнейшем. Ведь не стоит забывать, что при создании персонажей художник довольно много времени тратит на техническую часть. Например, на прошлом проекте, да и на текущем (хоть он и не про высокореалистичность), я использовал топологию, UV-раскладку и текстуры (пусть и с доработками) из MetaHuman. А это далеко не самая веселая часть создания персонажей. Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Чтобы создать правдоподобного цифрового двойника, моделлеру нужны референсы. По словам Марлона Нуньеса, если нужно скопировать внешность реального человека, то для этого будет достаточно двух фотографий — в профиль и в фас. Это позволяет увидеть пропорции лица, его анатомию, расстояние между его частями.  референсы В своей работе Марлон использует сразу несколько программ: скульптинг он делает в ZBrush, рендеринг в Maya, Houdini применяет для волос, Marvelous Designer для одежды, текстуры делает в Mari и Photoshop. Когда дело доходит до самого скульптинга, самое главное — это не знание инструментов в вашем редакторе (хоть это и важно), а понимание анатомии. Без этого у вас не получится создать правдоподобное лицо. Очень важно уделить изучению анатомии много внимания — засесть за книги и обучающие материалы. скульптинга Есть несколько способов скульптинга: например, когда Марлон создавал голову Ганди, он использовал «метод сфер» — художник создавал сферы, потом объединял их, упрощал и менял форму.   Ганди Сейчас Марлон использует иной подход — он смотрит на самые выделяющиеся части головы и представляет их в виде упрощенных геометрических форм. Это позволяет создать объем лица и сделать его правдоподобным.  Затем моделлер наращивает «мясо» — добавляет мягкие ткани. Мышцы на лице зачастую незаметны, но именно они во многом формируют внешность героя.   Для правдоподобности модели важно воссоздать не только общее строение лица, но и мелкие детали при помощи текстур и шейдеров. Например, поры на коже. При этом не обязательно делать их с нуля — в интернете можно найти бесплатные библиотеки высококачественных текстур, а потом нанести на собственную модель. текстур и шейдеров   Следующий важный этап — создание волос. Есть множество разных техник, которые позволяют смоделировать прическу. Например, волосы можно создать в Houdini, но овладеть этим редактором достаточно сложно. Или же в Maya: разобраться в программе достаточно просто, но там очень много багов. создание волос  Пример создания волос в Houdini Заключительный этап — LookDev — финальное представление персонажей: художник настраивает свет, текстуры, волосы. Чтобы понять, как в итоге должен выглядеть двойник, Марлон советует использовать качественные референсы. Например, сайт Дэниэля Бушонга, на котором представлены подробные фотографии человеческих лиц. На изображениях можно увидеть, что на разных участках лица поры отличаются по размеру, кожа имеет разную фактуру, а свет иногда может преломляться неожиданным образом. Все это важно учитывать в своей работе, чтобы добиться максимально правдоподобного результата.  LookDev сайт Дэниэля Бушонга сайт Дэниэля Бушонга  Здесь Марлон старался передать разные оттенки кожи и ее переменчивую фактуру Распространенные ошибки Явные ошибки анатомии Явные ошибки анатомии На примере ниже все достаточно неплохо с пропорциями, но у автора явно недостаточно знаний об анатомии. Даже если отрендерить картинку, у зрителя будет создаваться ощущение, что с персонажем что-то не так.    Мы сталкиваемся с лицами, позами, фигурами людей (бросаем быстрый взгляд, оцениваем) всю нашу жизнь. Мы выбираем партнеров, друзей, начиная с оценки внешних данных. Мы ловим на лету эмоцию по одной походке, по изгибу бровей и так далее. Можно сказать, что каждый человек умеет читать анатомию тела и лица лучше, чем что-либо другое в жизни, даже если никогда специально этому не учился. 
Любая фальшь, неточность, небрежность в лице и образе сразу бросается в глаза, даже если не можешь это точно сформулировать. Это когда возникает мысль «что-то у него не так с лицом».
Павел Ошарин, ведущий моделлер по персонажам в Allods Team Мы сталкиваемся с лицами, позами, фигурами людей (бросаем быстрый взгляд, оцениваем) всю нашу жизнь. Мы выбираем партнеров, друзей, начиная с оценки внешних данных. Мы ловим на лету эмоцию по одной походке, по изгибу бровей и так далее. Можно сказать, что каждый человек умеет читать анатомию тела и лица лучше, чем что-либо другое в жизни, даже если никогда специально этому не учился.  Любая фальшь, неточность, небрежность в лице и образе сразу бросается в глаза, даже если не можешь это точно сформулировать. Это когда возникает мысль «что-то у него не так с лицом». Павел Ошарин, ведущий моделлер по персонажам в Allods Team Павел Ошарин, ведущий моделлер по персонажам в Allods Team Неравномерное количество полигонов Неравномерное количество полигонов Многие начинающие моделлеры начинают слишком рано использовать Subdivide для достижения большей детализации. Это приводит к тому, что модель становится неряшливой и неравномерной. Лучше всего уменьшать количество полигонов и стремиться к тому, чтобы разные части лица не слишком отличались друг от друга по количеству полигонов.  Плохой пример. Чем больше полигонов, тем сложнее управлять формой  Хороший пример — автор отлично передал форму лица и при этом не ударился в излишнюю детализацию Человеческое лицо не выглядит так, словно покрыто мягкими тканями Человеческое лицо не выглядит так, словно покрыто мягкими тканями На многих работах начинающих моделлеров можно заметить, что у них не получается добиться плавности лица. Слишком резкие переходы и изгибы могут испортить общее впечатление от модели.   С правильной методологией, знанием анатомии и инструментов можно добиться восхитительных результатов. Но важно помнить, что одних фотореалистичных героев недостаточно, чтобы графика в игре выглядела красивой — как минимум их анимация тоже должна соответствовать качеству моделей. Как правило, разработчики стараются, чтобы модели персонажей и анимации максимально соответствовали стилистике проекта. Если на проекте используются высокореалистичные персонажи, то игроки подсознательно будут ожидать от них соответствующего поведения и слишком гипертрофированные или просто недоработанные анимации, естественно, будут заметны. Особенно это касается лиц персонажей.
Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Как правило, разработчики стараются, чтобы модели персонажей и анимации максимально соответствовали стилистике проекта. Если на проекте используются высокореалистичные персонажи, то игроки подсознательно будут ожидать от них соответствующего поведения и слишком гипертрофированные или просто недоработанные анимации, естественно, будут заметны. Особенно это касается лиц персонажей. Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Иван Скородумов, ведущий 3D-художник по персонажам в Allods Team Конечно, и весь остальной игровой мир должен соответствовать качеству персонажей — не должно быть так, что NPC выполнены в фотореалистичном стиле, а окружение — кое-как слепленным из доступных ассетов.  Просто реалистичных персонажей недостаточно. Чем выше по качеству персонажи, тем выше по качеству должно быть всё остальное. А чем выше качество, тем больше времени уходит на проект. Разработка проекта, особенно фотореалистичного, отнимает немало времени, и даже если вы сократите немного времени на создании хороших «голов», то всё остальное никуда не денется. 
Нужно качественно всё это рендерить, освещать, текстурить, создавать сложные шейдеры, настраивать взаимодействие с окружающим миров, физику ткани, физику взаимодействия с флорой и так далее.
Михаил Иваненко, 3D-художник в Allods Team Просто реалистичных персонажей недостаточно. Чем выше по качеству персонажи, тем выше по качеству должно быть всё остальное. А чем выше качество, тем больше времени уходит на проект. Разработка проекта, особенно фотореалистичного, отнимает немало времени, и даже если вы сократите немного времени на создании хороших «голов», то всё остальное никуда не денется.  Нужно качественно всё это рендерить, освещать, текстурить, создавать сложные шейдеры, настраивать взаимодействие с окружающим миров, физику ткани, физику взаимодействия с флорой и так далее. Михаил Иваненко, 3D-художник в Allods Team Михаил Иваненко, 3D-художник в Allods Team ]]></text>
</doc>
