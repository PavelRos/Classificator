<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[nanocad]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-01, 18:13]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/nanosoft/blog/702952/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[nanoCAD BIM Вентиляция – в целом и в частностях]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Блог компании Нанософт разработка]]></item>
		<item type="str"><![CDATA[CAD/CAM]]></item>
		<item type="str"><![CDATA[Инженерные системы]]></item>
		<item type="str"><![CDATA[Подготовка технической документации]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[nanocad]]></item>
		<item type="str"><![CDATA[вентиляция]]></item>
		<item type="str"><![CDATA[cad/cam]]></item>
		<item type="str"><![CDATA[bim]]></item>
		<item type="str"><![CDATA[импортозамещение]]></item>
		<item type="str"><![CDATA[сапр]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[Программное решение nanoCAD BIM Вентиляция базируется на новом ядре EVOS, что позволяет ему выйти на новый уровень информационного моделирования. Многопользовательская работа, вариативность модели, параметризация свойств и многое другое позволяют пользователю ускорить процесс моделирования, повысить качество выпускаемой документации.
Единая информационная модель
В папке проекта расположен файл с расширением .repository (рис. 1), где хранится вся информация о проекте. Это решение позволяет в автоматическом режиме сохранять историю всех изменений проекта. При закрытии файлов *.dwg без сохранения все внесенные изменения будут сохранены.
Рис. 1
Отображение модели может быть представлено в трехмерной (3D-вид), двумерной (планы) и табличной формах. Реализована двусторонняя связь между формами отображения и моделью.
Многопользовательская работа
Поддерживается одновременная работа множества пользователей над одним проектом. После внесения изменений в локальную копию пользователь может опубликовать их на сервере, предоставив к ним доступ остальным участникам проекта.
На основе набора локальных изменений создается коммит. Пользователь может переключаться между коммитами и таким образом отслеживать изменения.
Коммит относится к определенному набору (ветке) изменений и может быть опубликован как в текущую ветвь, так и в новую (рис. 2).
Рис. 2
Шаблоны компонентов
В программе есть набор готовых шаблонов, которые можно использовать при создании новых компонентов (рис. 3). В шаблонах изначально заложен набор свойств (опций), относящихся к данному типу компонента. Например, для помещения можно задать номер, температуру, категорию взрывопожарной и пожарной опасности и т.д.
Для шаблонов с требованиями МГЭ (табл. 1) добавляются
группы свойств PsetBuildingStoreyCommon и ExpCheckBuildingStorey.
Рис. 3
Таблица 1
Создание сборок
Сборка представляет собой тот же компонент, но с композиционной моделью вложенности. Оборудование может состоять из нескольких компонентов, каждый из которых также содержит вложенные компоненты.
Примером сборки служит, например, компонент, состоящий из вентилятора и гибкого соединителя (рис. 4).
Рис. 4
Каждый компонент может функционировать как в составе сборки, так и по отдельности. Например, вентилятор работает отдельно в случаях, когда не требуется мягкий соединитель.
Настройка видимости систем
Для видов с помощью настройки подсвечивания и скрытия систем (табл. 2) возможно несколько вариантов представления.
Таблица 2
Вы можете настроить нужные цвета систем и включить их отображение с помощью подсвечивания. На виде можно выбрать системы, которые будут отображаться. Кроме того, существует возможность регулировать отображение систем по этажам (табл. 3).
Таблица 3
Размещение УГО на плане
Для создания корректного плана условные графические обозначения (УГО) можно перемещать относительно оборудования за грип-точки. В случае УГО отображаются точки желтого цвета.
При добавлении УГО к элементам оборудование перемещается на непечатаемый слой (табл. 4).
Таблица 4
Оборудование и УГО автоматически размещаются на разных слоях, что позволяет регулировать их отображение.
Вентиляционные расчеты
Программа поддерживает использование различных типов оборудования с соответствующими им расчетными данными. Расчет запускается автоматически. Начинается он от элемента, который определен как «Вход в систему» и имеет параметры Максимально допустимая скорость воздуха и Температура воздуха (табл. 5).
На конечных элементах системы можно задавать расход воздуха.
Таблица 5
Для воздухораспределителей предусмотрена возможность задавать графики зависимости потери давления от скорости (рис. 5).
Рис. 5
Спецификации
Для проекта можно получить спецификацию на оборудование (рис. 6) – она создается щелчком правой кнопкой мыши на компоненте. Для дальнейшего редактирования возможен экспорт спецификации в Word или Excel.
Рис. 6
Позиция оборудования регулируется с помощью стрелок (рис. 7).
Рис. 7
При необходимости можно отключить в свойствах оборудования параметр Включать в спецификацию. В этом случае оборудование не будет отображаться в спецификации (рис. 8).
Рис. 8
Также для оборудования можно назначить Раздел в спецификации из предоставленного перечня (рис. 9).
Рис. 9
Параметризация свойств
Значения свойств задаются как в виде формул, так и в форме зависимостей.
Используя формулы, можно получить итог арифметических операций. Помимо средств работы с числовыми полями, в программе реализован функционал построения сложных строк из строковых переменных.
Например, можно сформировать выноски для круглого воздуховода с указанием его диаметра и длины (рис. 10).
Рис. 10
Формулы задаются отдельно для числителя и знаменателя выноски. В табл. 6 представлен пример написания формулы для числителя.
Таблица 6
Задание формул производится в окне Настройка формулы расчета значения (рис. 11). Более подробно процесс создания формул рассмотрен в разделе «nanoCAD BIM Вентиляция. Формулы».
Рис. 11
Для сборок особенно актуальна зависимость свойств (изменение свойства одного компонента в зависимости от свойства другого). Например, назначив сборке новое свойство цвета, можно регулировать цвет всех входящих в нее компонентов (рис. 12). Более подробно о зависимых свойствах мы расскажем в разделе «nanoCAD BIM Вентиляция. Зависимые свойства».
Рис. 12
В программе nanoCAD BIM Вентиляция реализована возможность создавать вложенные структуры. Сборка представляет собой компонент с композиционной моделью вложенности. Создадим сборку, состоящую из вентилятора и мягкого термостойкого соединителя.
Шаг 1. Создание оборудования, входящего в сборку
Сначала в проекте необходимо создать компоненты вентилятора и мягкого соединителя (табл. 7), а также указать необходимые для спецификации свойства, если оборудование будет использовано не только в составе сборки.
Таблица 7
Шаг 2. Создание компонента сборки
В проекте следует создать новый компонент и присвоить ему имя сборки (в нашем случае ВРАН9 25+СОМ). В созданный компонент мы будем подгружать входящее в него оборудование.
Новый компонент для сборки создается по тем же принципам, что и компонент для простого оборудования. Он может быть создан как на основе шаблона, так и без него (рис. 13).
Рис. 13
Шаг 3. Размещение оборудования в сборке
Чтобы разместить созданные вентилятор и соединитель в сборке, воспользуемся функцией Разместить экземпляр на плане (рис. 14).
Рис. 14
Следует правильно позиционировать оборудование относительно друг друга (выровнять соединитель по оси вентилятора).
Точку вставки сборки выберем по оси вентилятора (рис. 15).
Рис. 15
Проверить местоположение оборудования можно в BIM-свойствах (группа свойств Система координат модели) (рис. 16).
Рис. 16
Шаг 4. Настройка конфигурации сборки. Заполнение свойств
Для сборки, так же как и для других компонентов, можно настроить параметры в конфигураторе компонента (рис. 17).
Рис. 17
Если компонент создан не на основе шаблона, у него будут только системные опции. Из левого столбца с перечнем всех опций, возможных для добавления, можно выбрать нужные и добавить в конфигурацию компонента. Также есть возможность создать свою опцию (рис. 18).
Рис.18
Остается только заполнить свойства сборки. В параметре Описание в спецификации заполняем графу Наименование в спецификации на оборудование (рис. 19).
Рис. 19
Сборка готова!
 В программе nanoCAD BIM Вентиляция существует возможность задавать зависимости между свойствами компонентов.
Рассмотрим пример задания зависимости между свойством
цвета сборки и цветом входящего в нее оборудования. Сборка представляет собой
вентилятор с мягким соединителем.
Шаг 1. Создание новой опции для сборки
Для начала необходимо создать в сборке параметр, к которому будут обращаться зависимости. Заходим в конфигуратор компонента и создаем новую опцию (рис. 20).
Рис. 20
После создания опции переименуем ее и добавим к нашему компоненту (рис. 21).
Рис. 21
Теперь у нас имеется сборка ВРАН9 25+СОМ, в которой есть параметр Цвет сборки.
Шаг 2. Установка свойства экземпляра для параметра
Чтобы свойству могло быть задано значение зависимости, оно должно быть свойством экземпляра (то есть иметь возможность быть разным для установленных в проекте экземпляров).
В Менеджере проекта следует выбрать оборудование, в структуре компонента –графику оборудования, а в BIM-свойствах назначить параметру Цвет свойство экземпляра (рис. 22). Операцию необходимо проделать для всего оборудования, цвет которого будет зависим от цвета сборки.
Рис. 22
Все элементы графики в структуре компонента можно выбрать клавишей Shift и установить для параметра Цвет свойство экземпляра (рис. 23).
Рис. 23
Шаг 3. Назначение зависимости свойствам
Теперь, когда цвет оборудования задан параметром экземпляра, в структуре сборки можно назначить для него свойство зависимости.
Выбираем в Менеджере проекта сборку, в структуре компонента – элементы графики, а в BIM-свойствах для параметра Цвет устанавливаем зависимость (рис. 24).
Рис. 24
В открывшемся окне Настройка зависимости свойства выбираем параметр Цвет сборки (рис. 25). Таким образом мы связываем цвет графики входящего в сборку оборудования с параметром Цвет сборки.
Рис. 25
Теперь, изменяя параметр Цвет сборки, мы будем видеть, что цвет вложенного оборудования также изменился (рис. 26).
Рис. 26
Формулы в свойствах оборудования
С помощью формул можно работать как с числовыми, так и с текстовыми полями. Например, мы хотим, чтобы поле Описание в спецификации складывалось из полей Наименование и Серия.
Щелкнув правой кнопкой мыши по полю Описание в спецификации, выбираем пункт Задать значение в виде формулы (рис. 27).
Рис. 27
После этого откроется окно настройки формул расчета значений. В строке Формула расчета значения необходимо прописать свойства, которые будут выводиться в поле Описание в спецификации (рис. 28).
Рис. 28
Чтобы свойство было доступно для добавления в формулу, необходимо выбрать его в графе Свойства и, нажав на стрелочку, добавить в графу Зависимости (рис. 29).
Рис. 29
Нам требуется добавить в графу Зависимости свойства Наименование и Серия. В графе Зависимости свойствам присваиваются индексы – в порядке их добавления.
После добавления всех необходимых свойств можно приступить к написанию формулы.
Наша формула: {0}+" "+{1} . В кавычках заключен пробел, чтобы отделять друг от друга элементы текста (рис. 30).
Рис. 30
После написания формулы доступна кнопка Проверить. Если в формуле обнаружатся ошибки, строка подсветится красным. Для примера нажмем кнопку Проверить, предварительно заменив фигурные скобки квадратными.
Результат показан на рис. 31: формула прописана неверно, графа подсвечена красным, кнопка Сохранить не отображается.
Рис. 31
Примеры неправильного написания формул приведены в табл. 8.
Таблица 8
Если проверка выполнена успешно, появится кнопка Сохранить. Поле, для которого задана формула, будет помечено буквой f (рис. 32).
Рис. 32
Формулы в выносках
Создание выноски
 Для создания выноски необходимо создать шаблон оформления. Находим в Менеджере проекта раздел Шаблон оформления и щелкаем по нему правой кнопкой мыши. Присваиваем созданному шаблону имя: Воздуховод.
Чтобы создать шаблон выноски, щелкаем правой кнопкой мыши по шаблону оформления Воздуховод и выбираем пункт Добавить шаблон выноски (рис. 33).
Рис. 33
Двойным щелчком заходим в созданный шаблон и создаем выноску средствами панели Оформление. Написание формул будет осуществляться в свойствах созданной выноски (рис. 34).
Рис. 34
Задание формулы для выноски
Формульное значение выноски можно задать как для поля Числитель, так и для поля Знаменатель (рис. 35).
Рис. 35
оздадим выноску, где в числителе будет прописан диаметр воздуховода, а в знаменателе расход воздуха.
Сначала зададим значение в виде формулы для свойства Текст числителя (рис. 36):
щелкнем правой кнопкой мыши на поле Текст числителя и выберем пункт Задать значение в виде формулы;
выберем свойство Эквивалентный диаметр и добавим его в Зависимости;
напишем формулу: "Ø"+Tostring({0},"mm"). Знак диаметра можно выбрать в стандартной таблице символов;
проверим и сохраним написанную формулу.
Рис. 36
Для формулы в знаменателе нам потребуется свойство Расход воздуха. Чтобы оно появилось в структуре компонента выноски, нужно зайти в Конфигуратор компонента и добавить это свойство (рис. 37).
Рис. 37
Зададим значение для свойства Текст знаменателя (рис. 38):
щелкнем правой кнопкой мыши на поле Текст знаменателя и выберем пункт Задать значение в виде формулы;
выберем свойство Длина и добавим его в Зависимости;
напишем формулу: "L"+Tostring({0},"m3","h");
проверим и сохраним написанную формулу.
Рис. 38
Чтобы проверить работу выноски в проекте, установим выноску на вид (рис. 39).
Рис. 39
Функция To string()
Чаще других для формул используется функция To string(). Она нужна для перевода численного значения в строковое с указанием единиц измерения.
Примеры использования функции ToString() представлены в табл. 9.
Таблица 9
Анна Белозерова
ведущий специалист по инженерным BIM-системам ООО «ИнфоСАПР»
Тел.: +7 (495) 989-21-77
E-mail: info@iesoft.ru
www.infosapr.ru Программное решение nanoCAD BIM Вентиляция базируется на новом ядре EVOS, что позволяет ему выйти на новый уровень информационного моделирования. Многопользовательская работа, вариативность модели, параметризация свойств и многое другое позволяют пользователю ускорить процесс моделирования, повысить качество выпускаемой документации. nanoCAD BIM Вентиляция   Единая информационная модель В папке проекта расположен файл с расширением .repository (рис. 1), где хранится вся информация о проекте. Это решение позволяет в автоматическом режиме сохранять историю всех изменений проекта. При закрытии файлов *.dwg без сохранения все внесенные изменения будут сохранены. .repository  Рис. 1 Отображение модели может быть представлено в трехмерной (3D-вид), двумерной (планы) и табличной формах. Реализована двусторонняя связь между формами отображения и моделью.   Многопользовательская работа Поддерживается одновременная работа множества пользователей над одним проектом. После внесения изменений в локальную копию пользователь может опубликовать их на сервере, предоставив к ним доступ остальным участникам проекта. На основе набора локальных изменений создается коммит. Пользователь может переключаться между коммитами и таким образом отслеживать изменения. коммит Коммит относится к определенному набору (ветке) изменений и может быть опубликован как в текущую ветвь, так и в новую (рис. 2). Рис. 2  Рис. 2 Шаблоны компонентов В программе есть набор готовых шаблонов, которые можно использовать при создании новых компонентов (рис. 3). В шаблонах изначально заложен набор свойств (опций), относящихся к данному типу компонента. Например, для помещения можно задать номер, температуру, категорию взрывопожарной и пожарной опасности и т.д. Для шаблонов с требованиями МГЭ (табл. 1) добавляются
группы свойств PsetBuildingStoreyCommon и ExpCheckBuildingStorey.  PsetBuildingStoreyCommon ExpCheckBuildingStorey Рис. 3  Рис. 3  Таблица 1 Создание сборок Сборка представляет собой тот же компонент, но с композиционной моделью вложенности. Оборудование может состоять из нескольких компонентов, каждый из которых также содержит вложенные компоненты. Примером сборки служит, например, компонент, состоящий из вентилятора и гибкого соединителя (рис. 4).  Рис. 4 Каждый компонент может функционировать как в составе сборки, так и по отдельности. Например, вентилятор работает отдельно в случаях, когда не требуется мягкий соединитель. Настройка видимости систем Для видов с помощью настройки подсвечивания и скрытия систем (табл. 2) возможно несколько вариантов представления.  Таблица 2 Вы можете настроить нужные цвета систем и включить их отображение с помощью подсвечивания. На виде можно выбрать системы, которые будут отображаться. Кроме того, существует возможность регулировать отображение систем по этажам (табл. 3).  Таблица 3 Размещение УГО на плане Для создания корректного плана условные графические обозначения (УГО) можно перемещать относительно оборудования за грип-точки. В случае УГО отображаются точки желтого цвета. При добавлении УГО к элементам оборудование перемещается на непечатаемый слой (табл. 4).  Таблица 4 Оборудование и УГО автоматически размещаются на разных слоях, что позволяет регулировать их отображение.   Вентиляционные расчеты Программа поддерживает использование различных типов оборудования с соответствующими им расчетными данными. Расчет запускается автоматически. Начинается он от элемента, который определен как «Вход в систему» и имеет параметры Максимально допустимая скорость воздуха и Температура воздуха (табл. 5). Максимально допустимая скорость воздуха Температура воздуха На конечных элементах системы можно задавать расход воздуха.  Таблица 5 Для воздухораспределителей предусмотрена возможность задавать графики зависимости потери давления от скорости (рис. 5).  Рис. 5 Спецификации Для проекта можно получить спецификацию на оборудование (рис. 6) – она создается щелчком правой кнопкой мыши на компоненте. Для дальнейшего редактирования возможен экспорт спецификации в Word или Excel. Рис. 6  Рис. 6 Позиция оборудования регулируется с помощью стрелок (рис. 7).  Рис. 7 При необходимости можно отключить в свойствах оборудования параметр Включать в спецификацию. В этом случае оборудование не будет отображаться в спецификации (рис. 8). Включать в спецификацию Рис. 8  Рис. 8 Также для оборудования можно назначить Раздел в спецификации из предоставленного перечня (рис. 9). Раздел в спецификации Рис. 9  Рис. 9 Параметризация свойств Значения свойств задаются как в виде формул, так и в форме зависимостей.
Используя формулы, можно получить итог арифметических операций. Помимо средств работы с числовыми полями, в программе реализован функционал построения сложных строк из строковых переменных.  Например, можно сформировать выноски для круглого воздуховода с указанием его диаметра и длины (рис. 10). Рис. 10  Рис. 10 Формулы задаются отдельно для числителя и знаменателя выноски. В табл. 6 представлен пример написания формулы для числителя.  Таблица 6 Задание формул производится в окне Настройка формулы расчета значения (рис. 11). Более подробно процесс создания формул рассмотрен в разделе «nanoCAD BIM Вентиляция. Формулы». Настройка формулы расчета значения .  Рис. 11 Для сборок особенно актуальна зависимость свойств (изменение свойства одного компонента в зависимости от свойства другого). Например, назначив сборке новое свойство цвета, можно регулировать цвет всех входящих в нее компонентов (рис. 12). Более подробно о зависимых свойствах мы расскажем в разделе «nanoCAD BIM Вентиляция. Зависимые свойства».  Рис. 12 В программе nanoCAD BIM Вентиляция реализована возможность создавать вложенные структуры. Сборка представляет собой компонент с композиционной моделью вложенности. Создадим сборку, состоящую из вентилятора и мягкого термостойкого соединителя.]]></text>
</doc>
