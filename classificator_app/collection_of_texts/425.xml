<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[snezhko]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-05, 13:00]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/3cx/blog/703404/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Update 6 Alpha – важные изменения в архитектуре 3CX]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Блог компании 3CX Ltd.]]></item>
		<item type="str"><![CDATA[Системное администрирование]]></item>
		<item type="str"><![CDATA[Серверное администрирование]]></item>
		<item type="str"><![CDATA[Разработка систем связи]]></item>
		<item type="str"><![CDATA[Облачные сервисы]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[update 6]]></item>
		<item type="str"><![CDATA[3cx]]></item>
		<item type="str"><![CDATA[безопасность]]></item>
		<item type="str"><![CDATA[права доступа]]></item>
		<item type="str"><![CDATA[sbc]]></item>
		<item type="str"><![CDATA[прошивка]]></item>
		<item type="str"><![CDATA[ip-телефон]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[Update 6 Alpha – это масштабное обновление нашей АТС, практически как новая версия! Оно включает многие наработки, над которыми мы трудились в этом году. В нем мы также взяли курс на постепенную унификацию возможности сервиса 3CX StartUP с привычной серверной АТС. Даже сейчас новые функции StartUP будут интересны средним и крупным организациям.
В этот обновлении мы реализовали современные подходы управления системой, а также упростили настройку исходящих / входящих правил и инициализацию IP-телефонов.
Прошивка телефона с маршрутизатором SBC
В Update 6, можно использовать некоторые модели IP-телефонов и как серверы SBC, и по основному назначению. Для этого на них нужно установить новую прошивка, включающую сервис SBC.
SBC - важная функция 3CX. При инкапсуляции голосового трафика через SBC он шифруется и делается “проходимым” через сетевые экраны. Трафик SBC надежнее преодолевает сетевые экраны, чем обычный VoIP-трафик, когда телефоны подключаются “напрямую” по SIP.
Проблемой оставалось то, что для реализации SBC в локальной сети нужно устанавливать отдельный сервер. Но телефоны со встроенным SBC не только не требуют отдельного устройства, но и проще настраиваются. Сейчас прошивку с SBC поддерживают следующие устройства:
Yealink T53, T53C, T53W, T54W, T57W
Fanvil V64, V65, V62, X4U-V2, X5U-V2, X6U-V2, X7-V2, X7C-V2, X210-V2 и X210i-V2
Эти телефоны могут функционировать и как телефон, и как SBC в локальной сети. Фактически, теперь можно не собирать Raspberry Pi, а просто купить еще один телефон. Через такой телефон можно проксировать до десяти других телефонов (или больше).
Улучшенное управление IP-телефонами
Настройка (инициализация) телефонов в 3CX постоянно развивалась, и на текущий момент у нас есть несколько технологий для выполнения одной и той же задачи. Частично технологии были устаревшими и ориентированными на работу в локальных сетях, когда безопасность не имела столь большого значения. Теперь мы решили сосредоточиться на одном безопасном методе настройки, который подходит как для АТС на хостинге, так и в локальной сети. Для этого мы полностью переписали RPS-сервис, и теперь это основной способ инициализации IP-телефонов.
В некоторых случаях, если телефон находится в локальной сети, нужно скопировать и вставить URL автонастройки в веб-интерфейс телефона. Это актуально только для старых моделей, которые не поддерживают сервер RPS, либо если у вас используется подключение по локальному IP-адресу сервера, а не FQDN. Со временем, чтобы использовать наш RPS в локальной сети, вам все равно придется настроить раздельный DNS с безопасным FQDN.
В любом случае, мы пока сохранили классический метод настройки телефонов в локальной сети по технологии PnP из интерфейса управления, однако настройка новыми способами теперь доступна из веб-клиента. Подробнее о настройке в обновленных руководствах для поддерживаемых и предпочтительных телефонов.
Новые возможности рабочих групп
В Update 6 группы пользователей дополнены некоторыми функциями, которые разрабатывались для сервиса StartUP. Ранее они использовались для объединения пользователей и назначения им определенных прав. В Update 6 группы гораздо функциональнее – можно установить часовой пояс, язык голосового меню и индивидуальные часы работы.
Рабочие группы хорошо подходят для средних и больших организаций, где есть отделы в разных часовых поясах или работающие на разных языках. Управление группами / отделами можно делегировать администраторам групп. Большие системы, охватывающие несколько физических офисов, могут использовать группы для управления маршрутизацией, SIP-транками и другими функциями для отделов.
Например, конфигурация АТС в офисе 3CX стала довольно сложной из-за правил входящей / исходящей маршрутизации для множества SIP-транков. Кроме того, у нас отличаются часы работы для разных отделов. Планировщик статусов не мог автоматически вводить/выводить сотрудников в Очереди колл-центра. Теперь мы создали группы под каждый отдел и администрируем систему гораздо эффективнее. Наши удаленные офисы теперь имеют собственные IVR и часы работы и часовые пояса. Мы можем делегировать управление группами руководителям отделов. В результате конфигурация АТС значительно упростилась - нагрузка на системного администратора снизилась в 3 раза!
У каждой группы есть голосовое меню, которое распределяет звонки на пользователей в зависимости от времени суток. При этом добавочные номера / пользователи по умолчанию наследуют рабочие часы группы. В новых инсталляциях добавочные номера добавляются в группу по умолчанию. В будущем в 3CX появятся также групповые телефонные книги и чат. Подробнее о настройке групп в Руководстве.
Управление АТС через веб-клиент
Новый способ настройки системы через веб-клиент (раздел Admin) уже присутствовал в Update 5, но в Update 6 мы добавили сюда множество новых настроек – обработку вызовов, настройку SIP-транков, чат для сайта, WhatsApp, Facebook, настройку телефонов и управление правилами переадресации. Чтобы видеть раздел Admin в веб-клиенте, необходимо иметь роль системный администратор, владелец системы, администратор групп, владелец или руководитель (System Administrator, System Owner, Group Administrator, Owner, Manager). О ролях поговорим ниже.
Роли пользователей
Чтобы упростить управление правами пользователей, в Update 6 мы добавили так называемые “роли”. Они появились в StartUP, но оказались удобны и в более крупных инсталляциях. Роли применяются только в интерфейсе веб-клиента и определяют, что именно пользователь может настраивать в разделе Admin. Можно сказать, что роли в 3CX соответствуют уровням управления в организации. Новые роли пользователей:
User – базовая роль. Пользователь может видеть присутствие других пользователей.
Receptionist – роль для секретаря. Он может устанавливать часы работы офиса для групп, в которых состоит, видеть вызовы группы, статусы присутствия и выполнять операции: переадресация, перевод, перехват, парковка и интерком.
Group Administrator – администратор группы имеет доступ к разделу “Admin”. Администраторы, по умолчанию, не видят отчеты или записи разговоров, не могут прослушивать или вторгаться в беседу, но могут настраивать обработку вызовов, SIP-транки, WhatsApp, чат для сайта и т.д.
Manager – также видит вкладку “Admin”. Менеджер может настраивать параметры пользователей, например, переадресацию вызовов, а также может создавать новых пользователей и повышать роли. Менеджер также может менять статусы присутствия пользователей, прослушивать разговор и вклиниваться в беседу.
Owner – может делать все, что администратор групп и менеджер. Роль предназначена для владельцев компаний или руководителей отделов. Владелец может управлять своей группой, прослушивать, вклиниваться и подсказывать (Barge in, Listen, Whisper). А также, в пределах своей группы, повышать роль другого пользователя до Manager или Group Administrator.
System Administrator – видит все группы и SIP-транки, даже если он не является членом этих групп. Системный администратор не может прослушивать разговоры и вклиниваться в беседу (Barge in, Listen), а также сделать другого пользователя System Administrator или System Owner.
System Owner – все права системного администратора, плюс вклинивание и прослушивание (Barge in, Listen in), а также доступ к отчетам и записям разговоров. Владелец системы – единственный, кто может повышать роль другого пользователя до System Administration или System Owner (применимо только к выделенным экземплярам).
Эти роли применяются ко всем группам, в которых состоит пользователь! Роли системного администратора (System Administrator) и владельца системы (System Owner) распространяются вообще на всю систему.
Обратите внимание - старый интерфейс управления 3CX остается прежним, и все права, назначенные пользователям в интерфейсе управления, также остаются.
Важно - роль System Owner для добавочного номера
Из-за сделанных изменений в архитектуре безопасности, необходимо назначить пользователю-администратору / добавочному номеру роль System Owner. Если у текущего администратора 3CX нет добавочного номера, создайте его, затем перейдите на вкладку Rights и выберите роль System Owner.
Упрощенная настройка SIP-транка
В разделе администратора в веб-клиенте мы также упростили процесс создания SIP-транка. Здесь сразу можно подключить предпочтительные и поддерживаемые провайдеры. Все другие провайдеры по-прежнему настраиваются в интерфейсе 3CX. Новое Руководство 3CX доступно здесь.
Заключение
Отметим, что мы представили только первое обновление из серии, направленной на то, чтобы перенести функции администрирования АТС в веб-клиент. Сейчас это alpha-версия обновления Update 6 - не используйте ее на рабочих системах. Подробный список изменений можно посмотреть в журнале. Update 6 Alpha – это масштабное обновление нашей АТС, практически как новая версия! Оно включает многие наработки, над которыми мы трудились в этом году. В нем мы также взяли курс на постепенную унификацию возможности сервиса 3CX StartUP с привычной серверной АТС. Даже сейчас новые функции StartUP будут интересны средним и крупным организациям. В этот обновлении мы реализовали современные подходы управления системой, а также упростили настройку исходящих / входящих правил и инициализацию IP-телефонов. Прошивка телефона с маршрутизатором SBC В Update 6, можно использовать некоторые модели IP-телефонов и как серверы SBC, и по основному назначению. Для этого на них нужно установить новую прошивка, включающую сервис SBC. сервис SBC сервис SBC   SBC - важная функция 3CX. При инкапсуляции голосового трафика через SBC он шифруется и делается “проходимым” через сетевые экраны. Трафик SBC надежнее преодолевает сетевые экраны, чем обычный VoIP-трафик, когда телефоны подключаются “напрямую” по SIP. Проблемой оставалось то, что для реализации SBC в локальной сети нужно устанавливать отдельный сервер. Но телефоны со встроенным SBC не только не требуют отдельного устройства, но и проще настраиваются. Сейчас прошивку с SBC поддерживают следующие устройства: Yealink T53, T53C, T53W, T54W, T57W
Fanvil V64, V65, V62, X4U-V2, X5U-V2, X6U-V2, X7-V2, X7C-V2, X210-V2 и X210i-V2 Yealink T53, T53C, T53W, T54W, T57W Yealink T53, T53C, T53W, T54W, T57W T53, T53C, T53W, T54W, T57W Fanvil V64, V65, V62, X4U-V2, X5U-V2, X6U-V2, X7-V2, X7C-V2, X210-V2 и X210i-V2 Fanvil V64, V65, V62, X4U-V2, X5U-V2, X6U-V2, X7-V2, X7C-V2, X210-V2 и X210i-V2 V64, V65, V62 X4U-V2, X5U-V2, X6U-V2, X7-V2, X7C-V2, X210-V2 и X210i-V2 Эти телефоны могут функционировать и как телефон, и как SBC в локальной сети. Фактически, теперь можно не собирать Raspberry Pi, а просто купить еще один телефон. Через такой телефон можно проксировать до десяти других телефонов (или больше). Улучшенное управление IP-телефонами   Настройка (инициализация) телефонов в 3CX постоянно развивалась, и на текущий момент у нас есть несколько технологий для выполнения одной и той же задачи. Частично технологии были устаревшими и ориентированными на работу в локальных сетях, когда безопасность не имела столь большого значения. Теперь мы решили сосредоточиться на одном безопасном методе настройки, который подходит как для АТС на хостинге, так и в локальной сети. Для этого мы полностью переписали RPS-сервис, и теперь это основной способ инициализации IP-телефонов. В некоторых случаях, если телефон находится в локальной сети, нужно скопировать и вставить URL автонастройки в веб-интерфейс телефона. Это актуально только для старых моделей, которые не поддерживают сервер RPS, либо если у вас используется подключение по локальному IP-адресу сервера, а не FQDN. Со временем, чтобы использовать наш RPS в локальной сети, вам все равно придется настроить раздельный DNS с безопасным FQDN. В любом случае, мы пока сохранили классический метод настройки телефонов в локальной сети по технологии PnP из интерфейса управления, однако настройка новыми способами теперь доступна из веб-клиента. Подробнее о настройке в обновленных руководствах для поддерживаемых и предпочтительных телефонов. поддерживаемых и предпочтительных телефонов Новые возможности рабочих групп В Update 6 группы пользователей дополнены некоторыми функциями, которые разрабатывались для сервиса StartUP. Ранее они использовались для объединения пользователей и назначения им определенных прав. В Update 6 группы гораздо функциональнее – можно установить часовой пояс, язык голосового меню и индивидуальные часы работы. Рабочие группы хорошо подходят для средних и больших организаций, где есть отделы в разных часовых поясах или работающие на разных языках. Управление группами / отделами можно делегировать администраторам групп. Большие системы, охватывающие несколько физических офисов, могут использовать группы для управления маршрутизацией, SIP-транками и другими функциями для отделов. Например, конфигурация АТС в офисе 3CX стала довольно сложной из-за правил входящей / исходящей маршрутизации для множества SIP-транков. Кроме того, у нас отличаются часы работы для разных отделов. Планировщик статусов не мог автоматически вводить/выводить сотрудников в Очереди колл-центра. Теперь мы создали группы под каждый отдел и администрируем систему гораздо эффективнее. Наши удаленные офисы теперь имеют собственные IVR и часы работы и часовые пояса. Мы можем делегировать управление группами руководителям отделов. В результате конфигурация АТС значительно упростилась - нагрузка на системного администратора снизилась в 3 раза! У каждой группы есть голосовое меню, которое распределяет звонки на пользователей в зависимости от времени суток. При этом добавочные номера / пользователи по умолчанию наследуют рабочие часы группы. В новых инсталляциях добавочные номера добавляются в группу по умолчанию. В будущем в 3CX появятся также групповые телефонные книги и чат. Подробнее о настройке групп в Руководстве. Руководстве Управление АТС через веб-клиент   Новый способ настройки системы через веб-клиент (раздел Admin) уже присутствовал в Update 5, но в Update 6 мы добавили сюда множество новых настроек – обработку вызовов, настройку SIP-транков, чат для сайта, WhatsApp, Facebook, настройку телефонов и управление правилами переадресации. Чтобы видеть раздел Admin в веб-клиенте, необходимо иметь роль системный администратор, владелец системы, администратор групп, владелец или руководитель (System Administrator, System Owner, Group Administrator, Owner, Manager). О ролях поговорим ниже. чат для сайта WhatsApp Роли пользователей Чтобы упростить управление правами пользователей, в Update 6 мы добавили так называемые “роли”. Они появились в StartUP, но оказались удобны и в более крупных инсталляциях. Роли применяются только в интерфейсе веб-клиента и определяют, что именно пользователь может настраивать в разделе Admin. Можно сказать, что роли в 3CX соответствуют уровням управления в организации. Новые роли пользователей: User – базовая роль. Пользователь может видеть присутствие других пользователей.
Receptionist – роль для секретаря. Он может устанавливать часы работы офиса для групп, в которых состоит, видеть вызовы группы, статусы присутствия и выполнять операции: переадресация, перевод, перехват, парковка и интерком.
Group Administrator – администратор группы имеет доступ к разделу “Admin”. Администраторы, по умолчанию, не видят отчеты или записи разговоров, не могут прослушивать или вторгаться в беседу, но могут настраивать обработку вызовов, SIP-транки, WhatsApp, чат для сайта и т.д.
Manager – также видит вкладку “Admin”. Менеджер может настраивать параметры пользователей, например, переадресацию вызовов, а также может создавать новых пользователей и повышать роли. Менеджер также может менять статусы присутствия пользователей, прослушивать разговор и вклиниваться в беседу.
Owner – может делать все, что администратор групп и менеджер. Роль предназначена для владельцев компаний или руководителей отделов. Владелец может управлять своей группой, прослушивать, вклиниваться и подсказывать (Barge in, Listen, Whisper). А также, в пределах своей группы, повышать роль другого пользователя до Manager или Group Administrator.
System Administrator – видит все группы и SIP-транки, даже если он не является членом этих групп. Системный администратор не может прослушивать разговоры и вклиниваться в беседу (Barge in, Listen), а также сделать другого пользователя System Administrator или System Owner.
System Owner – все права системного администратора, плюс вклинивание и прослушивание (Barge in, Listen in), а также доступ к отчетам и записям разговоров. Владелец системы – единственный, кто может повышать роль другого пользователя до System Administration или System Owner (применимо только к выделенным экземплярам). User – базовая роль. Пользователь может видеть присутствие других пользователей. User – базовая роль. Пользователь может видеть присутствие других пользователей. Receptionist – роль для секретаря. Он может устанавливать часы работы офиса для групп, в которых состоит, видеть вызовы группы, статусы присутствия и выполнять операции: переадресация, перевод, перехват, парковка и интерком. Receptionist – роль для секретаря. Он может устанавливать часы работы офиса для групп, в которых состоит, видеть вызовы группы, статусы присутствия и выполнять операции: переадресация, перевод, перехват, парковка и интерком. Group Administrator – администратор группы имеет доступ к разделу “Admin”. Администраторы, по умолчанию, не видят отчеты или записи разговоров, не могут прослушивать или вторгаться в беседу, но могут настраивать обработку вызовов, SIP-транки, WhatsApp, чат для сайта и т.д. Group Administrator – администратор группы имеет доступ к разделу “Admin”. Администраторы, по умолчанию, не видят отчеты или записи разговоров, не могут прослушивать или вторгаться в беседу, но могут настраивать обработку вызовов, SIP-транки, WhatsApp, чат для сайта и т.д. Manager – также видит вкладку “Admin”. Менеджер может настраивать параметры пользователей, например, переадресацию вызовов, а также может создавать новых пользователей и повышать роли. Менеджер также может менять статусы присутствия пользователей, прослушивать разговор и вклиниваться в беседу. Manager – также видит вкладку “Admin”. Менеджер может настраивать параметры пользователей, например, переадресацию вызовов, а также может создавать новых пользователей и повышать роли. Менеджер также может менять статусы присутствия пользователей, прослушивать разговор и вклиниваться в беседу. Owner – может делать все, что администратор групп и менеджер. Роль предназначена для владельцев компаний или руководителей отделов. Владелец может управлять своей группой, прослушивать, вклиниваться и подсказывать (Barge in, Listen, Whisper). А также, в пределах своей группы, повышать роль другого пользователя до Manager или Group Administrator. Owner – может делать все, что администратор групп и менеджер. Роль предназначена для владельцев компаний или руководителей отделов. Владелец может управлять своей группой, прослушивать, вклиниваться и подсказывать (Barge in, Listen, Whisper). А также, в пределах своей группы, повышать роль другого пользователя до Manager или Group Administrator. System Administrator – видит все группы и SIP-транки, даже если он не является членом этих групп. Системный администратор не может прослушивать разговоры и вклиниваться в беседу (Barge in, Listen), а также сделать другого пользователя System Administrator или System Owner. System Administrator – видит все группы и SIP-транки, даже если он не является членом этих групп. Системный администратор не может прослушивать разговоры и вклиниваться в беседу (Barge in, Listen), а также сделать другого пользователя System Administrator или System Owner. System Owner – все права системного администратора, плюс вклинивание и прослушивание (Barge in, Listen in), а также доступ к отчетам и записям разговоров. Владелец системы – единственный, кто может повышать роль другого пользователя до System Administration или System Owner (применимо только к выделенным экземплярам). System Owner – все права системного администратора, плюс вклинивание и прослушивание (Barge in, Listen in), а также доступ к отчетам и записям разговоров. Владелец системы – единственный, кто может повышать роль другого пользователя до System Administration или System Owner (применимо только к выделенным экземплярам). Эти роли применяются ко всем группам, в которых состоит пользователь! Роли системного администратора (System Administrator) и владельца системы (System Owner) распространяются вообще на всю систему. Обратите внимание - старый интерфейс управления 3CX остается прежним, и все права, назначенные пользователям в интерфейсе управления, также остаются. Важно - роль System Owner для добавочного номера   Из-за сделанных изменений в архитектуре безопасности, необходимо назначить пользователю-администратору / добавочному номеру роль System Owner. Если у текущего администратора 3CX нет добавочного номера, создайте его, затем перейдите на вкладку Rights и выберите роль System Owner. Упрощенная настройка SIP-транка В разделе администратора в веб-клиенте мы также упростили процесс создания SIP-транка. Здесь сразу можно подключить предпочтительные и поддерживаемые провайдеры. Все другие провайдеры по-прежнему настраиваются в интерфейсе 3CX. Новое Руководство 3CX доступно здесь. предпочтительные и поддерживаемые провайдеры интерфейсе 3CX  здесь Заключение Отметим, что мы представили только первое обновление из серии, направленной на то, чтобы перенести функции администрирования АТС в веб-клиент. Сейчас это alpha-версия обновления Update 6 - не используйте ее на рабочих системах. Подробный список изменений можно посмотреть в журнале. журнале ]]></text>
</doc>
