<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Other]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[ilushakr]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-11-22, 20:22]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/company/gazprommedia/blog/697894/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[–ü–æ–∏—Å–∫ –Ω–µ –≤—Å—Ç–∞–≤–∞—è —Å –¥–∏–≤–∞–Ω–∞, –∏–ª–∏ –∫–∞–∫ –ø–æ–¥—Ä—É–∂–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–æ –°–±–µ—Ä –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[–ë–ª–æ–≥ –∫–æ–º–ø–∞–Ω–∏–∏ –ì–∞–∑–ø—Ä–æ–º-–ú–µ–¥–∏–∞ –•–æ–ª–¥–∏–Ω–≥]]></item>
		<item type="str"><![CDATA[–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥ Android]]></item>
		<item type="str"><![CDATA[–ì–æ–ª–æ—Å–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[–°–±–µ—Ä –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç]]></item>
		<item type="str"><![CDATA[–≥–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç üëã . –ó–æ–≤—É—Ç –º–µ–Ω—è –ò–ª—é—à–∞ –ö—Ä, –∏ —Å–µ–≥–æ–¥–Ω—è —è –≤–∞–º —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –∂–µ –≤—Å–µ-—Ç–∞–∫–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–µ—Å—Ç–∏ —á–∏–ø—Å–æ–≤ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–∞–∂—É –ø–∞—Ä—É —Å–ª–æ–≤ –æ —Å–µ–±–µ: —è —Ç–∞–∫–æ–π –∂–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–µ–Ω—å, –∫–∞–∫ –∏ –≤—ã, —Ä–∞–±–æ—Ç–∞—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ø–æ–¥ Android –≤ –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–µ PREMIER. –ù–æ, –∫–æ–≥–¥–∞ —è –≤–∑—è–ª –∑–∞–¥–∞—á—É –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –°–±–µ—Ä–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –º–æ—è –∂–∏–∑–Ω—å —Ä–∞–∑–¥–µ–ª–∏–ª–∞—Å—å –Ω–∞ ¬´–¥–æ¬ª –∏ ¬´–ø–æ—Å–ª–µ¬ª. –ó–∞–∏–Ω—Ç—Ä–∏–≥–æ–≤–∞–ª? –¢–æ–≥–¥–∞ —á–∏—Ç–∞–π –¥–∞–ª—å—à–µ!
–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –≤—ã —É–∑–Ω–∞–µ—Ç–µ:
–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏ –°–±–µ—Ä–∞ –∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞–º–∏;
–ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é;
–æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É –ñ–∞–∫–∞ –§—Ä–µ—Å–∫–æ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
–ê—á–æ, –∞ –≤—Å–º—ã—Å–ª–µ?
–¢–∞–∫, –¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏–º—Å—è —Å –∑–∞–¥–∞—á–µ–π: —É –°–±–µ—Ä-–¥–µ–≤–∞–π—Å–æ–≤ –Ω–∞ –ø—É–ª—å—Ç–µ —á–µ—Ç—ã—Ä–µ –∫–Ω–æ–ø–∫–∏ –∏ –æ–Ω–∏ –≤–∞–º –Ω–µ –Ω—É–∂–Ω—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –µ—Å—Ç—å –ì–û–õ–û–°–û–í–û–ô –ü–û–ú–û–©–ù–ò–ö. –ê —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞. –ï—Å–ª–∏ –∂–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, –æ—Ç–∫—Ä–æ–µ–º —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω –∏ –≤–≤–µ–¥–µ–º –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–∏–º –º—ã –∏ –∑–∞–π–º–µ–º—Å—è!
–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
–ù–∞—á–Ω–µ–º —Å —Ç–æ–≥–æ, —á—Ç–æ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ SberMarket Studio. –í –ª–∏—á–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –Ω–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç SmartApp. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ —Å–º–∞—Ä—Ç–∞–ø–∞ –≤—ã–±–∏—Ä–∞–µ–º NativeApp. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ apk-—Ñ–∞–π–ª. Et voil√†, —Ç–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –Ω—ç–π—Ç–∏–≤ –∞–ø–ø –∏ –≤ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å —Å–±–µ—Ä–æ–≤—Å–∫–∏–µ –ø—Ä–∏–º–æ—á–∫–∏.
–°–∞–º–æ —Å–æ–±–æ–π –≤—Å–µ —ç—Ç–æ –≤ –¥–æ–∫–∞—Ö –°–±–µ—Ä–∞ –µ—Å—Ç—å, –Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Ç—É–¥–∞ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –í–µ–¥—å –ø–æ—ç—Ç–æ–º—É –≤—ã –∑–¥–µ—Å—å? –ù—É —á—Ç–æ, –ø—Ä–æ–¥–æ–ª–∂–∏–º!
–î–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:
Sdk –∏ –ª–æ–≥–∏–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ;
–°–∫—Ä–∏–ø—Ç –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã.
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ù–∞—á–Ω–µ–º, –ø–æ–∂–∞–ª—É–π, —Å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å sdk (—Å–ø–æ–π–ª–µ—Ä: –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –≤ –¥–æ–∫–∞—Ö —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è 1.0, –Ω–æ –Ω–∞–π—Ç–∏ –µ–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–µ —Ä–µ–ª–∏–∑–Ω—É—Ç–∞. –ê —Å–µ–≥–æ–¥–Ω—è –≤ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å –Ω–µ –≤—Å–µ –º–æ–≥—É—Ç —Å–º–æ—Ç—Ä–µ—Ç—å‚Ä¶ –ù—É –≤—ã –ø–æ–Ω—è–ª–∏). –ê –≤–æ–æ–±—â–µ –≤–æ—Ç –≤—Ä–æ–¥–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏.
–£ —Å–µ–±—è –≤ –ø—Ä–æ–µ–∫—Ç–µ —è –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª ¬´–∂–∏—Ä–Ω—ã–π —Å–¥–∫¬ª –∏–∑-–∑–∞ –Ω–µ–Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö —Ñ–∏—á (—Ç–æ–ª—å–∫–æ messaging –∏ appstate).
dependencies {
...

implementation "ru.sberdevices.smartapp.sdk:appstate:1.0-alpha-2"
implementation "ru.sberdevices.smartapp.sdk:messaging:1.0-alpha-2"

}
–°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Å—Ç–∞–Ω—Å—ã –¥–ª—è —Å—Ç–µ–π—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏:
data class SberAppState(
@SerializedName("isOnScreen")
val isOnScreen: Boolean
) : Serializable
data class SberMessage(
@SerializedName("type")@SerializedName("message")
val message: String,
@SerializedName("type")
val type: String
) : Serializable
–î–∞–Ω–Ω—ã–µ –º—ã –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–º Json-–æ–±—ä–µ–∫—Ç–æ–º.
SberAppState –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –∫–ª–∞—Å—Å –≤—Å–µ–≥–æ —Å –æ–¥–Ω–∏–º –ø–æ–ª–µ–º ‚Äî isOnScreen. –î–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≤ –∫–∞–∫–æ–º —Å—Ç–µ–π—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ(–ª–∏–±–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, –ª–∏–±–æ –≥–¥–µ-—Ç–æ –µ—â–µ).
SberMessage —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –ø–æ–ª–µ–π: type –∏ message. –ü–∞—Ä–∞–º–µ—Ç—Ä type –Ω—É–∂–µ–Ω –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤ –∫–∞–∫–æ–º —Å—Ç–µ–π—Ç–µ —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∞ message ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏.
–ù—É —á—Ç–æ, –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–¥:
const val LOCAL_SEARCH_TYPE = "LOCAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
const val GLOBAL_SEARCH_TYPE = "GLOBAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
val listener = object : Messaging.Listener {
    override fun onMessage(messageId: MessageId, payload: Payload) {
        val sberMessage = Gson().fromJson(
       payload.data, 
       SberMessage::class.java
     )
        
     if (sberMessage.type == LOCAL_SEARCH_TYPE) {
            // –ø–æ–¥—Å—Ç–∞–≤–∏–º –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∑–∞–ø—Ä–æ—Å sberMessage.message
        }

     if (sberMessage.type == GLOBAL_SEARCH) {
            // –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤—ã–≤–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞
        }
    }

    override fun onError(messageId: MessageId, throwable: Throwable) {
        // –ü—Ä–∏—à–ª–∞ –æ—à–∏–±–∫–∞: ~~–±—É–¥–µ–º –ø–ª–∞–∫–∞—Ç—å~~ –æ–±—Ä–∞–±–æ—Ç–∞–µ–º –µ–µ
    }
}

 fun updateAppState(isOnSearchScreen: Boolean) {
    appStateHolder.setState(Gson().toJson(SberAppState(isOnSearchScreen)))
}
–í —Ñ—É–Ω–∫—Ü–∏–∏ onMessage –æ–±—Ä–∞–±–æ—Ç–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, —Ñ—É–Ω–∫—Ü–∏—è updateAppState –≤ –º–æ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–µ–π—Ç isOnSearchScreen = true –∏ –ø—Ä–∏ —É—Ö–æ–¥–µ - isOnSearchScreen = false —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
–≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∫–µ–Ω–¥–∞ (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞)
–í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞—à–µ–≥–æ native app –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞–º–∏ –±—ç–∫–µ–Ω–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ—Ä–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
–í –°–±–µ—Ä–ú–∞—Ä–∫–µ—Ç –°—Ç—É–¥–∏–æ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –≤—ã–±–æ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Graph –ª–∏–±–æ Code.
–î–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ —è –≤—ã–±—Ä–∞–ª —Ç–∏–ø Code.
Code ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç–∞–ø–ø–æ–≤ –Ω–∞ —è–∑—ã–∫–∞—Ö JavaScript –∏ SmartApp DSL
–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ–µ–∫—Ç. –ï–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
src
main.sc
utils.js
test
caila_import.json
chatbot.yaml
–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–æ —Ñ–∞–π–ª—ã main.sc –∏ utils.js (–ø—Ä–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ –¥–æ–∫–µ).
function reply(body, response) {
var replyData = {
type: "raw",
body: body
};
response.replies = response.replies || [];
response.replies.push(replyData);
}
function handleRequest(usersRequest, isOnSearchScreen, response) {
var appType = null
if (isOnSearchScreen) {
appType = 'LOCAL_SEARCH'
} else {
appType = 'GLOBAL_SEARCH'
}
var body = {
    items: [
        {
            command: {
                type: 'smart_app_data',
                smart_app_data: {
                     type: appType,
                     message: usersRequest,
                },
            },
        },
    ],
};
 
reply(body, response);

}
–§—É–Ω–∫—Ü–∏—è reply –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–∞—à native app —Å –¥–∞–Ω–Ω—ã–º–∏ body.
–§—É–Ω–∫—Ü–∏—è handleRequest –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
usersRequest ‚Äî —Ç–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤ –ø–æ–ª–µ message;
isOnSearchScreen ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (LOCAL_SEARCH ‚Äî –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, GLOBAL_SEARCH ‚Äî –º—ã –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞);
response ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ native app.
theme: /
state: runApp
    q!: $regex&lt;/start&gt;
    script:
        $response.replies = $response.replies || [];
            $response.replies.push({
              type: 'raw',
                body: {
                    items: [
                        {
                            command: {
                                type: "smart_app_data",
                                smart_app_data: {
                                    type: "app_action",
                                    message: "–∑–∞–ø—É—Å—Ç–∏–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
                                },
                            },
                            auto_listening: true
                        },
                    ],
                },
            });
  
state: UsersSearchRequest
    intent!: /UsersRequest
    script:
        $session.request = $parseTree.text
        script: handleRequest($session.request, $jsapi.context().request.rawRequest.payload.meta.current_app.state.isOnScreen, $response)

Need to understand if this state is needed
# –ï—Å–ª–∏ –º—ã –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ –∑–∞–ø—Ä–æ—Å:
state: Fallback
    event!: noMatch
    a: –£–ø—Å, —á—Ç–æ —Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ :(
–î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤—ã—Å—Ç—É–ø–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º ‚Äî –∫–∞–∂–¥—ã–π —Å—Ç–µ–π—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ:
state runApp ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ;
state UsersSearchRequest ‚Äî —Å—Ç–µ–π—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥–∞–µ—Ç –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å (–∫—Ä–æ–º–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è);
state Fallback ‚Äî –¥–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤(–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å).
–°—Ç–µ–π—Ç UsersSearchRequest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏–Ω—Ç–µ–Ω—Ç, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è —Ñ—Ä–∞–∑–∞ ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ¬´+¬ª (–ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–µ –º–µ–Ω—å—à–µ –æ–¥–Ω–æ–≥–æ). –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ —ç—Ç–æ—Ç —Å—Ç–µ–π—Ç –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ handleRequest (–≤ —Å–µ–∫—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é  regexp<.+>¬ª.
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è
–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –°–±–µ—Ä-–¥–µ–≤–∞–π—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
–ê –∫–∞–∫ –±—ã—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —É–∂–µ –µ—Å—Ç—å, –∞ –≤–∞—Å —Ç–∞–º –Ω–µ—Ç? –í—Å–µ –ø—Ä–æ—Å—Ç–æ: –ø—Ä–æ—Å–∏–º —É–≤–∞–∂–∞–µ–º–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—Å –Ω–∞ –ø—Ä–æ–µ–∫—Ç. –î–ª—è —ç—Ç–æ–≥–æ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –Ω—É–∂–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫—Ä–∞—Å–∏–≤—É—é –∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É, –¥–∞–ª–µ–µ –≤–∫–ª–∞–¥–∫–∞ ¬´–ö–æ–º–∞–Ω–¥–∞¬ª. –ù–∞ —ç—Ç–æ–º —ç–∫—Ä–∞–Ω–µ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –ø–æ–º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ —É —Ç–µ–∫—É—â–∏—Ö –∏, —Å–∞–º–æ —Å–æ–±–æ–π, —É–¥–∞–ª–∏—Ç—å —Ç–µ—Ö, –∫—Ç–æ —Å–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –∏–¥–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ.
–ó–∞–∫–ª—é—á–µ–Ω–∏–µ
–í–æ—Ç –∏ –ø–æ–¥–æ—à–ª–æ –∫ –∫–æ–Ω—Ü—É –Ω–∞—à–µ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞. –ù–∞–¥–µ—é—Å—å, –¥–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ —Ç–µ–º, –∫—Ç–æ —Ç–æ–ª—å–∫–æ —Ä–µ—à–∏–ª –∑–∞–≤–µ–∑—Ç–∏ –ø–æ—Ö–æ–∂–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –Ω–µ –∑–Ω–∞–µ—Ç, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å. –¢–∞–∫–∂–µ –º–æ–≥—É –¥–∞—Ç—å —Å–æ–≤–µ—Ç: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Code- –∏ Graph-–ø—Ä–æ–µ–∫—Ç–æ–≤ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–º–ø–ª–µ–π—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∫–æ–≤—ã—Ä—è—Ç—å—Å—è –≤ –Ω–∏—Ö ‚Äî —Ç–∞–º –µ—Å—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥.
–ù–∞ —ç—Ç–æ–º —è —Å –≤–∞–º–∏ –ø—Ä–æ—â–∞—é—Å—å. –ñ–¥—É –≤–∞—à–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–æ–≤. –ñ–∏–≤–∏—Ç–µ –¥–æ–ª–≥–æ –∏ –ø—Ä–æ—Ü–≤–µ—Ç–∞–π—Ç–µ.    –í—Å–µ–º –ø—Ä–∏–≤–µ—Ç üëã . –ó–æ–≤—É—Ç –º–µ–Ω—è –ò–ª—é—à–∞ –ö—Ä, –∏ —Å–µ–≥–æ–¥–Ω—è —è –≤–∞–º —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –∂–µ –≤—Å–µ-—Ç–∞–∫–∏ –ø–æ–ø—Ä–æ—Å–∏—Ç—å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–µ—Å—Ç–∏ —á–∏–ø—Å–æ–≤ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –≤–Ω—É—Ç—Ä–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ø—Ä–∏–Ω–µ—Å—Ç–∏ —á–∏–ø—Å–æ–≤ –î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∫–∞–∂—É –ø–∞—Ä—É —Å–ª–æ–≤ –æ —Å–µ–±–µ: —è —Ç–∞–∫–æ–π –∂–µ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–µ–Ω—å, –∫–∞–∫ –∏ –≤—ã, —Ä–∞–±–æ—Ç–∞—é —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º –ø–æ–¥ Android –≤ –æ–Ω–ª–∞–π–Ω-–∫–∏–Ω–æ—Ç–µ–∞—Ç—Ä–µ PREMIER. –ù–æ, –∫–æ–≥–¥–∞ —è –≤–∑—è–ª –∑–∞–¥–∞—á—É –ø–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—é –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –°–±–µ—Ä–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –º–æ—è –∂–∏–∑–Ω—å —Ä–∞–∑–¥–µ–ª–∏–ª–∞—Å—å –Ω–∞ ¬´–¥–æ¬ª –∏ ¬´–ø–æ—Å–ª–µ¬ª. –ó–∞–∏–Ω—Ç—Ä–∏–≥–æ–≤–∞–ª? –¢–æ–≥–¥–∞ —á–∏—Ç–∞–π –¥–∞–ª—å—à–µ! –í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –≤—ã —É–∑–Ω–∞–µ—Ç–µ: –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏ –°–±–µ—Ä–∞ –∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞–º–∏;
–ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é;
–æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É –ñ–∞–∫–∞ –§—Ä–µ—Å–∫–æ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏ –°–±–µ—Ä–∞ –∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞–º–∏; –ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø—Ä–∏—Å—Ç–∞–≤–∫–∞–º–∏ –°–±–µ—Ä–∞ –∏ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–∞–º–∏; –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é; –ö–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤–∑—è—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é; –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É –ñ–∞–∫–∞ –§—Ä–µ—Å–∫–æ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É –ñ–∞–∫–∞ –§—Ä–µ—Å–∫–æ –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ —Å–∞–º–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–≥–∞–¥–∫—É –ñ–∞–∫–∞ –§—Ä–µ—Å–∫–æ –ê—á–æ, –∞ –≤—Å–º—ã—Å–ª–µ? –¢–∞–∫, –¥–∞–≤–∞–π—Ç–µ –æ–ø—Ä–µ–¥–µ–ª–∏–º—Å—è —Å –∑–∞–¥–∞—á–µ–π: —É –°–±–µ—Ä-–¥–µ–≤–∞–π—Å–æ–≤ –Ω–∞ –ø—É–ª—å—Ç–µ —á–µ—Ç—ã—Ä–µ –∫–Ω–æ–ø–∫–∏ –∏ –æ–Ω–∏ –≤–∞–º –Ω–µ –Ω—É–∂–Ω—ã, –ø–æ—Å–∫–æ–ª—å–∫—É –µ—Å—Ç—å –ì–û–õ–û–°–û–í–û–ô –ü–û–ú–û–©–ù–ò–ö. –ê —ç—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø–æ–∏—Å–∫ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞. –ï—Å–ª–∏ –∂–µ –º—ã –Ω–∞—Ö–æ–¥–∏–º—Å—è –Ω–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, –æ—Ç–∫—Ä–æ–µ–º —ç—Ç–æ—Ç —ç–∫—Ä–∞–Ω –∏ –≤–≤–µ–¥–µ–º –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –≠—Ç–∏–º –º—ã –∏ –∑–∞–π–º–µ–º—Å—è! –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ù–∞—á–Ω–µ–º —Å —Ç–æ–≥–æ, —á—Ç–æ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ SberMarket Studio. –í –ª–∏—á–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –Ω–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç SmartApp. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∏–ø–∞ —Å–º–∞—Ä—Ç–∞–ø–∞ –≤—ã–±–∏—Ä–∞–µ–º NativeApp. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ apk-—Ñ–∞–π–ª. Et voil√†, —Ç–µ–ø–µ—Ä—å –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –Ω—ç–π—Ç–∏–≤ –∞–ø–ø –∏ –≤ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å —Å–±–µ—Ä–æ–≤—Å–∫–∏–µ –ø—Ä–∏–º–æ—á–∫–∏. SberMarket Studio voil√† –°–∞–º–æ —Å–æ–±–æ–π –≤—Å–µ —ç—Ç–æ –≤ –¥–æ–∫–∞—Ö –°–±–µ—Ä–∞ –µ—Å—Ç—å, –Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å —Ç—É–¥–∞ –Ω–µ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ. –í–µ–¥—å –ø–æ—ç—Ç–æ–º—É –≤—ã –∑–¥–µ—Å—å? –ù—É —á—Ç–æ, –ø—Ä–æ–¥–æ–ª–∂–∏–º! –¥–æ–∫–∞—Ö –î–ª—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –ø–æ–º–æ—â–Ω–∏–∫–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å: Sdk –∏ –ª–æ–≥–∏–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ;
–°–∫—Ä–∏–ø—Ç –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. Sdk –∏ –ª–æ–≥–∏–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ; Sdk –∏ –ª–æ–≥–∏–∫—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ; –°–∫—Ä–∏–ø—Ç –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –°–∫—Ä–∏–ø—Ç –±—ç–∫–µ–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ù–∞—á–Ω–µ–º, –ø–æ–∂–∞–ª—É–π, —Å –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è –Ω–∞—á–∞–ª–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å sdk (—Å–ø–æ–π–ª–µ—Ä: –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Å—Ç–∞—Ç—å–∏ –≤ –¥–æ–∫–∞—Ö —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è 1.0, –Ω–æ –Ω–∞–π—Ç–∏ –µ–µ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–µ —Ä–µ–ª–∏–∑–Ω—É—Ç–∞. –ê —Å–µ–≥–æ–¥–Ω—è –≤ –∑–∞–≤—Ç—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å –Ω–µ –≤—Å–µ –º–æ–≥—É—Ç —Å–º–æ—Ç—Ä–µ—Ç—å‚Ä¶ –ù—É –≤—ã –ø–æ–Ω—è–ª–∏). –ê –≤–æ–æ–±—â–µ –≤–æ—Ç –≤—Ä–æ–¥–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –≤–µ—Ä—Å–∏–∏. sdk —Å–ø–æ–π–ª–µ—Ä —Å—Å—ã–ª–∫–∏ –£ —Å–µ–±—è –≤ –ø—Ä–æ–µ–∫—Ç–µ —è –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª ¬´–∂–∏—Ä–Ω—ã–π —Å–¥–∫¬ª –∏–∑-–∑–∞ –Ω–µ–Ω–∞–¥–æ–±–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö —Ñ–∏—á (—Ç–æ–ª—å–∫–æ messaging –∏ appstate). dependencies {
...

implementation "ru.sberdevices.smartapp.sdk:appstate:1.0-alpha-2"
implementation "ru.sberdevices.smartapp.sdk:messaging:1.0-alpha-2"

} dependencies {
...

implementation "ru.sberdevices.smartapp.sdk:appstate:1.0-alpha-2"
implementation "ru.sberdevices.smartapp.sdk:messaging:1.0-alpha-2"

} –°–æ–∑–¥–∞–¥–∏–º –∏–Ω—Å—Ç–∞–Ω—Å—ã –¥–ª—è —Å—Ç–µ–π—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏: data class SberAppState(
@SerializedName("isOnScreen")
val isOnScreen: Boolean
) : Serializable
data class SberMessage(
@SerializedName("type")@SerializedName("message")
val message: String,
@SerializedName("type")
val type: String
) : Serializable data class SberAppState(
@SerializedName("isOnScreen")
val isOnScreen: Boolean
) : Serializable
data class SberMessage(
@SerializedName("type")@SerializedName("message")
val message: String,
@SerializedName("type")
val type: String
) : Serializable –î–∞–Ω–Ω—ã–µ –º—ã –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–º Json-–æ–±—ä–µ–∫—Ç–æ–º. SberAppState –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –∫–ª–∞—Å—Å –≤—Å–µ–≥–æ —Å –æ–¥–Ω–∏–º –ø–æ–ª–µ–º ‚Äî isOnScreen. –î–∞–Ω–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –≤ –∫–∞–∫–æ–º —Å—Ç–µ–π—Ç–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ(–ª–∏–±–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, –ª–∏–±–æ –≥–¥–µ-—Ç–æ –µ—â–µ). SberMessage —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –ø–æ–ª–µ–π: type –∏ message. –ü–∞—Ä–∞–º–µ—Ç—Ä type –Ω—É–∂–µ–Ω –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è, –≤ –∫–∞–∫–æ–º —Å—Ç–µ–π—Ç–µ —Å–µ–π—á–∞—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∞ message ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏. –ù—É —á—Ç–æ, –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–æ–¥: const val LOCAL_SEARCH_TYPE = "LOCAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
const val GLOBAL_SEARCH_TYPE = "GLOBAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
val listener = object : Messaging.Listener {
    override fun onMessage(messageId: MessageId, payload: Payload) {
        val sberMessage = Gson().fromJson(
       payload.data, 
       SberMessage::class.java
     )
        
     if (sberMessage.type == LOCAL_SEARCH_TYPE) {
            // –ø–æ–¥—Å—Ç–∞–≤–∏–º –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∑–∞–ø—Ä–æ—Å sberMessage.message
        }

     if (sberMessage.type == GLOBAL_SEARCH) {
            // –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤—ã–≤–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞
        }
    }

    override fun onError(messageId: MessageId, throwable: Throwable) {
        // –ü—Ä–∏—à–ª–∞ –æ—à–∏–±–∫–∞: ~~–±—É–¥–µ–º –ø–ª–∞–∫–∞—Ç—å~~ –æ–±—Ä–∞–±–æ—Ç–∞–µ–º –µ–µ
    }
}

 fun updateAppState(isOnSearchScreen: Boolean) {
    appStateHolder.setState(Gson().toJson(SberAppState(isOnSearchScreen)))
} const val LOCAL_SEARCH_TYPE = "LOCAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
const val GLOBAL_SEARCH_TYPE = "GLOBAL_SEARCH" // –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞
val listener = object : Messaging.Listener {
    override fun onMessage(messageId: MessageId, payload: Payload) {
        val sberMessage = Gson().fromJson(
       payload.data, 
       SberMessage::class.java
     )
        
     if (sberMessage.type == LOCAL_SEARCH_TYPE) {
            // –ø–æ–¥—Å—Ç–∞–≤–∏–º –≤–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–µ –∑–∞–ø—Ä–æ—Å sberMessage.message
        }

     if (sberMessage.type == GLOBAL_SEARCH) {
            // –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–æ–≤—ã–≤–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞
        }
    }

    override fun onError(messageId: MessageId, throwable: Throwable) {
        // –ü—Ä–∏—à–ª–∞ –æ—à–∏–±–∫–∞: ~~–±—É–¥–µ–º –ø–ª–∞–∫–∞—Ç—å~~ –æ–±—Ä–∞–±–æ—Ç–∞–µ–º –µ–µ
    }
}

 fun updateAppState(isOnSearchScreen: Boolean) {
    appStateHolder.setState(Gson().toJson(SberAppState(isOnSearchScreen)))
} –í —Ñ—É–Ω–∫—Ü–∏–∏ onMessage –æ–±—Ä–∞–±–æ—Ç–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, —Ñ—É–Ω–∫—Ü–∏—è updateAppState –≤ –º–æ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω –ø–æ–∏—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–µ–π—Ç isOnSearchScreen = true –∏ –ø—Ä–∏ —É—Ö–æ–¥–µ - isOnSearchScreen = false —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∫–µ–Ω–¥–∞ (–Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞) –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞—à–µ–≥–æ native app –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –Ω–∞–º–∏ –±—ç–∫–µ–Ω–¥, –≤ –∫–æ—Ç–æ—Ä–æ–º –∏ –∑–∞–∫–ª–∞–¥—ã–≤–∞–µ–º –ª–æ–≥–∏–∫—É –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ—Ä–∞–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í –°–±–µ—Ä–ú–∞—Ä–∫–µ—Ç –°—Ç—É–¥–∏–æ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –≤—ã–±–æ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç Graph –ª–∏–±–æ Code. Graph Code –î–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ —è –≤—ã–±—Ä–∞–ª —Ç–∏–ø Code. Code ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç–∞–ø–ø–æ–≤ –Ω–∞ —è–∑—ã–∫–∞—Ö JavaScript –∏ SmartApp DSL Code ‚Äî —ç—Ç–æ —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç–∞–ø–ø–æ–≤ –Ω–∞ —è–∑—ã–∫–∞—Ö JavaScript –∏ SmartApp DSL Code SmartApp DSL    –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ–µ–∫—Ç. –ï–≥–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: src
main.sc
utils.js
test
caila_import.json
chatbot.yaml src
main.sc
utils.js src main.sc
utils.js main.sc main.sc main.sc utils.js utils.js test test caila_import.json caila_import.json chatbot.yaml chatbot.yaml –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–¥—Ä–æ–±–Ω–æ —Ñ–∞–π–ª—ã main.sc –∏ utils.js (–ø—Ä–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ –¥–æ–∫–µ). main.sc –¥–æ–∫–µ function reply(body, response) {
var replyData = {
type: "raw",
body: body
};
response.replies = response.replies || [];
response.replies.push(replyData);
}
function handleRequest(usersRequest, isOnSearchScreen, response) {
var appType = null
if (isOnSearchScreen) {
appType = 'LOCAL_SEARCH'
} else {
appType = 'GLOBAL_SEARCH'
}
var body = {
    items: [
        {
            command: {
                type: 'smart_app_data',
                smart_app_data: {
                     type: appType,
                     message: usersRequest,
                },
            },
        },
    ],
};
 
reply(body, response);

} function reply(body, response) {
var replyData = {
type: "raw",
body: body
};
response.replies = response.replies || [];
response.replies.push(replyData);
}
function handleRequest(usersRequest, isOnSearchScreen, response) {
var appType = null
if (isOnSearchScreen) {
appType = 'LOCAL_SEARCH'
} else {
appType = 'GLOBAL_SEARCH'
}
var body = {
    items: [
        {
            command: {
                type: 'smart_app_data',
                smart_app_data: {
                     type: appType,
                     message: usersRequest,
                },
            },
        },
    ],
};
 
reply(body, response);

} –§—É–Ω–∫—Ü–∏—è reply –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω–∞—à native app —Å –¥–∞–Ω–Ω—ã–º–∏ body. –§—É–Ω–∫—Ü–∏—è handleRequest –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: usersRequest ‚Äî —Ç–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤ –ø–æ–ª–µ message;
isOnSearchScreen ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (LOCAL_SEARCH ‚Äî –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, GLOBAL_SEARCH ‚Äî –º—ã –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞);
response ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ native app. usersRequest ‚Äî —Ç–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤ –ø–æ–ª–µ message; usersRequest ‚Äî —Ç–æ, —á—Ç–æ –º—ã –ø–µ—Ä–µ–¥–∞–¥–∏–º –≤ –ø–æ–ª–µ message; isOnSearchScreen ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (LOCAL_SEARCH ‚Äî –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, GLOBAL_SEARCH ‚Äî –º—ã –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞); isOnSearchScreen ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (LOCAL_SEARCH ‚Äî –º—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞, GLOBAL_SEARCH ‚Äî –º—ã –ù–ï –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–∏—Å–∫–∞); –ù–ï response ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ native app. response ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—ã–π –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ native app. theme: /
state: runApp
    q!: $regex&lt;/start&gt;
    script:
        $response.replies = $response.replies || [];
            $response.replies.push({
              type: 'raw',
                body: {
                    items: [
                        {
                            command: {
                                type: "smart_app_data",
                                smart_app_data: {
                                    type: "app_action",
                                    message: "–∑–∞–ø—É—Å—Ç–∏–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
                                },
                            },
                            auto_listening: true
                        },
                    ],
                },
            });
  
state: UsersSearchRequest
    intent!: /UsersRequest
    script:
        $session.request = $parseTree.text
        script: handleRequest($session.request, $jsapi.context().request.rawRequest.payload.meta.current_app.state.isOnScreen, $response)

Need to understand if this state is needed
# –ï—Å–ª–∏ –º—ã –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ –∑–∞–ø—Ä–æ—Å:
state: Fallback
    event!: noMatch
    a: –£–ø—Å, —á—Ç–æ —Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ :( theme: /
state: runApp
    q!: $regex&lt;/start&gt;
    script:
        $response.replies = $response.replies || [];
            $response.replies.push({
              type: 'raw',
                body: {
                    items: [
                        {
                            command: {
                                type: "smart_app_data",
                                smart_app_data: {
                                    type: "app_action",
                                    message: "–∑–∞–ø—É—Å—Ç–∏–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
                                },
                            },
                            auto_listening: true
                        },
                    ],
                },
            });
  
state: UsersSearchRequest
    intent!: /UsersRequest
    script:
        $session.request = $parseTree.text
        script: handleRequest($session.request, $jsapi.context().request.rawRequest.payload.meta.current_app.state.isOnScreen, $response)

Need to understand if this state is needed
# –ï—Å–ª–∏ –º—ã –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ –∑–∞–ø—Ä–æ—Å:
state: Fallback
    event!: noMatch
    a: –£–ø—Å, —á—Ç–æ —Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ :( –î–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –≤—ã—Å—Ç—É–ø–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º ‚Äî –∫–∞–∂–¥—ã–π —Å—Ç–µ–π—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ: state runApp ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ;
state UsersSearchRequest ‚Äî —Å—Ç–µ–π—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥–∞–µ—Ç –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å (–∫—Ä–æ–º–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è);
state Fallback ‚Äî –¥–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤(–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å). state runApp ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ; state runApp ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ; state UsersSearchRequest ‚Äî —Å—Ç–µ–π—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥–∞–µ—Ç –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å (–∫—Ä–æ–º–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è); state UsersSearchRequest ‚Äî —Å—Ç–µ–π—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ø–∞–¥–∞–µ—Ç –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å (–∫—Ä–æ–º–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è); state Fallback ‚Äî –¥–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤(–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å). state Fallback ‚Äî –¥–ª—è –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤(–∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å). –°—Ç–µ–π—Ç UsersSearchRequest –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ –∏–Ω—Ç–µ–Ω—Ç, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω–∞—è —Ñ—Ä–∞–∑–∞ ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ: ¬´+¬ª (–ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–µ –º–µ–Ω—å—à–µ –æ–¥–Ω–æ–≥–æ). –ü—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ —ç—Ç–æ—Ç —Å—Ç–µ–π—Ç –º—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–∏ handleRequest (–≤ —Å–µ–∫—Ü–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é  regexp<.+>¬ª. –∏–Ω—Ç–µ–Ω—Ç    –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—ã—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ –°–±–µ—Ä-–¥–µ–≤–∞–π—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–º –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏—è –ê –∫–∞–∫ –±—ã—Ç—å, –µ—Å–ª–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —É–∂–µ –µ—Å—Ç—å, –∞ –≤–∞—Å —Ç–∞–º –Ω–µ—Ç? –í—Å–µ –ø—Ä–æ—Å—Ç–æ: –ø—Ä–æ—Å–∏–º —É–≤–∞–∂–∞–µ–º–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –¥–æ–±–∞–≤–∏—Ç—å –≤–∞—Å –Ω–∞ –ø—Ä–æ–µ–∫—Ç. –î–ª—è —ç—Ç–æ–≥–æ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ –Ω—É–∂–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, –Ω–∞–∂–∏–º–∞–µ–º –Ω–∞ –∫—Ä–∞—Å–∏–≤—É—é –∏–∫–æ–Ω–∫—É —à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É, –¥–∞–ª–µ–µ –≤–∫–ª–∞–¥–∫–∞ ¬´–ö–æ–º–∞–Ω–¥–∞¬ª. –ù–∞ —ç—Ç–æ–º —ç–∫—Ä–∞–Ω–µ –≤—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞, –ø–æ–º–µ–Ω—è—Ç—å —Ä–æ–ª–∏ —É —Ç–µ–∫—É—â–∏—Ö –∏, —Å–∞–º–æ —Å–æ–±–æ–π, —É–¥–∞–ª–∏—Ç—å —Ç–µ—Ö, –∫—Ç–æ —Å–æ–º–Ω–µ–≤–∞–µ—Ç—Å—è –≤ –≤–∞—à–µ–º –∏–¥–µ–∞–ª—å–Ω–æ–º –∫–æ–¥–µ. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –í–æ—Ç –∏ –ø–æ–¥–æ—à–ª–æ –∫ –∫–æ–Ω—Ü—É –Ω–∞—à–µ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ–º–æ—â–Ω–∏–∫–∞. –ù–∞–¥–µ—é—Å—å, –¥–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ —Ç–µ–º, –∫—Ç–æ —Ç–æ–ª—å–∫–æ —Ä–µ—à–∏–ª –∑–∞–≤–µ–∑—Ç–∏ –ø–æ—Ö–æ–∂–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ –Ω–µ –∑–Ω–∞–µ—Ç, —Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å. –¢–∞–∫–∂–µ –º–æ–≥—É –¥–∞—Ç—å —Å–æ–≤–µ—Ç: –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ Code- –∏ Graph-–ø—Ä–æ–µ–∫—Ç–æ–≤ –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–º–ø–ª–µ–π—Ç, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∫–æ–≤—ã—Ä—è—Ç—å—Å—è –≤ –Ω–∏—Ö ‚Äî —Ç–∞–º –µ—Å—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥. –ù–∞ —ç—Ç–æ–º —è —Å –≤–∞–º–∏ –ø—Ä–æ—â–∞—é—Å—å. –ñ–¥—É –≤–∞—à–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–æ–≤. –ñ–∏–≤–∏—Ç–µ –¥–æ–ª–≥–æ –∏ –ø—Ä–æ—Ü–≤–µ—Ç–∞–π—Ç–µ.   ]]></text>
</doc>
