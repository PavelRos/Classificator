<?xml version="1.0" ?>
<doc>
	<label auto="true" type="str" verify="true"><![CDATA[Develop]]></label>
	<author auto="true" type="list" verify="true">
		<item type="str"><![CDATA[KosteevAlex]]></item>
	</author>
	<date auto="true" type="str" verify="true"><![CDATA[2022-12-15, 11:09]]></date>
	<link auto="true" type="str" verify="true"><![CDATA[https://habr.com/ru/post/705662/]]></link>
	<title auto="true" type="str" verify="true"><![CDATA[Автоматизация обработки данных]]></title>
	<categories auto="true" type="list" verify="true">
		<item type="str"><![CDATA[Microsoft SQL Server]]></item>
		<item type="str"><![CDATA[Хранилища данных]]></item>
	</categories>
	<key_words auto="true" type="list" verify="true">
		<item type="str"><![CDATA[ssis]]></item>
		<item type="str"><![CDATA[sql server]]></item>
		<item type="str"><![CDATA[olap]]></item>
		<item type="str"><![CDATA[olap-кубы]]></item>
	</key_words>
	<text auto="true" type="str" verify="true"><![CDATA[Основная статья Взаимодействие DWH Oracle и MS SQL
Завершающим этапом для загрузки, обработки данных и наполнения данных куба, можно назвать автоматизацию выполнения задач по расписанию. Для реализации этого в MS SQL Server имеется SQL Agent.
Предварительно необходимо создать учетную запись (Credential) (см. Рис. 1), из-под которой
будет выполняться запуск заданий (Job).  Эта учетная запись должна быть связана с доменной учетной записью, которой будет предоставлены привилегии. Этой учетной записи можно выдавать доступы, например, в каталогах для загрузки и выгрузки файлов, доступа к серверам и т.п. Если данную учетную запись не создавать, то необходимо выдавать доступы для учетной записи SQL Agent, что может не соответствовать с вашей политикой безопасности в организации.
Рис. 1 Создание нового Credential
Для запуска SQL Server Integration Services (SSIS) пакетов создаём так же Proxy (см. Рис. 2) и назначаем необходимые параметры (см. Рис. 3).
Рис. 2 Создание Proxy
Рис. 3 Выдача разрешений Proxy
Основным для нашей цели автоматизации является создание задания для запуска SSIS пакетов и установка расписания этих запусков. В разделе создания шагов выполнения необходимо выбрать тип для запуска SSIS, указать Proxy из-под которого будет выполняться запуск, указать имя сервера и путь к пакету из каталога Integration server catalog (см. Рис. 4).
Рис. 4 Создание шага для запуска пакета
Для обработки куба есть 2 варианта:
Создать обработки в SSIS.
Выполнить обработку при помощи запроса.
При первом варианте создаем SSIS пакет, в котором будут использоваться инструменты Analysis Services Processing Task. В нем мы указываем измерения и меры, которые подлежат обработке (см. Рис. 5). И добавляем данный шаг в задание.
Рис. 5 Использование Analysis Services Processing Task
При втором варианте, если нам не нужно разделение, отбор на конкретные измерения и меры, то мы можем воспользоваться скриптом.
<Batch xmlns="http://schemas.microsoft.com/analysisservices/2003/engine">
  <Parallel>
    <Process xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ddl2="http://schemas.microsoft.com/analysisservices/2003/engine/2" xmlns:ddl2_2="http://schemas.microsoft.com/analysisservices/2003/engine/2/2" xmlns:ddl100_100="http://schemas.microsoft.com/analysisservices/2008/engine/100/100" xmlns:ddl200="http://schemas.microsoft.com/analysisservices/2010/engine/200" xmlns:ddl200_200="http://schemas.microsoft.com/analysisservices/2010/engine/200/200" xmlns:ddl300="http://schemas.microsoft.com/analysisservices/2011/engine/300" xmlns:ddl300_300="http://schemas.microsoft.com/analysisservices/2011/engine/300/300" xmlns:ddl400="http://schemas.microsoft.com/analysisservices/2012/engine/400" xmlns:ddl400_400="http://schemas.microsoft.com/analysisservices/2012/engine/400/400" xmlns:ddl500="http://schemas.microsoft.com/analysisservices/2013/engine/500" xmlns:ddl500_500="http://schemas.microsoft.com/analysisservices/2013/engine/500/500">
      <Object>
        <DatabaseID>Cube_name</DatabaseID>
        <CubeID>Cube_name</CubeID>
      </Object>
      <Type>ProcessFull</Type>
      <WriteBackTableCreation>UseExisting</WriteBackTableCreation>
    </Process>
  </Parallel>
</Batch>
И создать в задании шаг по запуску данного скрипта, в котором указать нужный тип (см. Рис. 6).
Рис. 6 Шаг для обработки куба
По желанию можно установить расписание, при котором будет выполняться запуск задания.
В MS SQL Server есть все необходимые инструменты для реализации задач аналитического
хранилища данных. Основная статья Взаимодействие DWH Oracle и MS SQL Взаимодействие DWH Oracle и MS SQL Завершающим этапом для загрузки, обработки данных и наполнения данных куба, можно назвать автоматизацию выполнения задач по расписанию. Для реализации этого в MS SQL Server имеется SQL Agent. Предварительно необходимо создать учетную запись (Credential) (см. Рис. 1), из-под которой
будет выполняться запуск заданий (Job).  Эта учетная запись должна быть связана с доменной учетной записью, которой будет предоставлены привилегии. Этой учетной записи можно выдавать доступы, например, в каталогах для загрузки и выгрузки файлов, доступа к серверам и т.п. Если данную учетную запись не создавать, то необходимо выдавать доступы для учетной записи SQL Agent, что может не соответствовать с вашей политикой безопасности в организации.  Рис. 1 Создание нового Credential  Рис. 1 Создание нового Credential Для запуска SQL Server Integration Services (SSIS) пакетов создаём так же Proxy (см. Рис. 2) и назначаем необходимые параметры (см. Рис. 3). Рис. 2 Создание Proxy  Рис. 2 Создание Proxy Рис. 3 Выдача разрешений Proxy  Рис. 3 Выдача разрешений Proxy Основным для нашей цели автоматизации является создание задания для запуска SSIS пакетов и установка расписания этих запусков. В разделе создания шагов выполнения необходимо выбрать тип для запуска SSIS, указать Proxy из-под которого будет выполняться запуск, указать имя сервера и путь к пакету из каталога Integration server catalog (см. Рис. 4).  Рис. 4 Создание шага для запуска пакета Для обработки куба есть 2 варианта: Создать обработки в SSIS.
Выполнить обработку при помощи запроса. Создать обработки в SSIS. Создать обработки в SSIS.]]></text>
</doc>
